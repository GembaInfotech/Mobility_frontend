"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[4125],{53247:function(e,l,o){o(72791);var n=o(16146),i=o(80184);l.Z=function(e){var l,o=e.uploadLoading,a=e.header,t=e.des,d=e.onDialogClose,r=e.isWarning,s=e.onConfirmClick,u=e.isOpen,c=e.buttonLabel,v=e.setUploadFile,p=e.uploadFile;return(0,i.jsx)(n.Vq,{isOpen:u,onClose:d,onRequestClose:d,contentClassName:"pb-0 px-0 mt-36 min-w-36",children:(0,i.jsxs)("div",{className:"px-5 pb-5",children:[(0,i.jsx)("h5",{className:"mb-4",children:a}),(0,i.jsx)("p",{children:t}),r&&(0,i.jsx)("p",{className:"text-red-700",children:r}),(0,i.jsxs)(n.BZ,{className:"mb-4",children:[(0,i.jsx)(n.II,{value:null===p||void 0===p||null===(l=p[0])||void 0===l?void 0:l.name}),(0,i.jsx)(n.gq,{uploadLimit:1,showList:!1,accept:[".xlsx, .xls, .csv"],name:"uploadFile",onChange:function(e){v(e)}})]}),(0,i.jsxs)("div",{className:"text-right mt-6",children:[(0,i.jsx)(n.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:d,children:"Cancel"}),(0,i.jsx)(n.zx,{variant:"solid",onClick:s,loading:o,disabled:!p,children:c})]})]})})}},44125:function(e,l,o){o.r(l),o.d(l,{default:function(){return G}});var n=o(1413),i=o(29439),a=o(72791),t=o(9494),d=o(11723),r=o(40018),s=o(16146),u=o(58617),c=o(93433),v=o(92506),p=o(62797),m=o(78820),h=o(80184),f=[{label:"LCodes",value:1},{label:"ICD",value:2}],x=[{label:"Consumables",value:1},{label:"Manufacture",value:2}],g=function(e){var l=e.editData,o=e.onCancel,n=e.onSave,i=e.isLoading;return(0,h.jsxs)("div",{className:"text-right w-full",children:[(0,h.jsx)(s.zx,{className:"mr-2",onClick:o,disabled:i,icon:(0,h.jsx)(m.SV5,{}),children:"Cancel"}),(0,h.jsx)(s.zx,{variant:"solid",type:"submit",onClick:n,disabled:i,icon:(0,h.jsx)(m.JMf,{}),children:null!==l&&void 0!==l&&l.id?"Update":"Save"})]})},y=p.Ry().shape({code:p.Z_().required("Required"),type:p.Ry().required("Required"),group:p.Ry().required("Required"),uom:p.Ry().required("Required")}),C={material:"",group:null,code:"",description:"",type:null,uom:null},b=function(e){var l=e.editData,o=e.show,n=e.onClose,u=e.refreshPage,p=(0,a.useRef)(),b=(0,a.useState)(!1),j=(0,i.Z)(b,2),D=j[0],S=j[1],A=(0,a.useState)([]),E=(0,i.Z)(A,2),I=E[0],M=E[1],N=(0,a.useState)(""),T=(0,i.Z)(N,2),L=T[0],Z=T[1],F=(0,a.useState)(!1),R=(0,i.Z)(F,2),w=R[0],O=R[1];(0,a.useEffect)((function(){(0,t.ac)(d.vh.LIST_DATA,{type:d.kD.UOM}).then((function(e){var l;console.log(e),M(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data.map((function(e){return{label:e.name,value:e._id}})))})).catch((function(e){console.error("Failed to fetch UOM options:",e),s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"Failed to load UOM options."}))}))}),[]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.dy,{isOpen:o,onClose:n,onRequestClose:n,closable:!1,bodyClass:"p-0",title:null!==l&&void 0!==l&&l.id?"Edit Items":"Add Items",footer:(0,h.jsx)(g,{onCancel:n,onSave:function(){var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.submitForm()},isLoading:D,editData:l}),children:(0,h.jsx)(r.lG,{children:(0,h.jsx)(v.J9,{innerRef:p,initialValues:l||C,validationSchema:y,onSubmit:function(e){var l,o,i,a=e.material,r=e.code,c=e.id,v=e.description,p=e.type,m=e.group,f=e.uom;S(!0);var x={material:a,code:r,description:v,type:null===p||void 0===p||null===(l=p.value)||void 0===l?void 0:l.toString(),group:null===m||void 0===m||null===(o=m.value)||void 0===o?void 0:o.toString(),uomId:null===f||void 0===f||null===(i=f.value)||void 0===i?void 0:i.toString(),modelType:d.kD.MATERIALS};console.log("Submitting payload:",x),c&&(x.id=c),(0,t.Fv)(d.vh.ADD_EDIT_DATA,x).then((function(){n(),u(),s.Am.push((0,h.jsx)(s.P_,{type:"success",children:"Material saved!"}))})).catch((function(e){console.error("Failed to save material:",e),s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"Failed to save material. Please try again."}))})).finally((function(){return S(!1)}))},enableReinitialize:!0,children:function(e){var l=e.errors,o=e.touched,n=e.setFieldValue,i=e.values;return(0,h.jsx)(v.l0,{className:"p-5",children:(0,h.jsxs)(s.Yb,{children:[(0,h.jsx)(s.xJ,{label:"Material Name",invalid:(null===l||void 0===l?void 0:l.material)&&(null===o||void 0===o?void 0:o.material),errorMessage:null===l||void 0===l?void 0:l.material,children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"material",placeholder:"Enter Material Name",component:s.II})}),(0,h.jsx)(s.xJ,{label:"Group",invalid:(null===l||void 0===l?void 0:l.group)&&(null===o||void 0===o?void 0:o.group),errorMessage:null===l||void 0===l?void 0:l.group,children:(0,h.jsx)(s.Ph,{autoComplete:"off",size:"sm",name:"group",className:"mb-1 w-full",placeholder:"Select Group",options:x,value:i.group,onChange:function(e){n("group",e)}})}),(0,h.jsx)(s.xJ,{label:"Type",invalid:(null===l||void 0===l?void 0:l.type)&&(null===o||void 0===o?void 0:o.type),errorMessage:null===l||void 0===l?void 0:l.type,children:(0,h.jsx)(s.Ph,{autoComplete:"off",size:"sm",name:"type",className:"mb-1 w-full",placeholder:"Select Type",options:f,value:i.type,onChange:function(e){n("type",e)}})}),(0,h.jsx)(s.xJ,{label:"Code",invalid:(null===l||void 0===l?void 0:l.code)&&(null===o||void 0===o?void 0:o.code),errorMessage:null===l||void 0===l?void 0:l.code,children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"code",placeholder:"Enter Code",component:s.II})}),(0,h.jsx)(s.xJ,{label:"UOM",invalid:(null===l||void 0===l?void 0:l.uom)&&(null===o||void 0===o?void 0:o.uom),errorMessage:null===l||void 0===l?void 0:l.uom,children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(s.Ph,{autoComplete:"off",size:"sm",name:"uom",className:"mb-2 w-full",placeholder:"Select UOM",options:I,value:i.uom,onChange:function(e){n("uom",e)}}),(0,h.jsx)(s.zx,{icon:(0,h.jsx)(m.Lfi,{}),onClick:function(){return O(!0)},variant:"outline",className:"ml-2 mb-2",size:"sm",children:"Add New"})]})}),(0,h.jsx)(s.xJ,{label:"Description",children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"description",placeholder:"Enter Description",component:s.II})})]})})}})})}),(0,h.jsx)(s.Vq,{isOpen:w,onClose:function(){return O(!1)},title:"Add New UOM",children:(0,h.jsxs)("div",{className:"p-6",children:[(0,h.jsx)(s.II,{type:"text",value:L,onChange:function(e){return Z(e.target.value)},placeholder:"Enter new UOM",className:"mb-4"}),(0,h.jsx)(s.zx,{icon:(0,h.jsx)(m.Lfi,{}),onClick:function(){L.trim()&&(0,t.Fv)(d.vh.ADD_EDIT_DATA,{name:L,modelType:d.kD.UOM}).then((function(e){var l={label:L,value:e.data.id};M((function(e){return[].concat((0,c.Z)(e),[l])})),Z(""),O(!1),s.Am.push((0,h.jsx)(s.P_,{type:"success",children:"UOM added successfully!"}))})).catch((function(e){console.error("Failed to add UOM:",e),s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"Failed to add UOM. Please try again."}))}))},variant:"solid",children:"Add"})]})})]})},j=[{label:"LCodes",value:1},{label:"ICD",value:2}],D=[{label:"Consumables",value:1},{label:"Manufacture",value:2}],S=function(e){var l=e.editData,o=e.onCancel,n=e.onSave,i=e.isLoading;return(0,h.jsxs)("div",{className:"text-right w-full",children:[(0,h.jsx)(s.zx,{className:"mr-2",onClick:o,disabled:i,icon:(0,h.jsx)(m.SV5,{}),children:"Cancel"}),(0,h.jsx)(s.zx,{variant:"solid",type:"submit",onClick:n,disabled:i,icon:(0,h.jsx)(m.JMf,{}),children:null!==l&&void 0!==l&&l.id?"Update":"Save"})]})},A=p.Ry().shape({code:p.Z_().required("Required"),type:p.Ry().required("Required")}),E={material:"",Group:"",code:"",description:"",type:"",location:""},I=function(e){var l=e.editData,o=e.show,n=e.onClose,u=e.refreshPage,c=(0,a.useRef)(),p=(0,a.useState)(!1),m=(0,i.Z)(p,2),f=m[0],x=m[1];return(0,h.jsx)(s.dy,{isOpen:o,onClose:n,onRequestClose:n,closable:!1,bodyClass:"p-0",title:null!==l&&void 0!==l&&l.id?"Edit Items":"Add Items",footer:(0,h.jsx)(S,{onCancel:n,onSave:function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.submitForm()},isLoading:f,editData:l}),children:(0,h.jsx)(r.lG,{children:(0,h.jsx)(v.J9,{innerRef:c,initialValues:l||E,validationSchema:A,onSubmit:function(e){var l,o,i=e.material,a=e.code,r=e.id,c=e.description,v=e.type,p=e.group;console.log(),x(!0);var m={material:i,code:a,description:c,type:null===v||void 0===v||null===(l=v.value)||void 0===l?void 0:l.toString(),group:null===p||void 0===p||null===(o=p.value)||void 0===o?void 0:o.toString(),modelType:d.kD.MATERIALS};console.log(m),r&&(m.id=r),(0,t.Fv)(d.vh.ADD_EDIT_DATA,m).then((function(){n(),u(),s.Am.push((0,h.jsx)(s.P_,{type:"success",children:"Material saved!"}))})).finally((function(){return x(!1)}))},enableReinitialize:!0,children:function(e){var l=e.errors,o=e.touched,n=e.setFieldValue,i=e.values;return(0,h.jsx)(v.l0,{className:"p-5",children:(0,h.jsxs)(s.Yb,{children:[(0,h.jsx)(s.xJ,{label:"Material Name",invalid:(null===l||void 0===l?void 0:l.material)&&(null===o||void 0===o?void 0:o.material),errorMessage:null===l||void 0===l?void 0:l.material,children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"material",placeholder:"Enter Material Name",component:s.II})}),(0,h.jsx)(s.xJ,{label:"Group",invalid:(null===l||void 0===l?void 0:l.group)&&(null===o||void 0===o?void 0:o.group),errorMessage:null===l||void 0===l?void 0:l.group,children:(0,h.jsx)(s.Ph,{autoComplete:"off",size:"sm",name:"group",className:"mb-1 w-full",placeholder:"Select Group",options:D,value:i.group,onChange:function(e){n("group",e)}})}),(0,h.jsx)(s.xJ,{label:"Type",invalid:(null===l||void 0===l?void 0:l.type)&&(null===o||void 0===o?void 0:o.type),errorMessage:null===l||void 0===l?void 0:l.type,children:(0,h.jsx)(s.Ph,{autoComplete:"off",size:"sm",name:"type",className:"mb-1 w-full",placeholder:"Select Type",options:j,value:i.type,onChange:function(e){n("type",e)}})}),(0,h.jsx)(s.xJ,{label:"Code",invalid:(null===l||void 0===l?void 0:l.code)&&(null===o||void 0===o?void 0:o.code),errorMessage:null===l||void 0===l?void 0:l.code,children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"code",placeholder:"Enter Code",component:s.II})}),(0,h.jsx)(s.xJ,{label:"Description",children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"description",placeholder:"Enter Description",component:s.II})}),(0,h.jsx)(s.xJ,{label:"Location",children:(0,h.jsx)(v.gN,{type:"text",autoComplete:"off",name:"location",placeholder:"Enter Location",component:s.II})})]})})}})})})},M=o(52452),N=o(93156),T=o(25764),L=o(76053),Z=o(54048),F=o(52639),R=o(53247),w=o(31673),O=o(47511),k=function(e){return"1"===e?{label:"Lcodes",value:1}:{label:"icd",value:2}},P=function(e){return"1"===e?{label:"Consumables",value:1}:{label:"Manufacture",value:2}},_=[{label:"Edit",key:F.A6.EDIT,show:function(){return(0,O.ZP)(O.Fm.CODES,O.qz.WRITE)}},{label:(0,h.jsx)(m.YK6,{style:{fontSize:"1.2rem"}}),key:F.A6.DELETE,toolTip:"Delete",show:function(){return(0,O.ZP)(O.Fm.CODES,O.qz.DELETE)}}],q=[{label:"Add Material",key:F.A6.ADD,icon:(0,h.jsx)(u.HQD,{})}],z=[{component:"select",options:[{label:"Lcodes",value:1},{label:"icd",value:2}],className:"mb-4 w-40\t",placeholder:"Code Type",filterKey:"codeType"},{component:"input",className:"mb-4 w-40\t",placeholder:"CreatedBy",filterKey:"createdBy"},{component:"resetButton",label:"Reset",icon:(0,h.jsx)(L.pYJ,{}),className:"mb-4",filterKey:{codeType:""}}],U={header:F.BI.HEADER,des:F.BI.DELETE,buttonLabel:"Delete"},J="Import",B="Choose File to upload",H="Upload",V="Uploading",G=function(){var e=(0,a.useState)([]),l=(0,i.Z)(e,2),o=l[0],u=l[1],c=(0,a.useState)(!1),v=(0,i.Z)(c,2),p=v[0],m=v[1],f=(0,a.useState)(1),x=(0,i.Z)(f,2),g=x[0],y=x[1],C=(0,a.useState)(0),j=(0,i.Z)(C,2),D=j[0],S=j[1],A=(0,a.useState)(10),E=(0,i.Z)(A,2),L=E[0],G=E[1],W=(0,a.useState)(""),K=(0,i.Z)(W,2),Y=K[0],Q=K[1],X=(0,a.useState)(!1),$=(0,i.Z)(X,2),ee=$[0],le=$[1],oe=(0,a.useState)(!1),ne=(0,i.Z)(oe,2),ie=ne[0],ae=ne[1],te=(0,a.useState)(!1),de=(0,i.Z)(te,2),re=de[0],se=de[1],ue=(0,a.useState)(""),ce=(0,i.Z)(ue,2),ve=ce[0],pe=ce[1],me=(0,a.useState)(!1),he=(0,i.Z)(me,2),fe=he[0],xe=he[1],ge=(0,a.useState)(!1),ye=(0,i.Z)(ge,2),Ce=ye[0],be=ye[1],je=(0,a.useState)(),De=(0,i.Z)(je,2),Se=De[0],Ae=De[1],Ee=(0,a.useState)(""),Ie=(0,i.Z)(Ee,2),Me=Ie[0],Ne=Ie[1],Te=function(){return se((function(e){return!e}))},Le=(0,a.useState)({codeType:""}),Ze=(0,i.Z)(Le,2),Fe=Ze[0],Re=Ze[1],we=(0,a.useState)(!1),Oe=(0,i.Z)(we,2),ke=Oe[0],Pe=Oe[1],_e=(0,a.useState)(!1),qe=(0,i.Z)(_e,2),ze=qe[0],Ue=qe[1];(0,a.useEffect)((function(){m(!0);var e,l={type:d.kD.MATERIALS,limit:L,search:Y,createdBy:null!==Fe&&void 0!==Fe&&Fe.createdBy?Fe.createdBy:null,skip:L*(g-1)};""!==(null===Fe||void 0===Fe?void 0:Fe.codeType)&&(l.codeType=null===Fe||void 0===Fe||null===(e=Fe.codeType)||void 0===e?void 0:e.value);(0,t.ac)(d.vh.LIST_DATA,(0,n.Z)({},l)).then((function(e){var l,o,n;Ne(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.lcodeSampleFile),u([]),u(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data),S(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.count)})).finally((function(){return m(!1)}))}),[Y,g,L,re,Fe]);var Je=function(e,l,o){l===F.A6.EDIT&&(pe({id:null===o||void 0===o?void 0:o._id,material:null===o||void 0===o?void 0:o.material,group:P(null===o||void 0===o?void 0:o.group),code:null===o||void 0===o?void 0:o.code,description:null===o||void 0===o?void 0:o.description,type:k(null===o||void 0===o?void 0:o.type),uom:null===o||void 0===o?void 0:o.uom}),le(!0)),l===F.A6.DELETE&&(pe({id:null===o||void 0===o?void 0:o._id}),xe(!0)),l===F.A6.VIEW&&(pe({id:null===o||void 0===o?void 0:o._id,material:null===o||void 0===o?void 0:o.material,group:P(null===o||void 0===o?void 0:o.group),code:null===o||void 0===o?void 0:o.code,description:null===o||void 0===o?void 0:o.description,type:k(null===o||void 0===o?void 0:o.type)}),ae(!0))},Be=[{Header:"Material Code",accessor:function(e){return e.materialNo?e.materialNo:"-"}},{Header:"Code",accessor:"code"},{Header:"Material Name",accessor:"material"},{Header:"Description",Cell:function(e){var l,o=null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.original;return null!==o&&void 0!==o&&o.description?null===o||void 0===o?void 0:o.description:"-"}},{Header:"Type",accessor:"type",Cell:function(e){return"1"===e.row.original.type?"Lcodes":"icd"}},{Header:"UOM",accessor:function(e){var l;return e.uomId?null===(l=e.uomId)||void 0===l?void 0:l.name:"-"}},{Header:"Group",accessor:"group",Cell:function(e){return"1"===e.row.original.group?"Consumables":"Manufacture"}},{Header:"CreatedBy",accessor:function(e){var l;return e.createdBy?null===(l=e.createdBy)||void 0===l?void 0:l.name:"-"}},{Header:"Active",Cell:function(e){return(0,h.jsx)(w.Z,{dataObj:e,setSelectedData:pe,setActiveConfirm:Pe,setOpenModal:xe})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,h.jsx)(M.Z,{row:e.row.original,onActionHandle:Je,actionsMenu:_})}}],He=function(){pe(""),xe(!1),Pe(!1)},Ve=function(){Ue(!1),Ae("")};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(N.Z,{buttonMenu:(0,O.ZP)(O.Fm.CODES,O.qz.WRITE)?q:q.slice(0,q.length-1),FilterMenu:z,setSearch:Q,buttonClick:function(e,l){if(l===F.A6.ADD&&le(!0),l===F.A6.IMPORT&&Ue(!0),l===F.A6.DOWNLOAD){var o="".concat(null===Z.Z||void 0===Z.Z?void 0:Z.Z.imageBaseUrl).concat(Me),n=document.createElement("a");n.href=o,n.download="example-file.txt",n.click(),window.URL.revokeObjectURL(o)}},setFilterValue:Re,filterValue:Fe}),(0,h.jsx)(r.lG,{className:"h-full",bodyClass:"h-full",children:(0,h.jsx)(r.wQ,{columns:(0,O._P)(Be,O.Fm.CODES,1),isCursor:!1,data:o,loading:p,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:g,pageSize:L,total:D},onPaginationChange:function(e){return y(e)},onSelectChange:function(e){return G(e)}})}),(0,h.jsx)(b,{show:ee,onClose:function(){pe(""),le(!1)},refreshPage:Te,editData:ve}),(0,h.jsx)(I,{show:ie,onClose:function(){pe(""),ae(!1)},refreshPage:Te,editData:ve}),(0,h.jsx)(T.Z,{isOpen:fe,onConfirmClick:function(){var e,l={type:d.kD.MATERIALS,id:null===ve||void 0===ve?void 0:ve.id};ke?(e=F.D5,l.status=+(null===ve||void 0===ve?void 0:ve.action)):(e=F.O7,l.status=0),(0,t.Fv)(d.vh.BLOCK_DELETE_DATA,l).then((function(l){s.Am.push((0,h.jsx)(s.P_,{type:"success",children:e})),se((function(e){return!e})),He()}))},header:U.header,des:ke?null===F.uF||void 0===F.uF?void 0:F.uF.des:F.BI.DELETE,onDialogClose:He,isWarning:!ke&&F.BI.WARNING,buttonLabel:ke?null===F.uF||void 0===F.uF?void 0:F.uF.buttonLabel:U.buttonLabel}),(0,h.jsx)(R.Z,{uploadLoading:Ce,setUploadFile:Ae,isOpen:ze,header:J,des:B,onDialogClose:Ve,onConfirmClick:function(){be(!0);for(var e=new FormData,l=0;l<(null===Se||void 0===Se?void 0:Se.length);l++)e.append("file",Se[l]);(0,t.Fv)(d.vh.IMPORT_CODE,e).then((function(e){se((function(e){return!e})),be(!1),s.Am.push((0,h.jsx)(s.P_,{type:"success",children:F.pX})),Ve()}))},buttonLabel:Ce?V:H,uploadFile:Se})]})}}}]);
//# sourceMappingURL=4125.855fb762.chunk.js.map