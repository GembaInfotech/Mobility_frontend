"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[2334],{42334:function(e,n,a){a.r(n),a.d(n,{default:function(){return P}});var o=a(1413),l=a(29439),i=a(72791),d=a(16146),r=a(92506),t=localStorage.getItem("selectedHospitalId"),u="67c3ec77851f03d96270ca85"===t?"NASPAC Case No.":"67c3fb8308a4d79e36ebf939"===t?"PPS Case No.":"Case No.",c=[{name:"firstName",label:"First Name",type:"text",component:d.II,placeholder:"Enter first name",isBasic:!0},{name:"lastName",label:"Last Name",type:"text",component:d.II,placeholder:"Enter last name",isBasic:!0},{name:"phoneNumber",countryCode:"countryCode",label:"Mobile No.",component:"phoneNumber",placeholder:"Enter mobile no."},{name:"dob",label:"DOB",component:"datepicker"},{name:"naspacNo",label:"".concat(u),type:"text",component:d.II,isBasic:!0,placeholder:"".concat(u)}],s=[{name:"primaryInsurance",apiType:"insurance",label:"Primary Insurance",component:"asyncSelect",placeholder:"Select primary insurance"},{name:"primaryInsuranceNo",label:"Primary Insurance No.",type:"text",component:d.II,placeholder:"Enter primary insurance no.",isBasic:!0},{name:"secondaryInsurance",apiType:"insurance",label:"Secondary Insurance",component:"asyncSelect",placeholder:"Select secondary insurance"},{name:"secondaryInsuranceNo",label:"Seconday Insurance No.",type:"text",component:d.II,placeholder:"Enter secondary insurance no.",isBasic:!0}],m=(d.II,[{label:"Male",value:1},{label:"Female",value:2},{label:"Others",value:3}]),v=[{label:"LTC",value:1},{label:"Subacute",value:2}],p=a(93433),h=a(75737),y=a.n(h),f=(a(70902),a(9494)),I=a(11723),N=a(48573),b=a.n(N),x=a(80034),g=a(40018),j=a(52639),C=a(47511),S=a(80184),w=function(e){var n=e.id,a=e.field,o=e.setFieldValue,l=e.values,i=(e.errors,e.touched,localStorage.getItem("selectedHospitalId")),t=b()((function(e,n){"state"===a.name&&(0,f.ac)(I.vh.GET_CODE,{type:4,search:e}).then((function(e){var a,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}}));n(o)})),"deviceType"===a.name&&(0,f.ac)(I.vh.GET_CODE,{type:2,search:e}).then((function(e){var a,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}}));n(o)})),"insurance"===a.apiType&&(0,f.ac)(I.vh.LIST_DATA,{type:I.kD.INSURANCES,search:e,companyId:i}).then((function(e){var a,o=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}}));n(o)}))}),300);return(0,S.jsxs)(S.Fragment,{children:["datepicker"===a.component&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(d.Mt,{inputtable:!0,selected:new Date(null===l||void 0===l?void 0:l[a.name]),name:a.name,inputFormat:j.zT,defaultValue:new Date(null===l||void 0===l?void 0:l[a.name]),value:new Date(null===l||void 0===l?void 0:l[a.name]),onChange:function(e){return o(a.name,e)}})}),"radio"===a.component&&(0,S.jsx)(S.Fragment,{children:m.map((function(e,n){return(0,S.jsx)(d.Y8,{className:"mr-4",name:"gender",value:e.value,onChange:function(e){return o(a.name,e)},checked:e.value===(null===l||void 0===l?void 0:l[a.name]),children:e.label})}))}),"patientRadio"===a.component&&(0,S.jsx)(S.Fragment,{children:v.map((function(e,n){return(0,S.jsx)(d.Y8,{className:"mr-4 mt-3",name:"simpleRadioExample1",value:e.value,onChange:function(e){return o(a.name,e)},checked:e.value===(null===l||void 0===l?void 0:l[a.name]),children:e.label})}))}),"phoneNumber"===a.component&&(0,S.jsx)(y(),{inputStyle:{width:"369px",padding:"11px 14px 11px 60px"},enableSearch:!0,country:"us",countryCodeEditable:!0,value:"".concat(null===l||void 0===l?void 0:l[a.name]),onChange:function(e,n){o(a.name,e),o(a.countryCode,null===n||void 0===n?void 0:n.dialCode)}}),"upload"===a.component&&(0,S.jsxs)(d.BZ,{className:"mb-4",children:[(0,S.jsx)(d.II,{value:l[a.name]}),(0,S.jsx)(d.gq,{uploadLimit:1,showList:!1,accept:["image/jpeg","image/png"],name:a.name,onChange:function(e){for(var n=new FormData,l=0;l<(null===e||void 0===e?void 0:e.length);l++)n.append("image",e[l]);(0,f.Fv)(I.vh.UPLOAD_IMAGE,n).then((function(e){var n,l,i=[];i=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[].concat((0,p.Z)(i),(0,p.Z)(null===e||void 0===e?void 0:e.data)):[].concat((0,p.Z)(i),[null===e||void 0===e?void 0:e.data]),o(a.name,null===(l=i[0])||void 0===l?void 0:l.original)}))}})]}),"asyncSelect"===a.component&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(r.gN,{closeMenuOnSelect:!0,component:d.Ph,autoComplete:"off",placeholder:a.placeholder,defaultOptions:!0,cacheOptions:!0,loadOptions:t,componentAs:x.Z,name:a.name,value:null===l||void 0===l?void 0:l[a.name],onChange:function(e){o(a.name,e)}})}),"password"===a.component&&!n&&(0,S.jsx)(r.gN,{autoComplete:"off",name:"password",placeholder:"Password",component:g.WU}),"ssn"===a.component&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.gN,{autoComplete:"off",name:"ssn",placeholder:"SSN",maxlength:9,component:d.II,onChange:function(e){return o(a.name,(0,C.bc)(e.target.value))},value:null===l||void 0===l?void 0:l[a.name]}),console.log(null===l||void 0===l?void 0:l[a.name])]})]})},A=a(57689),F=a(62797),_=a(60364),T=a(72426),E=a.n(T),Z=F.Ry().shape({firstName:F.Z_().required("Required"),lastName:F.Z_().required("Required"),dob:F.Z_().required("Required"),naspacNo:F.Z_().required("Required"),phoneNumber:F.Z_().required("Required"),primaryInsuranceNo:F.Z_(),primaryInsurance:F.Ry(),secondaryInsurance:F.Ry(),secondaryInsuranceNo:F.Z_()}),D={firstName:"",lastName:"",dob:E()().subtract(18,"years").format(),naspacNo:"",phoneNumber:"",countryCode:"+1",primaryInsurance:"",primaryInsuranceNo:"",secondaryInsurance:"",secondaryInsuranceNo:""},P=function(){var e=localStorage.getItem("selectedHospitalId"),n=(0,i.useState)([]),a=(0,l.Z)(n,2),t=a[0];a[1],(0,_.v9)((function(e){return e.auth.user}));console.log("companyOptionshdbfhrbf",t);var u=(0,A.UO)().id,m=(0,i.useState)({}),v=(0,l.Z)(m,2),p=v[0],h=v[1],y=(0,i.useState)(!0),N=(0,l.Z)(y,2),b=N[0],x=N[1],g=(0,A.s0)();(0,i.useEffect)((function(){u?(0,f.ac)(I.vh.LIST_DATA,{type:I.kD.PATIENTS,companyId:e,id:u}).then((function(e){var n,a,o,l,i,d=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;h({firstName:null===d||void 0===d?void 0:d.firstName,lastName:null===d||void 0===d?void 0:d.lastName,dob:null===d||void 0===d?void 0:d.dob,countryCode:null!==(null===d||void 0===d?void 0:d.countryCode)?null===d||void 0===d?void 0:d.countryCode:"+1",phoneNumber:(null===d||void 0===d?void 0:d.countryCode)+(null===d||void 0===d?void 0:d.phoneNumber),naspacNo:null===d||void 0===d?void 0:d.naspacNo,primaryInsurance:{label:null===d||void 0===d||null===(a=d.primaryInsurance)||void 0===a?void 0:a.name,value:null===d||void 0===d||null===(o=d.primaryInsurance)||void 0===o?void 0:o._id},secondaryInsurance:{label:null===d||void 0===d||null===(l=d.secondaryInsurance)||void 0===l?void 0:l.name,value:null===d||void 0===d||null===(i=d.secondaryInsurance)||void 0===i?void 0:i._id},primaryInsuranceNo:null===d||void 0===d?void 0:d.primaryInsuranceNo,secondaryInsuranceNo:null===d||void 0===d?void 0:d.secondaryInsuranceNo})})).finally((function(){x(!1)})):x(!1)}),[u]);var C=(0,r.TA)({initialValues:u?p:D,enableReinitialize:!0,validationSchema:Z,onSubmit:function(n,a){var l,i,r,t,c=a.setSubmitting;(u&&(n.id=u),n.phoneNumber=null===n||void 0===n||null===(l=n.phoneNumber)||void 0===l?void 0:l.replace(null===n||void 0===n?void 0:n.countryCode,""),""===n.phoneNumber&&delete n.phoneNumber,n.primaryInsurance)&&(n.primaryInsurance=null===n||void 0===n||null===(r=n.primaryInsurance)||void 0===r?void 0:r.value);n.secondaryInsurance&&(n.secondaryInsurance=null===n||void 0===n||null===(t=n.secondaryInsurance)||void 0===t?void 0:t.value);""===n.primaryInsuranceNo&&delete n.primaryInsuranceNo,""===n.secondaryInsuranceNo&&delete n.secondaryInsuranceNo,""===n.primaryInsurance&&delete n.primaryInsurance,""===n.secondaryInsurance&&delete n.secondaryInsurance,null!==n&&void 0!==n&&null!==(i=n.countryCode)&&void 0!==i&&i.includes("+")||(n.countryCode="+".concat(n.countryCode)),n.companyId=e,(0,f.Fv)(I.vh.ADD_EDIT_PATIENT,(0,o.Z)({},n)).then((function(e){d.Am.push((0,S.jsx)(d.P_,{type:"success",children:u?j.D5:j.Te})),g(-1)})).catch((function(){c(!1)}))}}),F=C.errors,T=C.touched,E=C.values,P=C.handleSubmit,k=(C.getFieldProps,C.setFieldValue),R=C.isSubmitting;return(0,S.jsx)(r.Hy,{value:C,children:(0,S.jsxs)(r.l0,{className:"p-1",onSubmit:P,autoComplete:"off",noValidate:!0,children:[(0,S.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,S.jsx)("h3",{children:u?"Edit Patient":"Add Patient"}),(0,S.jsxs)("div",{className:"flex",children:[(0,S.jsx)(d.zx,{size:"sm",variant:"solid",onClick:function(){return g(-1)},type:"button",children:"Back / Cancel"}),(0,S.jsx)(d.zx,{size:"sm",variant:"solid",style:{marginLeft:"5px"},loading:R,type:"submit",children:u?"Update":"Save"})]})]}),(0,S.jsxs)("div",{children:[b&&(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsx)(d.$j,{size:"3.25rem"})}),!b&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.Zb,{className:"mt-2.5 w-3/4 ",children:(0,S.jsxs)(d.Yb,{className:" md:w-full lg:w-1/2",children:[(0,S.jsx)("h5",{className:"mb-4",children:"Personal Information"}),c.map((function(e,n,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(d.xJ,{label:"password"===e.component&&u?null:null===e||void 0===e?void 0:e.label,className:"ml-3 ",invalid:(null===F||void 0===F?void 0:F[null===e||void 0===e?void 0:e.name])&&(null===T||void 0===T?void 0:T[null===e||void 0===e?void 0:e.name]),errorMessage:null===F||void 0===F?void 0:F[null===e||void 0===e?void 0:e.name],children:e.isBasic?(0,S.jsx)(r.gN,{textArea:!(null===e||void 0===e||!e.textArea),type:null===e||void 0===e?void 0:e.type,autoComplete:"off",name:null===e||void 0===e?void 0:e.name,placeholder:null===e||void 0===e?void 0:e.placeholder,component:null===e||void 0===e?void 0:e.component}):(0,S.jsx)(w,{id:u,errors:F,field:e,setFieldValue:k,values:E})},n)})}))]})}),(0,S.jsx)(d.Zb,{className:"mt-4 w-3/4 ",children:(0,S.jsxs)(d.Yb,{className:" md:w-full lg:w-1/2",children:[(0,S.jsx)("h5",{className:"mb-4",children:"Insurance Information"}),s.map((function(e,n,a){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(d.xJ,{label:null===e||void 0===e?void 0:e.label,className:"ml-3",invalid:(null===F||void 0===F?void 0:F[null===e||void 0===e?void 0:e.name])&&(null===T||void 0===T?void 0:T[null===e||void 0===e?void 0:e.name]),errorMessage:null===F||void 0===F?void 0:F[null===e||void 0===e?void 0:e.name],children:e.isBasic?(0,S.jsx)(r.gN,{textArea:!(null===e||void 0===e||!e.textArea),type:null===e||void 0===e?void 0:e.type,autoComplete:"off",name:null===e||void 0===e?void 0:e.name,placeholder:null===e||void 0===e?void 0:e.placeholder,component:null===e||void 0===e?void 0:e.component}):(0,S.jsx)(w,{id:u,errors:F,field:e,setFieldValue:k,values:E})},n)})}))]})})]})]})]})})}}}]);
//# sourceMappingURL=2334.44ab810f.chunk.js.map