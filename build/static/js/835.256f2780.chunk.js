(self.webpackChunknasp=self.webpackChunknasp||[]).push([[835],{60835:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t(72791),a=t(73038),l=t(58617),n=t(96382);const i=(0,n.oM)({name:"projectList/state",initialState:{view:"grid",query:{order:"asc",search:""},newProjectDialog:!1},reducers:{toggleView:(e,s)=>{e.view=s.payload},toggleSort:(e,s)=>{e.query.order=s.payload},setSearch:(e,s)=>{e.query.search=s.payload},toggleNewProjectDialog:(e,s)=>{e.newProjectDialog=s.payload}}}),{toggleView:c,toggleSort:o,toggleNewProjectDialog:d,setSearch:m}=i.actions,x=i.reducer;var u=t(60364),j=t(48573),p=t.n(j),h=t(80184);const f=()=>{const e=(0,u.I0)(),s=(0,r.useRef)(),t=(0,u.v9)((e=>e.projectList.state.view)),{sort:n}=(0,u.v9)((e=>e.projectList.state.query)),i=p()((function(s){e(m(s))}),500);return(0,h.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,h.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Project List"}),(0,h.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-1",children:[(0,h.jsx)(a.II,{ref:s,size:"sm",placeholder:"Search",prefix:(0,h.jsx)(l.O6C,{className:"text-lg"}),onChange:e=>{i(e.target.value)}}),(0,h.jsx)(a.u,{title:"grid"===t?"List view":"Grid view",children:(0,h.jsx)(a.zx,{className:"hidden md:flex",onClick:()=>{e(c("grid"===t?"list":"grid"))},variant:"plain",size:"sm",icon:"grid"===t?(0,h.jsx)(l.O5k,{}):(0,h.jsx)(l.gXc,{})})}),(0,h.jsx)(a.u,{title:"Sort: "+("asc"===n?"A-Z":"Z-A"),children:(0,h.jsx)(a.zx,{className:"hidden md:flex",variant:"plain",size:"sm",icon:"asc"===n?(0,h.jsx)(l.KPY,{}):(0,h.jsx)(l.eeW,{}),onClick:()=>{e(o("asc"===n?"desc":"asc"))}})}),(0,h.jsx)(a.zx,{size:"sm",variant:"twoTone",icon:(0,h.jsx)(l.HQD,{}),onClick:()=>{e(d(!0))},children:"New Project"})]})]})};var g=t(81694),v=t.n(g),b=t(49559);const y=[{label:"Add Flag",value:"addFlag",icon:(0,h.jsx)(l.QNV,{})},{label:"Move",value:"move",icon:(0,h.jsx)(l.Iz7,{})},{label:"Setting",value:"projectSetting",icon:(0,h.jsx)(l.XlX,{})}],N=()=>(0,h.jsx)(a.Lt,{placement:"bottom-end",renderTitle:(0,h.jsx)(b.Z,{}),children:y.map((e=>(0,h.jsxs)(a.Lt.Item,{eventKey:e.value,children:[(0,h.jsx)("span",{className:"text-lg",children:e.icon}),(0,h.jsx)("span",{className:"ml-2 rtl:mr-2",children:e.label})]},e.value)))});var w=t(65264);const k=e=>{let{members:s}=e;return(0,h.jsx)(w.Z,{users:s})},T=e=>{let{progression:s}=e;const t=(0,r.useMemo)((()=>s>70?{color:"green-500"}:s<40?{color:"red-500"}:{}),[s]);return(0,h.jsx)(a.Ex,{size:"sm",percent:s,...t})};var L=t(11087);const C=e=>{let{data:s}=e;const{name:t,totalTask:r,completedTask:n,progression:i,desc:c,member:o}=s;return(0,h.jsx)(a.Zb,{bodyClass:"h-full",children:(0,h.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)(L.rU,{to:"/app/scrum-board",children:(0,h.jsx)("h6",{children:t})}),(0,h.jsx)(N,{})]}),(0,h.jsx)("p",{className:"mt-4",children:c}),(0,h.jsxs)("div",{className:"mt-3",children:[(0,h.jsx)(T,{progression:i}),(0,h.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,h.jsx)(k,{members:o}),(0,h.jsx)("div",{className:"flex items-center rounded-full font-semibold text-xs",children:(0,h.jsxs)("div",{className:"flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,h.jsx)(l.$Af,{className:"text-base"}),(0,h.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[n," / ",r]})]})})]})]})]})})},S=e=>{let{data:s,cardBorder:t}=e;const{name:r,totalTask:n,completedTask:i,progression:c,member:o,category:d}=s;return(0,h.jsx)("div",{className:"mb-4",children:(0,h.jsx)(a.Zb,{bordered:t,children:(0,h.jsxs)("div",{className:"grid gap-x-4 grid-cols-12",children:[(0,h.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("h6",{className:"font-bold",children:(0,h.jsx)(L.rU,{to:"/app/project/scrum-board",children:r})}),(0,h.jsx)("span",{children:d})]})}),(0,h.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 md:flex md:items-center md:justify-end",children:(0,h.jsxs)("div",{className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,h.jsx)(l.$Af,{className:"text-base"}),(0,h.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[i," / ",n]})]})}),(0,h.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-2 lg:col-span-3 md:flex md:items-center",children:(0,h.jsx)(T,{progression:c})}),(0,h.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,h.jsx)(k,{members:o})}),(0,h.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-1 flex md:items-center justify-end",children:(0,h.jsx)(N,{})})]})})})};var M=t(91181);const I=(0,n.hg)("projectList/getList",(async e=>{const s=await async function(e){return M.Z.fetchData({url:"/project/list",method:"post",data:e})}(e);return s.data})),q=(0,n.hg)("projectList/getMembers",(async()=>(await async function(){return M.Z.fetchData({url:"/project/scrum-board/members",method:"post"})}()).data.map((e=>({value:e.id,label:e.name,img:e.img}))))),z=(0,n.hg)("projectList/putProject",(async e=>{const s=await async function(e){return M.Z.fetchData({url:"/project/list/add",method:"put",data:e})}(e);return s.data})),A=(0,n.oM)({name:"projectList/data",initialState:{loading:!1,projectList:[],allMembers:[]},reducers:{},extraReducers:{[I.fulfilled]:(e,s)=>{e.projectList=s.payload,e.loading=!1},[I.pending]:e=>{e.loading=!0},[q.fulfilled]:(e,s)=>{e.allMembers=s.payload},[z.fulfilled]:(e,s)=>{e.projectList=s.payload}}}).reducer,Z=()=>{const e=(0,u.I0)(),s=(0,u.v9)((e=>e.projectList.data.loading)),t=(0,u.v9)((e=>e.projectList.data.projectList)),l=(0,u.v9)((e=>e.projectList.state.view)),{sort:n,search:i}=(0,u.v9)((e=>e.projectList.state.query));return(0,r.useEffect)((()=>{e(I({sort:n,search:i}))}),[e,n,i]),(0,h.jsxs)("div",{className:v()("mt-6 h-full flex flex-col",s&&"justify-center"),children:[s&&(0,h.jsx)("div",{className:"flex justify-center",children:(0,h.jsx)(a.$j,{size:40})}),"grid"===l&&t.length>0&&!s&&(0,h.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map((e=>(0,h.jsx)(C,{data:e},e.id)))}),"list"===l&&t.length>0&&!s&&t.map((e=>(0,h.jsx)(S,{data:e},e.id)))]})},E=e=>{let{onAddNewTask:s}=e;const[t,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),c=(0,r.useRef)(null);(0,r.useEffect)((()=>{t&&c.current.focus()}),[t]);const o=(0,r.useMemo)((()=>{let e=0;const s=n.length;return n.forEach((s=>{s.checked&&(e+=1)})),{completedTask:e,totalTask:s}}),[n]);(0,r.useEffect)((()=>{s(o)}),[n]);return(0,h.jsxs)("div",{className:"mb-7",children:[n.length>0&&(0,h.jsx)("div",{className:"flex flex-col mb-5",children:n.map(((e,s)=>(0,h.jsx)(a.XZ,{defaultChecked:e.checked,onChange:e=>((e,s)=>{i((t=>[...t.map(((t,r)=>(s===r&&(t.checked=e),t)))]))})(e,s),children:e.label},s)))}),t?(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(a.II,{ref:c,placeholder:"Add new task"}),(0,h.jsx)(a.zx,{type:"button",onClick:()=>{const e={label:c.current.value,checked:!1};i((s=>[...s,e])),l(!1)},children:"Add"})]}):(0,h.jsx)(a.zx,{block:!0,className:"border-dashed",onClick:()=>{l(!0)},children:"Create new task"})]})};var P=t(92506),D=t(74999),V=t(58121),O=t.n(V),X=t(81724);const{MultiValueLabel:$}=D.c,{useUniqueId:F}=a.PT,R=e=>{let{innerProps:s,label:t,data:r,isSelected:n}=e;return(0,h.jsxs)("div",{className:"flex items-center justify-between p-2 "+(n?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"),...s,children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(a.qE,{shape:"circle",size:20,src:r.img}),(0,h.jsx)("span",{className:"ml-2 rtl:mr-2",children:t})]}),n&&(0,h.jsx)(l.dZ6,{className:"text-emerald-500 text-xl"})]})},J=e=>{let{children:s,data:t,...r}=e;const{img:l}=t;return(0,h.jsx)($,{...r,children:(0,h.jsxs)("div",{className:"inline-flex items-center",children:[(0,h.jsx)(a.qE,{className:"mr-2 rtl:ml-2",shape:"circle",size:15,src:l}),s]})})},U=X.Ry().shape({title:X.Z_().min(3,"Too Short!").required("Title required"),content:X.Z_().required("Title required"),assignees:X.IX().min(1,"Assignee required"),rememberMe:X.Xg()}),W=()=>{const e=(0,u.I0)(),s=(0,u.v9)((e=>e.projectList.data.allMembers)),t=F("project-"),[l,n]=(0,r.useState)({});(0,r.useEffect)((()=>{e(q())}),[e]);const i=e=>{n(e)};return(0,h.jsx)(P.J9,{initialValues:{title:"",content:"",assignees:[]},validationSchema:U,onSubmit:(s,r)=>{let{resetForm:a,setSubmitting:n}=r;((s,r)=>{r(!0);const{title:a,content:n,assignees:i}=s,{totalTask:c,completedTask:o}=l,m=O()(i).map((e=>(e.name=e.label,e)));e(z({id:t,name:a,desc:n,totalTask:c,completedTask:o,progression:o/c*100||0,member:m})),e(d(!1))})(s,n)},children:e=>{let{touched:t,errors:r,values:l,resetForm:n}=e;return(0,h.jsx)(P.l0,{children:(0,h.jsxs)(a.Yb,{children:[(0,h.jsx)(a.xJ,{label:"Title",invalid:r.title&&t.title,errorMessage:r.title,children:(0,h.jsx)(P.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter title",component:a.II})}),(0,h.jsx)(a.xJ,{label:"Assignees",invalid:r.assignees&&t.assignees,errorMessage:r.assignees,children:(0,h.jsx)(P.gN,{name:"assignees",children:e=>{let{field:t,form:r}=e;return(0,h.jsx)(a.Ph,{isMulti:!0,className:"min-w-[120px]",components:{Option:R,MultiValueLabel:J},field:t,form:r,options:s,value:l.assignees,onChange:e=>{r.setFieldValue(t.name,e)}})}})}),(0,h.jsx)(a.xJ,{label:"Content",invalid:r.content&&t.content,errorMessage:r.content,children:(0,h.jsx)(P.gN,{textArea:!0,type:"text",autoComplete:"off",name:"content",placeholder:"Enter content",component:a.II})}),(0,h.jsx)(E,{onAddNewTask:i}),(0,h.jsx)(a.zx,{block:!0,variant:"solid",type:"submit",children:"Submit"})]})})}})},Y=()=>{const e=(0,u.I0)(),s=(0,u.v9)((e=>e.projectList.state.newProjectDialog)),t=()=>{e(d(!1))};return(0,h.jsxs)(a.Vq,{isOpen:s,onClose:t,onRequestClose:t,children:[(0,h.jsx)("h4",{children:"Add new project"}),(0,h.jsx)("div",{className:"mt-4",children:(0,h.jsx)(W,{})})]})};var K=t(40018);const Q=(0,t(87781).UY)({state:x,data:A});(0,t(69564).fn)("projectList",Q);const _=()=>(0,h.jsxs)(K.W2,{className:"h-full",children:[(0,h.jsx)(f,{}),(0,h.jsx)(Z,{}),(0,h.jsx)(Y,{})]})},20821:(e,s,t)=>{var r=t(26050),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},26050:e=>{var s=/\s/;e.exports=function(e){for(var t=e.length;t--&&s.test(e.charAt(t)););return t}},48573:(e,s,t)=>{var r=t(8092),a=t(50072),l=t(42582),n=Math.max,i=Math.min;e.exports=function(e,s,t){var c,o,d,m,x,u,j=0,p=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(s){var t=c,r=o;return c=o=void 0,j=s,m=e.apply(r,t)}function v(e){return j=e,x=setTimeout(y,s),p?g(e):m}function b(e){var t=e-u;return void 0===u||t>=s||t<0||h&&e-j>=d}function y(){var e=a();if(b(e))return N(e);x=setTimeout(y,function(e){var t=s-(e-u);return h?i(t,d-(e-j)):t}(e))}function N(e){return x=void 0,f&&c?g(e):(c=o=void 0,m)}function w(){var e=a(),t=b(e);if(c=arguments,o=this,u=e,t){if(void 0===x)return v(u);if(h)return clearTimeout(x),x=setTimeout(y,s),g(u)}return void 0===x&&(x=setTimeout(y,s)),m}return s=l(s)||0,r(t)&&(p=!!t.leading,d=(h="maxWait"in t)?n(l(t.maxWait)||0,s):d,f="trailing"in t?!!t.trailing:f),w.cancel=function(){void 0!==x&&clearTimeout(x),j=0,c=u=o=x=void 0},w.flush=function(){return void 0===x?m:N(a())},w}},50072:(e,s,t)=>{var r=t(97009);e.exports=function(){return r.Date.now()}},42582:(e,s,t)=>{var r=t(20821),a=t(8092),l=t(70152),n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,o=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return NaN;if(a(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=a(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var t=i.test(e);return t||c.test(e)?o(e.slice(2),t?2:8):n.test(e)?NaN:+e}}}]);
//# sourceMappingURL=835.256f2780.chunk.js.map