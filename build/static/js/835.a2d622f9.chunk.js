(self.webpackChunknasp=self.webpackChunknasp||[]).push([[835],{60835:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return me}});var r,s=n(72791),a=n(73038),i=n(58617),c=n(96382),l=(0,c.oM)({name:"projectList/state",initialState:{view:"grid",query:{order:"asc",search:""},newProjectDialog:!1},reducers:{toggleView:function(e,t){e.view=t.payload},toggleSort:function(e,t){e.query.order=t.payload},setSearch:function(e,t){e.query.search=t.payload},toggleNewProjectDialog:function(e,t){e.newProjectDialog=t.payload}}}),o=l.actions,u=o.toggleView,d=o.toggleSort,m=o.toggleNewProjectDialog,f=o.setSearch,p=l.reducer,x=n(60364),h=n(48573),j=n.n(h),v=n(80184),g=function(){var e=(0,x.I0)(),t=(0,s.useRef)(),n=(0,x.v9)((function(e){return e.projectList.state.view})),r=(0,x.v9)((function(e){return e.projectList.state.query})).sort,c=j()((function(t){e(f(t))}),500);return(0,v.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,v.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Project List"}),(0,v.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-1",children:[(0,v.jsx)(a.II,{ref:t,size:"sm",placeholder:"Search",prefix:(0,v.jsx)(i.O6C,{className:"text-lg"}),onChange:function(e){c(e.target.value)}}),(0,v.jsx)(a.u,{title:"grid"===n?"List view":"Grid view",children:(0,v.jsx)(a.zx,{className:"hidden md:flex",onClick:function(){e(u("grid"===n?"list":"grid"))},variant:"plain",size:"sm",icon:"grid"===n?(0,v.jsx)(i.O5k,{}):(0,v.jsx)(i.gXc,{})})}),(0,v.jsx)(a.u,{title:"Sort: ".concat("asc"===r?"A-Z":"Z-A"),children:(0,v.jsx)(a.zx,{className:"hidden md:flex",variant:"plain",size:"sm",icon:"asc"===r?(0,v.jsx)(i.KPY,{}):(0,v.jsx)(i.eeW,{}),onClick:function(){e(d("asc"===r?"desc":"asc"))}})}),(0,v.jsx)(a.zx,{size:"sm",variant:"twoTone",icon:(0,v.jsx)(i.HQD,{}),onClick:function(){e(m(!0))},children:"New Project"})]})]})},b=n(81694),y=n.n(b),N=n(49559),w=[{label:"Add Flag",value:"addFlag",icon:(0,v.jsx)(i.QNV,{})},{label:"Move",value:"move",icon:(0,v.jsx)(i.Iz7,{})},{label:"Setting",value:"projectSetting",icon:(0,v.jsx)(i.XlX,{})}],Z=function(){return(0,v.jsx)(a.Lt,{placement:"bottom-end",renderTitle:(0,v.jsx)(N.Z,{}),children:w.map((function(e){return(0,v.jsxs)(a.Lt.Item,{eventKey:e.value,children:[(0,v.jsx)("span",{className:"text-lg",children:e.icon}),(0,v.jsx)("span",{className:"ml-2 rtl:mr-2",children:e.label})]},e.value)}))})},k=n(65264),T=function(e){var t=e.members;return(0,v.jsx)(k.Z,{users:t})},L=n(1413),C=function(e){var t=e.progression,n=(0,s.useMemo)((function(){return t>70?{color:"green-500"}:t<40?{color:"red-500"}:{}}),[t]);return(0,v.jsx)(a.Ex,(0,L.Z)({size:"sm",percent:t},n))},S=n(11087),M=function(e){var t=e.data,n=t.name,r=t.totalTask,s=t.completedTask,c=t.progression,l=t.desc,o=t.member;return(0,v.jsx)(a.Zb,{bodyClass:"h-full",children:(0,v.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,v.jsxs)("div",{className:"flex justify-between",children:[(0,v.jsx)(S.rU,{to:"/app/scrum-board",children:(0,v.jsx)("h6",{children:n})}),(0,v.jsx)(Z,{})]}),(0,v.jsx)("p",{className:"mt-4",children:l}),(0,v.jsxs)("div",{className:"mt-3",children:[(0,v.jsx)(C,{progression:c}),(0,v.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,v.jsx)(T,{members:o}),(0,v.jsx)("div",{className:"flex items-center rounded-full font-semibold text-xs",children:(0,v.jsxs)("div",{className:"flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,v.jsx)(i.$Af,{className:"text-base"}),(0,v.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[s," / ",r]})]})})]})]})]})})},I=function(e){var t=e.data,n=e.cardBorder,r=t.name,s=t.totalTask,c=t.completedTask,l=t.progression,o=t.member,u=t.category;return(0,v.jsx)("div",{className:"mb-4",children:(0,v.jsx)(a.Zb,{bordered:n,children:(0,v.jsxs)("div",{className:"grid gap-x-4 grid-cols-12",children:[(0,v.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("h6",{className:"font-bold",children:(0,v.jsx)(S.rU,{to:"/app/project/scrum-board",children:r})}),(0,v.jsx)("span",{children:u})]})}),(0,v.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 md:flex md:items-center md:justify-end",children:(0,v.jsxs)("div",{className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,v.jsx)(i.$Af,{className:"text-base"}),(0,v.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[c," / ",s]})]})}),(0,v.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-2 lg:col-span-3 md:flex md:items-center",children:(0,v.jsx)(C,{progression:l})}),(0,v.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,v.jsx)(T,{members:o})}),(0,v.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-1 flex md:items-center justify-end",children:(0,v.jsx)(Z,{})})]})})})},q=n(4942),z=n(74165),A=n(15861),E=n(91181);function P(e){return D.apply(this,arguments)}function D(){return(D=(0,A.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.Z.fetchData({url:"/project/list",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return O.apply(this,arguments)}function O(){return(O=(0,A.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.Z.fetchData({url:"/project/list/add",method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return $.apply(this,arguments)}function $(){return($=(0,A.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.Z.fetchData({url:"/project/scrum-board/members",method:"post"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=(0,c.hg)("projectList/getList",function(){var e=(0,A.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=(0,c.hg)("projectList/getMembers",(0,A.Z)((0,z.Z)().mark((function e(){var t,n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,n=t.data.map((function(e){return{value:e.id,label:e.name,img:e.img}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),J=(0,c.hg)("projectList/putProject",function(){var e=(0,A.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=(0,c.oM)({name:"projectList/data",initialState:{loading:!1,projectList:[],allMembers:[]},reducers:{},extraReducers:(r={},(0,q.Z)(r,F.fulfilled,(function(e,t){e.projectList=t.payload,e.loading=!1})),(0,q.Z)(r,F.pending,(function(e){e.loading=!0})),(0,q.Z)(r,R.fulfilled,(function(e,t){e.allMembers=t.payload})),(0,q.Z)(r,J.fulfilled,(function(e,t){e.projectList=t.payload})),r)}).reducer,W=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.data.loading})),n=(0,x.v9)((function(e){return e.projectList.data.projectList})),r=(0,x.v9)((function(e){return e.projectList.state.view})),i=(0,x.v9)((function(e){return e.projectList.state.query})),c=i.sort,l=i.search;return(0,s.useEffect)((function(){e(F({sort:c,search:l}))}),[e,c,l]),(0,v.jsxs)("div",{className:y()("mt-6 h-full flex flex-col",t&&"justify-center"),children:[t&&(0,v.jsx)("div",{className:"flex justify-center",children:(0,v.jsx)(a.$j,{size:40})}),"grid"===r&&n.length>0&&!t&&(0,v.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((function(e){return(0,v.jsx)(M,{data:e},e.id)}))}),"list"===r&&n.length>0&&!t&&n.map((function(e){return(0,v.jsx)(I,{data:e},e.id)}))]})},Y=n(29439),K=n(45987),Q=n(93433),_=function(e){var t=e.onAddNewTask,n=(0,s.useState)(!1),r=(0,Y.Z)(n,2),i=r[0],c=r[1],l=(0,s.useState)([]),o=(0,Y.Z)(l,2),u=o[0],d=o[1],m=(0,s.useRef)(null);(0,s.useEffect)((function(){i&&m.current.focus()}),[i]);var f=(0,s.useMemo)((function(){var e=0,t=u.length;return u.forEach((function(t){t.checked&&(e+=1)})),{completedTask:e,totalTask:t}}),[u]);(0,s.useEffect)((function(){t(f)}),[u]);return(0,v.jsxs)("div",{className:"mb-7",children:[u.length>0&&(0,v.jsx)("div",{className:"flex flex-col mb-5",children:u.map((function(e,t){return(0,v.jsx)(a.XZ,{defaultChecked:e.checked,onChange:function(e){return function(e,t){d((function(n){var r=n.map((function(n,r){return t===r&&(n.checked=e),n}));return(0,Q.Z)(r)}))}(e,t)},children:e.label},t)}))}),i?(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(a.II,{ref:m,placeholder:"Add new task"}),(0,v.jsx)(a.zx,{type:"button",onClick:function(){var e={label:m.current.value,checked:!1};d((function(t){return[].concat((0,Q.Z)(t),[e])})),c(!1)},children:"Add"})]}):(0,v.jsx)(a.zx,{block:!0,className:"border-dashed",onClick:function(){c(!0)},children:"Create new task"})]})},B=n(92506),G=n(74999),H=n(58121),ee=n.n(H),te=n(62797),ne=["children","data"],re=G.c.MultiValueLabel,se=a.PT.useUniqueId,ae=function(e){var t=e.innerProps,n=e.label,r=e.data,s=e.isSelected;return(0,v.jsxs)("div",(0,L.Z)((0,L.Z)({className:"flex items-center justify-between p-2 ".concat(s?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(a.qE,{shape:"circle",size:20,src:r.img}),(0,v.jsx)("span",{className:"ml-2 rtl:mr-2",children:n})]}),s&&(0,v.jsx)(i.dZ6,{className:"text-emerald-500 text-xl"})]}))},ie=function(e){var t=e.children,n=e.data,r=(0,K.Z)(e,ne),s=n.img;return(0,v.jsx)(re,(0,L.Z)((0,L.Z)({},r),{},{children:(0,v.jsxs)("div",{className:"inline-flex items-center",children:[(0,v.jsx)(a.qE,{className:"mr-2 rtl:ml-2",shape:"circle",size:15,src:s}),t]})}))},ce=te.Ry().shape({title:te.Z_().min(3,"Too Short!").required("Title required"),content:te.Z_().required("Title required"),assignees:te.IX().min(1,"Assignee required"),rememberMe:te.Xg()}),le=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.data.allMembers})),n=se("project-"),r=(0,s.useState)({}),i=(0,Y.Z)(r,2),c=i[0],l=i[1];(0,s.useEffect)((function(){e(R())}),[e]);var o=function(e){l(e)};return(0,v.jsx)(B.J9,{initialValues:{title:"",content:"",assignees:[]},validationSchema:ce,onSubmit:function(t,r){r.resetForm;!function(t,r){r(!0);var s=t.title,a=t.content,i=t.assignees,l=c.totalTask,o=c.completedTask,u=ee()(i).map((function(e){return e.name=e.label,e}));e(J({id:n,name:s,desc:a,totalTask:l,completedTask:o,progression:o/l*100||0,member:u})),e(m(!1))}(t,r.setSubmitting)},children:function(e){var n=e.touched,r=e.errors,s=e.values;e.resetForm;return(0,v.jsx)(B.l0,{children:(0,v.jsxs)(a.Yb,{children:[(0,v.jsx)(a.xJ,{label:"Title",invalid:r.title&&n.title,errorMessage:r.title,children:(0,v.jsx)(B.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter title",component:a.II})}),(0,v.jsx)(a.xJ,{label:"Assignees",invalid:r.assignees&&n.assignees,errorMessage:r.assignees,children:(0,v.jsx)(B.gN,{name:"assignees",children:function(e){var n=e.field,r=e.form;return(0,v.jsx)(a.Ph,{isMulti:!0,className:"min-w-[120px]",components:{Option:ae,MultiValueLabel:ie},field:n,form:r,options:t,value:s.assignees,onChange:function(e){r.setFieldValue(n.name,e)}})}})}),(0,v.jsx)(a.xJ,{label:"Content",invalid:r.content&&n.content,errorMessage:r.content,children:(0,v.jsx)(B.gN,{textArea:!0,type:"text",autoComplete:"off",name:"content",placeholder:"Enter content",component:a.II})}),(0,v.jsx)(_,{onAddNewTask:o}),(0,v.jsx)(a.zx,{block:!0,variant:"solid",type:"submit",children:"Submit"})]})})}})},oe=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.state.newProjectDialog})),n=function(){e(m(!1))};return(0,v.jsxs)(a.Vq,{isOpen:t,onClose:n,onRequestClose:n,children:[(0,v.jsx)("h4",{children:"Add new project"}),(0,v.jsx)("div",{className:"mt-4",children:(0,v.jsx)(le,{})})]})},ue=n(40018),de=(0,n(87781).UY)({state:p,data:U});(0,n(69564).fn)("projectList",de);var me=function(){return(0,v.jsxs)(ue.W2,{className:"h-full",children:[(0,v.jsx)(g,{}),(0,v.jsx)(W,{}),(0,v.jsx)(oe,{})]})}},20821:function(e,t,n){var r=n(26050),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},26050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48573:function(e,t,n){var r=n(8092),s=n(50072),a=n(42582),i=Math.max,c=Math.min;e.exports=function(e,t,n){var l,o,u,d,m,f,p=0,x=!1,h=!1,j=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=o;return l=o=void 0,p=t,d=e.apply(r,n)}function g(e){return p=e,m=setTimeout(y,t),x?v(e):d}function b(e){var n=e-f;return void 0===f||n>=t||n<0||h&&e-p>=u}function y(){var e=s();if(b(e))return N(e);m=setTimeout(y,function(e){var n=t-(e-f);return h?c(n,u-(e-p)):n}(e))}function N(e){return m=void 0,j&&l?v(e):(l=o=void 0,d)}function w(){var e=s(),n=b(e);if(l=arguments,o=this,f=e,n){if(void 0===m)return g(f);if(h)return clearTimeout(m),m=setTimeout(y,t),v(f)}return void 0===m&&(m=setTimeout(y,t)),d}return t=a(t)||0,r(n)&&(x=!!n.leading,u=(h="maxWait"in n)?i(a(n.maxWait)||0,t):u,j="trailing"in n?!!n.trailing:j),w.cancel=function(){void 0!==m&&clearTimeout(m),p=0,l=f=o=m=void 0},w.flush=function(){return void 0===m?d:N(s())},w}},50072:function(e,t,n){var r=n(97009);e.exports=function(){return r.Date.now()}},42582:function(e,t,n){var r=n(20821),s=n(8092),a=n(70152),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||l.test(e)?o(e.slice(2),n?2:8):i.test(e)?NaN:+e}}}]);
//# sourceMappingURL=835.a2d622f9.chunk.js.map