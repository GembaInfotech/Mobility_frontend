{"version":3,"file":"static/js/6427.726d1e4f.chunk.js","mappings":"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","sources":["views/company/index.js"],"sourcesContent":["import { AdaptableCard, DataTable } from 'components/shared';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Avatar, toast, Notification } from 'components/ui';\r\nimport useThemeClass from 'utils/hooks/useThemeClass';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport dayjs from 'dayjs';\r\nimport utc from \"dayjs/plugin/utc\";\r\nimport timezone from \"dayjs/plugin/timezone\";\r\nimport { getApi, postApi } from 'services/CommonService';\r\nimport { APIS, LIST_DATA_API_TYPE } from 'constants/api.constant';\r\nimport { HiOutlinePlusCircle } from 'react-icons/hi';\r\nimport ActionColumn from 'components/custom/actionColumn';\r\nimport ConfirmationContent from 'components/custom/ConfirmationContent';\r\nimport { AiFillDelete } from 'react-icons/ai';\r\nimport Header from 'components/custom/header';\r\n\r\nimport {\r\n  TABLE_ACTION_KEYS,\r\n  CONFIRMATION_OBJ,\r\n  DELETE_TOAST,\r\n  UPDATE_TOAST,\r\n  ACTIVE_INACTIVE_STATUS_UPDATE_CONFIRM,\r\n  DATE_TIME_FORMAT,\r\n} from 'constants/app.constant';\r\nimport ActiveInActiveCheckbox from 'components/custom/activeCheckbox';\r\nimport hasPermisson, { ACCESS, MODULE, newColumn } from 'utils/hasPermission';\r\n\r\nconst ACTION_CONSTANT = [\r\n  { label: 'Edit', key: TABLE_ACTION_KEYS.EDIT , show: ()=> hasPermisson(MODULE.SUBUSERS, ACCESS.WRITE)},\r\n  {\r\n    label: <AiFillDelete style={{ fontSize: '1.2rem' }} />,\r\n    key: TABLE_ACTION_KEYS.DELETE,\r\n    toolTip: 'Delete',\r\n    show: ()=> hasPermisson(MODULE.SUBUSERS, ACCESS.DELETE)\r\n  },\r\n];\r\n\r\nconst CONFIRMATION_CONSTANT = {\r\n  header: CONFIRMATION_OBJ.HEADER,\r\n  des: CONFIRMATION_OBJ.DELETE,\r\n  buttonLabel: 'Delete',\r\n};\r\n\r\nconst BUTTON_CONSTANT = hasPermisson(MODULE.COMPANY, ACCESS.WRITE)\r\n  ? [\r\n      {\r\n        label: 'Add Company',\r\n        key: TABLE_ACTION_KEYS.ADD,\r\n        icon: <HiOutlinePlusCircle />,\r\n      },\r\n    ]\r\n  : [];\r\nconst FILTER_CONSTANT = [];\r\n\r\nconst NameColumn = ({ row }) => {\r\n  const { textTheme } = useThemeClass();\r\n  return (\r\n    <div className=\"flex items-center\">\r\n      <Avatar size={28} shape=\"circle\">\r\n        {row?.name?.[0]?.toUpperCase()}\r\n      </Avatar>\r\n\r\n      <Link className={`hover:${textTheme} ml-2 rtl:mr-2 font-semibold`}>{row?.name || '-'}</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Admins = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [tags, setTags] = useState([]);\r\n  const [refresh, setRefresh] = useState(false);\r\n  const [search, setSearch] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [selectedData, setSelectedData] = useState('');\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [activeConfirm, setActiveConfirm] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  dayjs.extend(utc);\r\n  dayjs.extend(timezone);\r\n  ////// GET LIST ADMINS FROM API///////////\r\n\r\n  useEffect(() => {\r\n    getApi(APIS.LIST_DATA, {\r\n      type : LIST_DATA_API_TYPE.COMPANY,\r\n      limit,\r\n      search,\r\n      skip: limit * (page - 1),\r\n    })\r\n      .then((res) => {\r\n        setTags(res?.data?.data);\r\n        setTotalCount(res?.data?.count);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [refresh, search, page, limit]);\r\n\r\n  const onActionHandle = (e, key, row) => {\r\n    if (key === TABLE_ACTION_KEYS.EDIT) {\r\n      navigate(`/app/company/edit/${row?._id}`);\r\n    }\r\n    if (key === TABLE_ACTION_KEYS.DELETE) {\r\n      setSelectedData({\r\n        id: row?._id,\r\n      });\r\n      setOpenModal(true);\r\n    }\r\n  };\r\n  const onModalClose = () => {\r\n    setSelectedData('');\r\n    setOpenModal(false);\r\n  };\r\n\r\n  const onHeaderButtonClick = (e, key) => {\r\n    if (key === TABLE_ACTION_KEYS.ADD) {\r\n      navigate('/app/company/add');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      Header: 'Name',\r\n      accessor: 'name',\r\n      Cell: (props) => {\r\n        const row = props.row.original;\r\n        return <NameColumn row={row} />;\r\n      },\r\n    },\r\n\r\n    {\r\n        Header: 'Company Code',\r\n        accessor: 'companyNo',\r\n        Cell: (props) => {\r\n          const row = props.row.original;\r\n          return (\r\n            <div className=\"flex items-center\">{(row?.companyNo)}</div>\r\n          );\r\n        },\r\n    },\r\n\r\n    {\r\n      Header: 'Date added',\r\n      accessor: 'createdAt',\r\n      Cell: (props) => {\r\n        const row = props.row.original;\r\n        return (\r\n          <div className=\"flex items-center\">{dayjs.utc(row?.createdAt).tz(\"America/New_York\").format(DATE_TIME_FORMAT)}</div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      Header: 'Active',\r\n      Cell: (props) => {\r\n        return (\r\n          <ActiveInActiveCheckbox\r\n            dataObj={props}\r\n            setSelectedData={setSelectedData}\r\n            setActiveConfirm={setActiveConfirm}\r\n            setOpenModal={setOpenModal}\r\n          />\r\n        );\r\n      },\r\n    },\r\n    {\r\n      Header: 'Actions',\r\n      id: 'action',\r\n      accessor: (row) => row,\r\n      Cell: (props) => (\r\n        <ActionColumn\r\n          row={props.row.original}\r\n          onActionHandle={onActionHandle}\r\n          actionsMenu={ACTION_CONSTANT}\r\n        />\r\n      ),\r\n    }\r\n  ];\r\n\r\n  const onConfirmClick = () => {\r\n    let toastMessage;\r\n    const payload = {\r\n      type: LIST_DATA_API_TYPE.ADMINS,\r\n      id: selectedData?.id,\r\n    }\r\n    if (activeConfirm) {\r\n      toastMessage = UPDATE_TOAST;\r\n      payload.status = +selectedData?.action;\r\n    \r\n    } else {\r\n      toastMessage = DELETE_TOAST;\r\n      payload.status = 0\r\n    }\r\n\r\n    postApi(APIS.BLOCK_DELETE_DATA, payload).then((res) => {\r\n      toast.push(<Notification type=\"success\">{toastMessage}</Notification>);\r\n      setRefresh((s) => !s);\r\n      onModalClose();\r\n    });\r\n  };\r\n\r\n  const DEL_CONFIRM = {\r\n    header: CONFIRMATION_OBJ.HEADER,\r\n    des: CONFIRMATION_OBJ.DELETE,\r\n    warning: CONFIRMATION_OBJ.WARNING,\r\n    buttonLabel: \"Delete\",\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header\r\n        buttonMenu={BUTTON_CONSTANT}\r\n        FilterMenu={FILTER_CONSTANT}\r\n        setSearch={setSearch}\r\n        buttonClick={onHeaderButtonClick}\r\n      />\r\n      <AdaptableCard className=\"h-full\" bodyClass=\"h-full\">\r\n        <DataTable\r\n          isCursor={false}\r\n          columns={newColumn(columns, MODULE.SUBUSERS, 1)}\r\n          data={tags}\r\n          loading={loading}\r\n          skeletonAvatarColumns={[0]}\r\n          skeletonAvatarProps={{ width: 28, height: 28 }}\r\n          pagingData={{ pageIndex: page, pageSize: limit, total: totalCount }}\r\n          onPaginationChange={(page) => setPage(page)}\r\n          onSelectChange={(limit) => setLimit(limit)}\r\n        />\r\n      </AdaptableCard>\r\n      <ConfirmationContent\r\n        isOpen={openModal}\r\n        onConfirmClick={onConfirmClick}\r\n        header={CONFIRMATION_CONSTANT.header}\r\n        des={activeConfirm ? ACTIVE_INACTIVE_STATUS_UPDATE_CONFIRM?.des : DEL_CONFIRM.des}\r\n        onDialogClose={onModalClose}\r\n        isWarning={!activeConfirm && DEL_CONFIRM.warning}\r\n        buttonLabel={\r\n          activeConfirm\r\n            ? ACTIVE_INACTIVE_STATUS_UPDATE_CONFIRM?.buttonLabel\r\n            : DEL_CONFIRM.buttonLabel\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Admins;\r\n"],"names":["ACTION_CONSTANT","label","key","TABLE_ACTION_KEYS","show","hasPermisson","MODULE","ACCESS","style","fontSize","toolTip","CONFIRMATION_CONSTANT","header","CONFIRMATION_OBJ","des","buttonLabel","BUTTON_CONSTANT","icon","FILTER_CONSTANT","NameColumn","row","textTheme","useThemeClass","className","size","shape","name","toUpperCase","useState","loading","setLoading","tags","setTags","refresh","setRefresh","search","setSearch","page","setPage","totalCount","setTotalCount","limit","setLimit","selectedData","setSelectedData","openModal","setOpenModal","activeConfirm","setActiveConfirm","navigate","useNavigate","dayjs","utc","timezone","useEffect","getApi","APIS","type","LIST_DATA_API_TYPE","skip","then","res","data","count","finally","onActionHandle","e","_id","id","onModalClose","columns","Header","accessor","Cell","props","original","companyNo","createdAt","tz","format","DATE_TIME_FORMAT","dataObj","actionsMenu","DEL_CONFIRM","warning","buttonMenu","FilterMenu","buttonClick","bodyClass","isCursor","newColumn","skeletonAvatarColumns","skeletonAvatarProps","width","height","pagingData","pageIndex","pageSize","total","onPaginationChange","onSelectChange","isOpen","onConfirmClick","toastMessage","payload","UPDATE_TOAST","status","action","DELETE_TOAST","postApi","toast","s","ACTIVE_INACTIVE_STATUS_UPDATE_CONFIRM","onDialogClose","isWarning"],"sourceRoot":""}