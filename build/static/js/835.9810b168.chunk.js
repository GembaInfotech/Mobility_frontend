"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[835],{60835:function(e,t,n){n.r(t),n.d(t,{default:function(){return me}});var s,r=n(72791),a=n(16146),c=n(58617),i=n(96382),l=(0,i.oM)({name:"projectList/state",initialState:{view:"grid",query:{order:"asc",search:""},newProjectDialog:!1},reducers:{toggleView:function(e,t){e.view=t.payload},toggleSort:function(e,t){e.query.order=t.payload},setSearch:function(e,t){e.query.search=t.payload},toggleNewProjectDialog:function(e,t){e.newProjectDialog=t.payload}}}),o=l.actions,d=o.toggleView,u=o.toggleSort,m=o.toggleNewProjectDialog,f=o.setSearch,p=l.reducer,x=n(60364),j=n(48573),h=n.n(j),g=n(80184),v=function(){var e=(0,x.I0)(),t=(0,r.useRef)(),n=(0,x.v9)((function(e){return e.projectList.state.view})),s=(0,x.v9)((function(e){return e.projectList.state.query})).sort,i=h()((function(t){e(f(t))}),500);return(0,g.jsxs)("div",{className:"lg:flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"mb-4 lg:mb-0",children:"Project List"}),(0,g.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-1",children:[(0,g.jsx)(a.II,{ref:t,size:"sm",placeholder:"Search",prefix:(0,g.jsx)(c.O6C,{className:"text-lg"}),onChange:function(e){i(e.target.value)}}),(0,g.jsx)(a.u,{title:"grid"===n?"List view":"Grid view",children:(0,g.jsx)(a.zx,{className:"hidden md:flex",onClick:function(){e(d("grid"===n?"list":"grid"))},variant:"plain",size:"sm",icon:"grid"===n?(0,g.jsx)(c.O5k,{}):(0,g.jsx)(c.gXc,{})})}),(0,g.jsx)(a.u,{title:"Sort: ".concat("asc"===s?"A-Z":"Z-A"),children:(0,g.jsx)(a.zx,{className:"hidden md:flex",variant:"plain",size:"sm",icon:"asc"===s?(0,g.jsx)(c.KPY,{}):(0,g.jsx)(c.eeW,{}),onClick:function(){e(u("asc"===s?"desc":"asc"))}})}),(0,g.jsx)(a.zx,{size:"sm",variant:"twoTone",icon:(0,g.jsx)(c.HQD,{}),onClick:function(){e(m(!0))},children:"New Project"})]})]})},b=n(81694),y=n.n(b),N=n(49559),Z=[{label:"Add Flag",value:"addFlag",icon:(0,g.jsx)(c.QNV,{})},{label:"Move",value:"move",icon:(0,g.jsx)(c.Iz7,{})},{label:"Setting",value:"projectSetting",icon:(0,g.jsx)(c.XlX,{})}],w=function(){return(0,g.jsx)(a.Lt,{placement:"bottom-end",renderTitle:(0,g.jsx)(N.Z,{}),children:Z.map((function(e){return(0,g.jsxs)(a.Lt.Item,{eventKey:e.value,children:[(0,g.jsx)("span",{className:"text-lg",children:e.icon}),(0,g.jsx)("span",{className:"ml-2 rtl:mr-2",children:e.label})]},e.value)}))})},k=n(65264),L=function(e){var t=e.members;return(0,g.jsx)(k.Z,{users:t})},C=n(1413),S=function(e){var t=e.progression,n=(0,r.useMemo)((function(){return t>70?{color:"green-500"}:t<40?{color:"red-500"}:{}}),[t]);return(0,g.jsx)(a.Ex,(0,C.Z)({size:"sm",percent:t},n))},T=n(11087),I=function(e){var t=e.data,n=t.name,s=t.totalTask,r=t.completedTask,i=t.progression,l=t.desc,o=t.member;return(0,g.jsx)(a.Zb,{bodyClass:"h-full",children:(0,g.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)(T.rU,{to:"/app/scrum-board",children:(0,g.jsx)("h6",{children:n})}),(0,g.jsx)(w,{})]}),(0,g.jsx)("p",{className:"mt-4",children:l}),(0,g.jsxs)("div",{className:"mt-3",children:[(0,g.jsx)(S,{progression:i}),(0,g.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,g.jsx)(L,{members:o}),(0,g.jsx)("div",{className:"flex items-center rounded-full font-semibold text-xs",children:(0,g.jsxs)("div",{className:"flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,g.jsx)(c.$Af,{className:"text-base"}),(0,g.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[r," / ",s]})]})})]})]})]})})},M=function(e){var t=e.data,n=e.cardBorder,s=t.name,r=t.totalTask,i=t.completedTask,l=t.progression,o=t.member,d=t.category;return(0,g.jsx)("div",{className:"mb-4",children:(0,g.jsx)(a.Zb,{bordered:n,children:(0,g.jsxs)("div",{className:"grid gap-x-4 grid-cols-12",children:[(0,g.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("h6",{className:"font-bold",children:(0,g.jsx)(T.rU,{to:"/app/project/scrum-board",children:s})}),(0,g.jsx)("span",{children:d})]})}),(0,g.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-2 md:col-span-2 lg:col-span-2 md:flex md:items-center md:justify-end",children:(0,g.jsxs)("div",{className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[(0,g.jsx)(c.$Af,{className:"text-base"}),(0,g.jsxs)("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:[i," / ",r]})]})}),(0,g.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-2 lg:col-span-3 md:flex md:items-center",children:(0,g.jsx)(S,{progression:l})}),(0,g.jsx)("div",{className:"my-1 sm:my-0 col-span-12 md:col-span-3 lg:col-span-3 md:flex md:items-center",children:(0,g.jsx)(L,{members:o})}),(0,g.jsx)("div",{className:"my-1 sm:my-0 col-span-12 sm:col-span-1 flex md:items-center justify-end",children:(0,g.jsx)(w,{})})]})})})},q=n(4942),z=n(74165),A=n(15861),P=n(91181);function E(e){return D.apply(this,arguments)}function D(){return(D=(0,A.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.Z.fetchData({url:"/project/list",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=(0,A.Z)((0,z.Z)().mark((function e(t){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.Z.fetchData({url:"/project/list/add",method:"put",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return R.apply(this,arguments)}function R(){return(R=(0,A.Z)((0,z.Z)().mark((function e(){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.Z.fetchData({url:"/project/scrum-board/members",method:"post"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=(0,i.hg)("projectList/getList",function(){var e=(0,A.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=(0,i.hg)("projectList/getMembers",(0,A.Z)((0,z.Z)().mark((function e(){var t,n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return t=e.sent,n=t.data.map((function(e){return{value:e.id,label:e.name,img:e.img}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),U=(0,i.hg)("projectList/putProject",function(){var e=(0,A.Z)((0,z.Z)().mark((function e(t){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=(0,i.oM)({name:"projectList/data",initialState:{loading:!1,projectList:[],allMembers:[]},reducers:{},extraReducers:(s={},(0,q.Z)(s,J.fulfilled,(function(e,t){e.projectList=t.payload,e.loading=!1})),(0,q.Z)(s,J.pending,(function(e){e.loading=!0})),(0,q.Z)(s,O.fulfilled,(function(e,t){e.allMembers=t.payload})),(0,q.Z)(s,U.fulfilled,(function(e,t){e.projectList=t.payload})),s)}).reducer,$=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.data.loading})),n=(0,x.v9)((function(e){return e.projectList.data.projectList})),s=(0,x.v9)((function(e){return e.projectList.state.view})),c=(0,x.v9)((function(e){return e.projectList.state.query})),i=c.sort,l=c.search;return(0,r.useEffect)((function(){e(J({sort:i,search:l}))}),[e,i,l]),(0,g.jsxs)("div",{className:y()("mt-6 h-full flex flex-col",t&&"justify-center"),children:[t&&(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(a.$j,{size:40})}),"grid"===s&&n.length>0&&!t&&(0,g.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((function(e){return(0,g.jsx)(I,{data:e},e.id)}))}),"list"===s&&n.length>0&&!t&&n.map((function(e){return(0,g.jsx)(M,{data:e},e.id)}))]})},K=n(29439),Q=n(45987),W=n(93433),_=function(e){var t=e.onAddNewTask,n=(0,r.useState)(!1),s=(0,K.Z)(n,2),c=s[0],i=s[1],l=(0,r.useState)([]),o=(0,K.Z)(l,2),d=o[0],u=o[1],m=(0,r.useRef)(null);(0,r.useEffect)((function(){c&&m.current.focus()}),[c]);var f=(0,r.useMemo)((function(){var e=0,t=d.length;return d.forEach((function(t){t.checked&&(e+=1)})),{completedTask:e,totalTask:t}}),[d]);(0,r.useEffect)((function(){t(f)}),[d]);return(0,g.jsxs)("div",{className:"mb-7",children:[d.length>0&&(0,g.jsx)("div",{className:"flex flex-col mb-5",children:d.map((function(e,t){return(0,g.jsx)(a.XZ,{defaultChecked:e.checked,onChange:function(e){return function(e,t){u((function(n){var s=n.map((function(n,s){return t===s&&(n.checked=e),n}));return(0,W.Z)(s)}))}(e,t)},children:e.label},t)}))}),c?(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(a.II,{ref:m,placeholder:"Add new task"}),(0,g.jsx)(a.zx,{type:"button",onClick:function(){var e={label:m.current.value,checked:!1};u((function(t){return[].concat((0,W.Z)(t),[e])})),i(!1)},children:"Add"})]}):(0,g.jsx)(a.zx,{block:!0,className:"border-dashed",onClick:function(){i(!0)},children:"Create new task"})]})},B=n(92506),G=n(74999),H=n(58121),ee=n.n(H),te=n(62797),ne=["children","data"],se=G.c.MultiValueLabel,re=a.PT.useUniqueId,ae=function(e){var t=e.innerProps,n=e.label,s=e.data,r=e.isSelected;return(0,g.jsxs)("div",(0,C.Z)((0,C.Z)({className:"flex items-center justify-between p-2 ".concat(r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600")},t),{},{children:[(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(a.qE,{shape:"circle",size:20,src:s.img}),(0,g.jsx)("span",{className:"ml-2 rtl:mr-2",children:n})]}),r&&(0,g.jsx)(c.dZ6,{className:"text-emerald-500 text-xl"})]}))},ce=function(e){var t=e.children,n=e.data,s=(0,Q.Z)(e,ne),r=n.img;return(0,g.jsx)(se,(0,C.Z)((0,C.Z)({},s),{},{children:(0,g.jsxs)("div",{className:"inline-flex items-center",children:[(0,g.jsx)(a.qE,{className:"mr-2 rtl:ml-2",shape:"circle",size:15,src:r}),t]})}))},ie=te.Ry().shape({title:te.Z_().min(3,"Too Short!").required("Title required"),content:te.Z_().required("Title required"),assignees:te.IX().min(1,"Assignee required"),rememberMe:te.Xg()}),le=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.data.allMembers})),n=re("project-"),s=(0,r.useState)({}),c=(0,K.Z)(s,2),i=c[0],l=c[1];(0,r.useEffect)((function(){e(O())}),[e]);var o=function(e){l(e)};return(0,g.jsx)(B.J9,{initialValues:{title:"",content:"",assignees:[]},validationSchema:ie,onSubmit:function(t,s){s.resetForm;!function(t,s){s(!0);var r=t.title,a=t.content,c=t.assignees,l=i.totalTask,o=i.completedTask,d=ee()(c).map((function(e){return e.name=e.label,e}));e(U({id:n,name:r,desc:a,totalTask:l,completedTask:o,progression:o/l*100||0,member:d})),e(m(!1))}(t,s.setSubmitting)},children:function(e){var n=e.touched,s=e.errors,r=e.values;e.resetForm;return(0,g.jsx)(B.l0,{children:(0,g.jsxs)(a.Yb,{children:[(0,g.jsx)(a.xJ,{label:"Title",invalid:s.title&&n.title,errorMessage:s.title,children:(0,g.jsx)(B.gN,{type:"text",autoComplete:"off",name:"title",placeholder:"Enter title",component:a.II})}),(0,g.jsx)(a.xJ,{label:"Assignees",invalid:s.assignees&&n.assignees,errorMessage:s.assignees,children:(0,g.jsx)(B.gN,{name:"assignees",children:function(e){var n=e.field,s=e.form;return(0,g.jsx)(a.Ph,{isMulti:!0,className:"min-w-[120px]",components:{Option:ae,MultiValueLabel:ce},field:n,form:s,options:t,value:r.assignees,onChange:function(e){s.setFieldValue(n.name,e)}})}})}),(0,g.jsx)(a.xJ,{label:"Content",invalid:s.content&&n.content,errorMessage:s.content,children:(0,g.jsx)(B.gN,{textArea:!0,type:"text",autoComplete:"off",name:"content",placeholder:"Enter content",component:a.II})}),(0,g.jsx)(_,{onAddNewTask:o}),(0,g.jsx)(a.zx,{block:!0,variant:"solid",type:"submit",children:"Submit"})]})})}})},oe=function(){var e=(0,x.I0)(),t=(0,x.v9)((function(e){return e.projectList.state.newProjectDialog})),n=function(){e(m(!1))};return(0,g.jsxs)(a.Vq,{isOpen:t,onClose:n,onRequestClose:n,children:[(0,g.jsx)("h4",{children:"Add new project"}),(0,g.jsx)("div",{className:"mt-4",children:(0,g.jsx)(le,{})})]})},de=n(40018),ue=(0,n(87781).UY)({state:p,data:Y});(0,n(69564).fn)("projectList",ue);var me=function(){return(0,g.jsxs)(de.W2,{className:"h-full",children:[(0,g.jsx)(v,{}),(0,g.jsx)($,{}),(0,g.jsx)(oe,{})]})}}}]);
//# sourceMappingURL=835.9810b168.chunk.js.map