"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[6505],{25764:(e,l,t)=>{t.d(l,{Z:()=>o});t(72791);var a=t(73038),n=t(80184);const o=e=>{let{header:l,des:t,onDialogClose:o,isWarning:i,onConfirmClick:s,isOpen:d,buttonLabel:c}=e;return(0,n.jsx)(a.Vq,{isOpen:d,onClose:o,onRequestClose:o,contentClassName:"pb-0 px-0 mt-36 min-w-36",children:(0,n.jsxs)("div",{className:"px-5 pb-5",children:[(0,n.jsx)("h5",{className:"mb-4",children:l}),(0,n.jsx)("p",{children:t}),i&&(0,n.jsx)("p",{className:"text-red-700",children:i}),(0,n.jsxs)("div",{className:"text-right mt-6",children:[(0,n.jsx)(a.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:o,children:"Cancel"}),(0,n.jsx)(a.zx,{variant:"solid",onClick:s,children:c})]})]})})}},52452:(e,l,t)=>{t.d(l,{Z:()=>i});var a=t(23532),n=t(73038),o=t(80184);const i=e=>{let{row:l,onActionHandle:t,actionsMenu:i}=e;const{textTheme:s}=(0,a.Z)();return(0,o.jsx)("div",{className:"flex items-center justify-between",children:null===i||void 0===i?void 0:i.map(((e,a)=>{var i,d;if(null===(i=null===e||void 0===e||null===(d=e.show)||void 0===d?void 0:d.call(e))||void 0===i||i)return(0,o.jsx)(n.u,{title:null===e||void 0===e?void 0:e.toolTip,visible:!(null===e||void 0===e||!e.toolTip),children:null!==e&&void 0!==e&&e.isImage?(0,o.jsx)("img",{src:e.label,alt:"view Icon",style:{maxWidth:"20px"},className:"cursor-pointer mx-0.5",onClick:a=>t(a,e.key,l)}):(0,o.jsx)("span",{className:`${s} cursor-pointer select-none font-semibold ml-2 `,onClick:a=>t(a,e.key,l),children:e.label})})}))})}},31673:(e,l,t)=>{t.d(l,{Z:()=>i});t(72791);var a=t(52639),n=t(73038),o=t(80184);const i=e=>{var l,t;let{dataObj:i,setSelectedData:s,setActiveConfirm:d,setOpenModal:c}=e;const r=null===i||void 0===i||null===(l=i.row)||void 0===l||null===(t=l.original)||void 0===t?void 0:t._id,u=a.uN.find(((e,l)=>{var t,a;return e.identifier===(null===i||void 0===i||null===(t=i.row)||void 0===t||null===(a=t.original)||void 0===a?void 0:a.status)}));return(0,o.jsx)(n.XZ,{checked:null===u||void 0===u?void 0:u.value,onChange:e=>((e,l,t)=>{let a="";1===l&&(a=2),2===l&&(a=1),s({id:t,action:a}),d(!0),c(!0)})(0,null===u||void 0===u?void 0:u.identifier,r)})}},93156:(e,l,t)=>{t.d(l,{Z:()=>p});var a=t(72791),n=t(73038),o=t(10515),i=t(76053),s=t(9494),d=t(11723),c=t(763),r=t(80034),u=t(52639),v=t(80184);const h=e=>{let{buttonMenu:l,buttonClick:t}=e;return(0,v.jsx)("div",{className:"mb-4",children:null===l||void 0===l?void 0:l.map(((e,l,a)=>(0,v.jsx)(n.zx,{size:"sm",variant:"solid",onClick:l=>t(l,e.key),style:{marginLeft:"5px"},icon:e.icon,children:e.label})))})},m=e=>{let{setSearch:l,FilterMenu:t,setFilterValue:h,filterValue:m,asyncApiType:p,searchPlaceholder:x}=e;const y=(0,c.debounce)(((e,l)=>{(0,s.ac)(1===p?d.vh.GET_USERS:d.vh.GET_CATEGORIES,{search:e}).then((e=>{var t;l(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)}))}),300);return(0,v.jsxs)("div",{className:"md:flex gap-4 w-full",children:[(0,v.jsx)(o.Z,{placeholder:x,onChange:e=>l(e)}),null===t||void 0===t?void 0:t.map(((e,t)=>(0,v.jsxs)(a.Fragment,{children:["select"===e.component&&(0,v.jsx)(n.Ph,{autoComplete:"off",size:"sm",className:e.className,placeholder:e.placeholder,options:e.options,value:m[null===e||void 0===e?void 0:e.filterKey],onChange:l=>{h({...m,[null===e||void 0===e?void 0:e.filterKey]:l})}}),"resetButton"===e.component&&(0,v.jsx)(n.zx,{size:"sm",className:e.className,onClick:()=>{h(null===e||void 0===e?void 0:e.filterKey),l("")},icon:(0,v.jsx)(i.pYJ,{}),children:e.label}),"asyncSelect"===e.component&&(0,v.jsx)(n.Ph,{autoComplete:"off",placeholder:e.placeholder,defaultOptions:!0,cacheOptions:!0,size:"sm",className:e.className,value:null===m||void 0===m?void 0:m[null===e||void 0===e?void 0:e.filterKey],loadOptions:y,componentAs:r.Z,getOptionLabel:l=>`${null===l||void 0===l?void 0:l[e.label]} ${null!==e&&void 0!==e&&e.label1?null===l||void 0===l?void 0:l[e.label1]:""}`,getOptionValue:e=>null===e||void 0===e?void 0:e.id,onChange:l=>{h({...m,[null===e||void 0===e?void 0:e.filterKey]:l})}}),"datePicker"===e.component&&(0,v.jsx)(n.Mt,{inputtable:!0,clearable:!0,selected:m[null===e||void 0===e?void 0:e.filterKey],onChange:l=>{h({...m,[null===e||void 0===e?void 0:e.filterKey]:l})},size:"sm",placeholder:"Patient DOB (MM/DD/YYYY)",name:"patientDob",className:e.className,placeholderText:e.placeholder,dateFormat:u.zT}),"input"===e.component&&(0,v.jsx)(n.II,{size:"sm",className:e.className,placeholder:e.placeholder,value:m[null===e||void 0===e?void 0:e.filterKey],onChange:l=>{h({...m,[null===e||void 0===e?void 0:e.filterKey]:l.target.value})}})]},t)))]})},p=e=>{let{buttonMenu:l,FilterMenu:t,setSearch:a,buttonClick:n,setFilterValue:o,filterValue:i,asyncApiType:s,searchPlaceholder:d}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"md:flex items-center justify-end",children:(0,v.jsx)(h,{buttonMenu:l,buttonClick:n})}),(0,v.jsx)("div",{className:"items-center lg:flex",children:(0,v.jsx)(m,{searchPlaceholder:d,setSearch:a,FilterMenu:t,setFilterValue:o,filterValue:i,asyncApiType:s})})]})}},10515:(e,l,t)=>{t.d(l,{Z:()=>d});t(72791);var a=t(73038),n=t(58617),o=t(48573),i=t.n(o),s=t(80184);const d=e=>{let{onChange:l,placeholder:t}=e;const o=i()((function(e){null===l||void 0===l||l(e)}),500);return(0,s.jsx)(a.II,{className:"max-w-md md:w-96 mb-4",size:"sm",placeholder:t?`${t}`:"Filter by NAL, LCode, Referring Physician",prefix:(0,s.jsx)(n.O6C,{className:"text-lg"}),onChange:e=>{o(e.target.value)}})}},9494:(e,l,t)=>{t.d(l,{EY:()=>s,Fv:()=>i,ac:()=>o});var a=t(91181),n=t(14712);function o(e,l){return n.Z.get(e,{params:l}).then((e=>null===e||void 0===e?void 0:e.data))}function i(e,l){return n.Z.post(e,l).then((e=>null===e||void 0===e?void 0:e.data))}async function s(e){return a.Z.fetchData({url:"/search/query",method:"post",data:e})}},66505:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});var a=t(72791),n=t(9494),o=t(11723),i=t(40018),s=t(73038),d=t(58617),c=t(88580),r=t(92506),u=t(81724),v=t(78820),h=t(80184);const m=e=>{let{editData:l,onCancel:t,onSave:a,isLoading:n}=e;return(0,h.jsxs)("div",{className:"w-full text-right",children:[(0,h.jsx)(s.zx,{className:"mr-2",onClick:t,disabled:n,icon:(0,h.jsx)(v.SV5,{}),children:"Cancel"}),(0,h.jsx)(s.zx,{variant:"solid",type:"submit",onClick:a,disabled:n,icon:(0,h.jsx)(v.JMf,{}),children:null!==l&&void 0!==l&&l.id?"Update":"Save"})]})},p=u.Ry().shape({location:u.Z_().required("Required"),lcode:u.Z_().required("Required"),quantity:u.Rx().required("Required").min(0,"Quantity cannot be negative")}),x={location:"",lcode:"",quantity:0},y=e=>{let{editData:l,show:t,onClose:d,refreshPage:u}=e;const v=(0,a.useRef)(),[y,j]=(0,a.useState)(!1),[f,C]=(0,a.useState)([]),[b,g]=(0,a.useState)([]);(0,a.useEffect)((()=>{t&&((0,n.ac)(o.vh.LIST_DATA,{type:o.kD.LOCATIONS}).then((e=>{if(e&&e.data&&e.data.data){const l=e.data.data.map((e=>({label:e.name,value:e._id})));C(l)}else s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"No locations found!"}))})).catch((e=>{console.error("Error fetching locations: ",e),s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"Failed to load locations"}))})),(0,n.ac)(o.vh.LIST_DATA,{type:o.kD.CODES}).then((e=>{if(e&&e.data&&e.data.data){console.log(e);const l=Array.isArray(e.data.data)?e.data.data.filter((e=>1===e.type)).map((e=>({label:e.code,value:e._id}))):[];g(l)}else s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"No lcodes found!"}))})).catch((e=>{console.error("Error fetching lcodes: ",e),s.Am.push((0,h.jsx)(s.P_,{type:"error",children:"Failed to load lcodes"}))})))}),[t]);return(0,h.jsx)(s.dy,{isOpen:t,onClose:d,onRequestClose:d,closable:!1,bodyClass:"p-0",title:null!==l&&void 0!==l&&l.id?"Edit Location":"Add Location",footer:(0,h.jsx)(m,{onCancel:d,onSave:()=>{var e;return null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.submitForm()},isLoading:y,editData:l}),children:(0,h.jsx)(i.lG,{children:(0,h.jsx)(r.J9,{innerRef:v,initialValues:l||x,validationSchema:p,onSubmit:e=>{let{name:l,address:t,storeManager:a,location:i,lcode:c,quantity:r,id:v}=e;j(!0);const m={location:i,lcode:c,quantity:r,modelType:o.kD.INVENTORY};v&&(m.id=v),(0,n.Fv)(o.vh.ADD_EDIT_DATA,m).then((()=>{d(),u(),s.Am.push((0,h.jsx)(s.P_,{type:"success",children:"Inventory saved!"}))})).finally((()=>j(!1)))},enableReinitialize:!0,children:e=>{let{errors:l,touched:t,setFieldValue:a,values:n}=e;return(0,h.jsx)(r.l0,{className:"p-5",children:(0,h.jsxs)(s.Yb,{children:[(0,h.jsx)(s.xJ,{label:"Location",invalid:(null===l||void 0===l?void 0:l.location)&&(null===t||void 0===t?void 0:t.location),errorMessage:null===l||void 0===l?void 0:l.location,children:(0,h.jsx)(r.gN,{placeholder:"Select Location",options:f,name:"location",component:c.Z,value:f.find((e=>e.value===n.location)),onChange:e=>a("location",e.value)})}),(0,h.jsx)(s.xJ,{label:"Lcode",invalid:(null===l||void 0===l?void 0:l.lcode)&&(null===t||void 0===t?void 0:t.lcode),errorMessage:null===l||void 0===l?void 0:l.lcode,children:(0,h.jsx)(r.gN,{placeholder:"Select Lcode",options:b,component:c.Z,name:"lcode",value:b.find((e=>e.value===n.lcode)),onChange:e=>a("lcode",e.value)})}),(0,h.jsx)(s.xJ,{label:"Quantity",invalid:(null===l||void 0===l?void 0:l.quantity)&&(null===t||void 0===t?void 0:t.quantity),errorMessage:null===l||void 0===l?void 0:l.quantity,children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(s.zx,{type:"button",onClick:()=>a("quantity",Math.max(0,n.quantity-1)),className:"mr-2",children:"-"}),(0,h.jsx)(r.gN,{type:"number",name:"quantity",min:"0",component:s.II,className:"text-center"}),(0,h.jsx)(s.zx,{type:"button",onClick:()=>a("quantity",n.quantity+1),className:"ml-2",children:"+"})]})})]})})}})})})};var j=t(52452),f=t(93156),C=t(25764),b=t(52639),g=t(31673),N=t(47511),A=t(57689);const D=[{label:"Edit",key:b.A6.EDIT,show:()=>(0,N.ZP)(N.Fm.LOCATIONS,N.qz.WRITE)},{label:(0,h.jsx)(v.YK6,{style:{fontSize:"1.2rem"}}),key:b.A6.DELETE,toolTip:"Delete",show:()=>(0,N.ZP)(N.Fm.LOCATIONS,N.qz.DELETE)},{label:"View",key:b.A6.VIEW,show:()=>(0,N.ZP)(N.Fm.LOCATIONS,N.qz.WRITE)}],S=(0,N.ZP)(N.Fm.LOCATIONS,N.qz.WRITE)?[{label:"Add Inventory",key:b.A6.ADD,icon:(0,h.jsx)(d.HQD,{})}]:[],E={header:b.BI.HEADER,des:b.BI.DELETE,buttonLabel:"Delete"},T=()=>{const[e,l]=(0,a.useState)([]),[t,d]=(0,a.useState)(!1),[c,r]=(0,a.useState)(1),[u,v]=(0,a.useState)(0),[m,p]=(0,a.useState)(10),[x,T]=(0,a.useState)(""),[k,I]=(0,a.useState)(!1),[L,O]=(0,a.useState)(!1),[q,F]=(0,a.useState)(""),[Z,_]=(0,a.useState)(!1),[w,z]=(0,a.useState)(!1),P=(0,A.s0)();(0,a.useEffect)((()=>{d(!0),(0,n.ac)(o.vh.LIST_DATA,{type:o.kD.INVENTORY,limit:m,search:x,skip:m*(c-1)}).then((e=>{var t,a;l([]),l(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data),v(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.count)})).finally((()=>d(!1)))}),[x,c,m,L]);const R=(e,l,t)=>{l===b.A6.EDIT&&(F({id:null===t||void 0===t?void 0:t._id,location:null===t||void 0===t?void 0:t.location,lcode:null===t||void 0===t?void 0:t.lcode,quantity:null===t||void 0===t?void 0:t.quantity}),I(!0)),l===b.A6.DELETE&&(F({id:null===t||void 0===t?void 0:t._id}),_(!0)),l===b.A6.VIEW&&P(`/app/inventory/inventoryDetail/${null===t||void 0===t?void 0:t._id}`)},M=[{Header:"Location",accessor:"location"},{Header:"LCode",accessor:"lcode"},{Header:"Quantity",accessor:"quantity"},{Header:"Active",Cell:e=>(0,h.jsx)(g.Z,{dataObj:e,setSelectedData:F,setActiveConfirm:z,setOpenModal:_})},{Header:"Actions",id:"action",accessor:e=>e,Cell:e=>(0,h.jsx)(j.Z,{row:e.row.original,onActionHandle:R,actionsMenu:D})}],V=()=>{F(""),_(!1),z(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.Z,{buttonMenu:S,setSearch:T,buttonClick:(e,l)=>{l===b.A6.ADD&&I(!0)}}),(0,h.jsx)(i.lG,{className:"h-full",bodyClass:"h-full",children:(0,h.jsx)(i.wQ,{columns:(0,N._P)(M,N.Fm.LOCATIONS,1),isCursor:!1,data:e,loading:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:c,pageSize:m,total:u},onPaginationChange:e=>r(e),onSelectChange:e=>p(e)})}),(0,h.jsx)(y,{show:k,onClose:()=>{F(""),I(!1)},refreshPage:()=>O((e=>!e)),editData:q}),(0,h.jsx)(C.Z,{isOpen:Z,onConfirmClick:()=>{let e;const l={type:o.kD.INVENTORY,id:null===q||void 0===q?void 0:q.id};w?(e=b.D5,l.status=+(null===q||void 0===q?void 0:q.action)):(e=b.O7,l.status=0),(0,n.Fv)(o.vh.BLOCK_DELETE_DATA,l).then((l=>{s.Am.push((0,h.jsx)(s.P_,{type:"success",children:e})),O((e=>!e)),V()}))},header:E.header,des:w?null===b.uF||void 0===b.uF?void 0:b.uF.des:E.des,onDialogClose:V,isWarning:!w&&b.BI.WARNING,buttonLabel:w?null===b.uF||void 0===b.uF?void 0:b.uF.buttonLabel:E.buttonLabel})]})}}}]);
//# sourceMappingURL=6505.69fef8de.chunk.js.map