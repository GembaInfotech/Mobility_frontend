"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[7936],{9494:function(e,n,o){o.d(n,{EY:function(){return u},Fv:function(){return d},ac:function(){return r}});var l=o(74165),i=o(15861),a=o(91181),t=o(14712);function r(e,n){return t.Z.get(e,{params:n}).then((function(e){return null===e||void 0===e?void 0:e.data}))}function d(e,n){return t.Z.post(e,n).then((function(e){return null===e||void 0===e?void 0:e.data}))}function u(e){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.Z.fetchData({url:"/search/query",method:"post",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},17936:function(e,n,o){o.r(n),o.d(n,{default:function(){return F}});var l=o(1413),i=o(29439),a=o(72791),t=o(73038),r=o(92506),d=o(93433),u=o(75737),c=o.n(u),s=(o(70902),o(9494)),v=o(11723),m=o(48573),p=o.n(m),h=o(80034),f=o(40018),b=o(52639),g=[{label:"Clinician",value:1},{label:"Technician",value:2}],y=[{name:"enrollmentNumber",label:"Enrollment Number",type:"text",component:t.II,placeholder:"Enter enrollment number",isBasic:!0},{name:"firstName",label:"First Name",type:"text",component:t.II,placeholder:"Enter first name",isBasic:!0},{name:"lastName",label:"Last Name",type:"text",component:t.II,placeholder:"Enter last name",isBasic:!0},{name:"phoneNumber",countryCode:"countryCode",label:"Mobile No.",component:"phoneNumber",placeholder:"Enter mobile no."},{name:"email",label:"Email",type:"text",component:t.II,placeholder:"Enter email",isBasic:!0},{name:"password",label:"Password",type:"password",component:"password",placeholder:"Enter Password",ishidden:!0},{name:"jobType",label:"Job Type",component:"select",option:g,placeholder:"Enter job type"},{name:"gender",label:"Gender",type:"number",component:"radio"},{name:"dob",label:"DOB",component:"datepicker"},{name:"address",label:"Address",type:"text",component:t.II,placeholder:"Enter address",textArea:!0,isBasic:!0},{name:"state",label:"State",type:"text",component:"asyncSelect",placeholder:"Enter State"},{name:"country",label:"Country",type:"text",component:t.II,placeholder:"Enter country",isBasic:!0},{name:"city",label:"City",type:"text",component:t.II,placeholder:"Enter city",isBasic:!0},{name:"pincode",label:"Pincode",type:"text",component:t.II,placeholder:"Enter pincode",isBasic:!0},{name:"alternatePhoneNumber",countryCode:"alternateCountryCode",component:"phoneNumber",label:"Alternate Mobile No.",placeholder:"Enter alternate mobile no."}],x=o(80184),N=function(e){var n=e.id,o=e.field,l=e.setFieldValue,i=e.values,a=(e.errors,e.touched,p()((function(e,n){"state"===o.name&&(0,s.ac)(v.vh.GET_CODE,{type:4,search:e}).then((function(e){var o,l=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}}));n(l)})),"deviceType"===o.name&&(0,s.ac)(v.vh.GET_CODE,{type:2,search:e}).then((function(e){var o,l=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}}));n(l)}))}),300));return(0,x.jsxs)(x.Fragment,{children:["datepicker"===o.component&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(t.Mt,{name:o.name,inputFormat:b.zT,defaultValue:new Date(null===i||void 0===i?void 0:i[o.name]),value:new Date(null===i||void 0===i?void 0:i[o.name]),onChange:function(e){return l(o.name,e)}})}),"radio"===o.component&&(0,x.jsx)(x.Fragment,{children:b.j9.map((function(e,n){return(0,x.jsx)(t.Y8,{className:"mr-4",name:"gender",value:e.value,onChange:function(e){return l(o.name,e)},checked:e.value===(null===i||void 0===i?void 0:i[o.name]),children:e.label})}))}),"phoneNumber"===o.component&&(0,x.jsx)(c(),{inputStyle:{width:"369px",padding:"11px 14px 11px 60px"},enableSearch:!0,country:"us",countryCodeEditable:!0,value:"".concat(null===i||void 0===i?void 0:i[o.name]),onChange:function(e,n){l(o.name,e),l(o.countryCode,null===n||void 0===n?void 0:n.dialCode)}}),"upload"===o.component&&(0,x.jsxs)(t.BZ,{className:"mb-4",children:[(0,x.jsx)(t.II,{value:i[o.name]}),(0,x.jsx)(t.gq,{uploadLimit:1,showList:!1,accept:["image/jpeg","image/png"],name:o.name,onChange:function(e){for(var n=new FormData,i=0;i<(null===e||void 0===e?void 0:e.length);i++)n.append("image",e[i]);(0,s.Fv)(v.vh.UPLOAD_IMAGE,n).then((function(e){var n,i,a=[];a=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[].concat((0,d.Z)(a),(0,d.Z)(null===e||void 0===e?void 0:e.data)):[].concat((0,d.Z)(a),[null===e||void 0===e?void 0:e.data]),l(o.name,null===(i=a[0])||void 0===i?void 0:i.original)}))}})]}),"asyncSelect"===o.component&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(r.gN,{component:t.Ph,autoComplete:"off",placeholder:o.placeholder,defaultOptions:!0,cacheOptions:!0,loadOptions:a,componentAs:h.Z,onChange:function(e){l(o.name,e)},name:o.name,value:null===i||void 0===i?void 0:i[o.name]})}),"password"===o.component&&!n&&(0,x.jsx)(r.gN,{autoComplete:"off",name:"password",placeholder:"Password",component:f.WU}),"select"===o.component&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(r.gN,{component:t.Ph,autoComplete:"off",placeholder:o.placeholder,options:o.option,onChange:function(e){l(o.name,e)},name:o.name,value:g.find((function(e){return(null===e||void 0===e?void 0:e.value)===(null===i||void 0===i?void 0:i[o.name])}))})})]})},C=o(57689),j=o(62797),Z=o(78820),E=o(54048),w=function(e){e.id,e.touched;var n,o,l=e.errors,i=e.values,a=e.setFieldValue;e.name;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"grid grid-cols-2 mb-5 gap-x-4",children:[(0,x.jsx)(t.xJ,{label:"Upload Image",invalid:null===l||void 0===l?void 0:l.image,errorMessage:null===l||void 0===l?void 0:l.image,children:(0,x.jsx)(t.gq,{uploadLimit:1,draggable:!0,name:"image",showList:!1,onChange:function(e){return function(e){for(var n=new FormData,o=0;o<(null===e||void 0===e?void 0:e.length);o++)n.append("image",e[o]);(0,s.Fv)(v.vh.UPLOAD_IMAGE,n).then((function(e){var n,o=[];o=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[].concat((0,d.Z)(o),(0,d.Z)(null===e||void 0===e?void 0:e.data)):[].concat((0,d.Z)(o),[null===e||void 0===e?void 0:e.data]),a("image",o)}))}(e)},children:(0,x.jsx)(f.A9,{className:"mx-auto",src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"})})}),(null===i||void 0===i||null===(n=i.image)||void 0===n?void 0:n.length)>0&&(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(t.Zb,{className:"mt-6 mb-5 ",style:{height:"112px"},children:(0,x.jsx)("div",{className:"flex flex-wrap",children:null===i||void 0===i||null===(o=i.image)||void 0===o?void 0:o.map((function(e,n,o){return(0,x.jsxs)("div",{className:"flex items-center justify-between  p-2 border-2 rounded-xl  ",children:[(0,x.jsx)("div",{className:"flex items-center ",children:(0,x.jsx)("img",{className:"w-14 h-12 rounded-xl mr-2",alt:null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original,src:"".concat(E.Z.apiBaseUrl,"bucket/").concat(null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original)})}),(0,x.jsx)(Z.oHP,{className:"text-sm cursor-pointer",onClick:function(){return n=e,void(0,s.Fv)(v.vh.DELETE_IMAGE,{original:null===n||void 0===n?void 0:n.original,thumbnail:null===n||void 0===n?void 0:n.thumbnail}).then((function(){var e,o=null===i||void 0===i||null===(e=i.images)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.original)!==(null===n||void 0===n?void 0:n.original)}));a("image",o)}));var n}})]},n)}))})})})]})})},S=j.Ry().shape({firstName:j.Z_().required("Required"),lastName:j.Z_().required("Required"),dob:j.Z_().required("Required"),gender:j.Z_().required("Required"),email:j.Z_().email().required("Required"),phoneNumber:j.Z_().required(),enrollmentNumber:j.Z_().required("Required")}),q=j.Ry().shape({firstName:j.Z_().required("Required"),lastName:j.Z_().required("Required"),dob:j.Z_().required("Required"),gender:j.Z_().required("Required"),email:j.Z_().email().required("Required"),phoneNumber:j.Z_().required(),enrollmentNumber:j.Z_().required("Required")}),I={jobType:1,firstName:"",lastName:"",email:"",password:"",gender:1,dob:new Date,address:"",state:"",phoneNumber:"",pincode:"",city:"",countryCode:"+1",alternateCountryCode:"+1",alternatePhoneNumber:"",enrollmentNumber:""},F=function(){var e=(0,C.UO)().id,n=(0,a.useState)({}),o=(0,i.Z)(n,2),d=o[0],u=o[1],c=(0,a.useState)(!0),m=(0,i.Z)(c,2),p=m[0],h=m[1],f=(0,C.s0)();(0,a.useEffect)((function(){e?(0,s.ac)(v.vh.GET_USERS,{userType:2,userId:e}).then((function(e){var n,o=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;u({jobType:null===o||void 0===o?void 0:o.jobType,firstName:null===o||void 0===o?void 0:o.firstName,lastName:null===o||void 0===o?void 0:o.lastName,email:null===o||void 0===o?void 0:o.email,gender:null===o||void 0===o?void 0:o.gender,dob:null===o||void 0===o?void 0:o.dob,image:null!==o&&void 0!==o&&o.imageUrlOriginal?[{original:null===o||void 0===o?void 0:o.imageUrlOriginal,thumbnail:null===o||void 0===o?void 0:o.imageUrlThumbnail}]:[],countryCode:null!==(null===o||void 0===o?void 0:o.countryCode)?null===o||void 0===o?void 0:o.countryCode:"+1",country:null===o||void 0===o?void 0:o.country,pincode:null===o||void 0===o?void 0:o.pincode,city:null===o||void 0===o?void 0:o.city,state:{label:null===o||void 0===o?void 0:o.state,value:null===o||void 0===o?void 0:o.state},alternateCountryCode:null!==(null===o||void 0===o?void 0:o.alternateCountryCode)?null===o||void 0===o?void 0:o.alternateCountryCode:"+1",address:null===o||void 0===o?void 0:o.address,phoneNumber:null!==(null===o||void 0===o?void 0:o.countryCode)&&null!==(null===o||void 0===o?void 0:o.phoneNumber)?"".concat(null===o||void 0===o?void 0:o.countryCode).concat(null===o||void 0===o?void 0:o.phoneNumber):"",alternatePhoneNumber:null!==(null===o||void 0===o?void 0:o.alternateCountryCode)&&null!==(null===o||void 0===o?void 0:o.alternatePhoneNumber)?"".concat(null===o||void 0===o?void 0:o.alternateCountryCode).concat(null===o||void 0===o?void 0:o.alternatePhoneNumber):"",enrollmentNumber:null===o||void 0===o?void 0:o.enrollmentNumber})})).finally((function(){h(!1)})):h(!1)}),[e]);var g=(0,r.TA)({initialValues:e?d:I,enableReinitialize:!0,validationSchema:e?q:S,onSubmit:function(n){var o,i,a,r,d,u;(e&&(n.id=e),n.alternatePhoneNumber=null===n||void 0===n||null===(o=n.alternatePhoneNumber)||void 0===o?void 0:o.replace(null===n||void 0===n?void 0:n.alternateCountryCode,""),n.phoneNumber=null===n||void 0===n||null===(i=n.phoneNumber)||void 0===i?void 0:i.replace(null===n||void 0===n?void 0:n.countryCode,""),""===n.alternatePhoneNumber&&delete n.alternatePhoneNumber,""===n.phoneNumber&&delete n.phoneNumber,null!==n&&void 0!==n&&null!==(a=n.alternateCountryCode)&&void 0!==a&&a.includes("+")||(n.alternateCountryCode="+".concat(n.alternateCountryCode)),null!==n&&void 0!==n&&null!==(r=n.countryCode)&&void 0!==r&&r.includes("+")||(n.countryCode="+".concat(n.countryCode)),n.state)&&(n.state=null===n||void 0===n||null===(u=n.state)||void 0===u?void 0:u.label);null!==n&&void 0!==n&&n.image&&(null===n||void 0===n||null===(d=n.image)||void 0===d?void 0:d.length)>0&&(n.original=n.image[0].original,n.thumbnail=n.image[0].thumbnail),delete n.image,(0,s.Fv)(v.vh.ADD_EDIT_STAFF,(0,l.Z)({},n)).then((function(n){t.Am.push((0,x.jsx)(t.P_,{type:"success",children:e?b.D5:b.Te})),f(-1)}))}}),j=g.errors,Z=g.touched,E=g.values,F=g.handleSubmit,O=g.setFieldValue,_=g.isSubmitting;return(0,x.jsx)(r.Hy,{value:g,children:(0,x.jsxs)(r.l0,{className:"p-1",onSubmit:F,autoComplete:"off",noValidate:!0,children:[(0,x.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,x.jsx)("h3",{children:e?"Edit Staff":"Add Staff"}),(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)(t.zx,{size:"sm",variant:"solid",onClick:function(){return f(-1)},type:"button",children:"Back / Cancel"}),(0,x.jsx)(t.zx,{size:"sm",variant:"solid",style:{marginLeft:"5px"},loading:_,type:"submit",children:e?"Update":"Save"})]})]}),(0,x.jsxs)("div",{children:[p&&(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(t.$j,{size:"3.25rem"})}),!p&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(t.Zb,{className:"mt-2.5 w-3/4 ",children:(0,x.jsxs)(t.Yb,{className:" md:w-full lg:w-1/2",children:[(0,x.jsx)("h5",{className:"mb-4",children:"Personal Information"}),(0,x.jsx)(w,{touched:Z,errors:j,values:E,setFieldValue:O}),y.map((function(n,o,l){return(0,x.jsxs)(x.Fragment,{children:[(null===n||void 0===n?void 0:n.title)&&(0,x.jsx)("h6",{className:"my-3",children:null===n||void 0===n?void 0:n.title}),(0,x.jsx)(t.xJ,{label:"password"===n.component&&e?null:null===n||void 0===n?void 0:n.label,className:"ml-3 ",invalid:(null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.name])&&(null===Z||void 0===Z?void 0:Z[null===n||void 0===n?void 0:n.name]),errorMessage:null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.name],children:n.isBasic?(0,x.jsx)(r.gN,{textArea:!(null===n||void 0===n||!n.textArea),type:null===n||void 0===n?void 0:n.type,autoComplete:"off",name:null===n||void 0===n?void 0:n.name,placeholder:null===n||void 0===n?void 0:n.placeholder,component:null===n||void 0===n?void 0:n.component}):(0,x.jsx)(N,{id:e,errors:j,field:n,setFieldValue:O,values:E})},o)]})}))]})})})]})]})})}},80034:function(e,n,o){o.d(n,{Z:function(){return m}});var l=o(87462),i=o(72791),a=o(4934),t=o(8003),r=o(4942),d=o(1413),u=o(29439),c=o(45987),s=o(74999),v=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];o(54164),o(51672);var m=(0,i.forwardRef)((function(e,n){var o=function(e){var n=e.defaultOptions,o=void 0!==n&&n,l=e.cacheOptions,a=void 0!==l&&l,t=e.loadOptions;e.options;var m=e.isLoading,p=void 0!==m&&m,h=e.onInputChange,f=e.filterOption,b=void 0===f?null:f,g=(0,c.Z)(e,v),y=g.inputValue,x=(0,i.useRef)(void 0),N=(0,i.useRef)(!1),C=(0,i.useState)(Array.isArray(o)?o:void 0),j=(0,u.Z)(C,2),Z=j[0],E=j[1],w=(0,i.useState)("undefined"!==typeof y?y:""),S=(0,u.Z)(w,2),q=S[0],I=S[1],F=(0,i.useState)(!0===o),O=(0,u.Z)(F,2),_=O[0],A=O[1],P=(0,i.useState)(void 0),R=(0,u.Z)(P,2),T=R[0],k=R[1],D=(0,i.useState)([]),U=(0,u.Z)(D,2),B=U[0],L=U[1],M=(0,i.useState)(!1),V=(0,u.Z)(M,2),z=V[0],G=V[1],J=(0,i.useState)({}),Y=(0,u.Z)(J,2),H=Y[0],W=Y[1],$=(0,i.useState)(void 0),K=(0,u.Z)($,2),Q=K[0],X=K[1],ee=(0,i.useState)(void 0),ne=(0,u.Z)(ee,2),oe=ne[0],le=ne[1];a!==oe&&(W({}),le(a)),o!==Q&&(E(Array.isArray(o)?o:void 0),X(o)),(0,i.useEffect)((function(){return N.current=!0,function(){N.current=!1}}),[]);var ie=(0,i.useCallback)((function(e,n){if(!t)return n();var o=t(e,n);o&&"function"===typeof o.then&&o.then(n,(function(){return n()}))}),[t]);(0,i.useEffect)((function(){!0===o&&ie(q,(function(e){N.current&&(E(e||[]),A(!!x.current))}))}),[]);var ae=(0,i.useCallback)((function(e,n){var o=(0,s.L)(e,n,h);if(!o)return x.current=void 0,I(""),k(""),L([]),A(!1),void G(!1);if(a&&H[o])I(o),k(o),L(H[o]),A(!1),G(!1);else{var l=x.current={};I(o),A(!0),G(!T),ie(o,(function(e){N&&l===x.current&&(x.current=void 0,A(!1),k(o),L(e||[]),G(!1),W(e?(0,d.Z)((0,d.Z)({},H),{},(0,r.Z)({},o,e)):H))}))}}),[a,ie,T,H,h]),te=z?[]:q&&T?B:Z||[];return(0,d.Z)((0,d.Z)({},g),{},{options:te,isLoading:_||p,onInputChange:ae,filterOption:b})}(e),m=(0,t.u)(o);return i.createElement(a.S,(0,l.Z)({ref:n},m))}))}}]);
//# sourceMappingURL=7936.5aa2eda9.chunk.js.map