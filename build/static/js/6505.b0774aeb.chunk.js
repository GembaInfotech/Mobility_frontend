"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[6505],{66505:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var i=t(29439),a=t(72791),o=t(9494),l=t(11723),s=t(40018),u=t(16146),d=t(58617),r=t(92506),c=t(62797),v=t(78820),f=t(80184),h=function(e){var n=e.editData,t=e.onCancel,i=e.onSave,a=e.isLoading;return(0,f.jsxs)("div",{className:"text-right w-full",children:[(0,f.jsx)(u.zx,{className:"mr-2",onClick:t,disabled:a,icon:(0,f.jsx)(v.SV5,{}),children:"Cancel"}),(0,f.jsx)(u.zx,{variant:"solid",type:"submit",onClick:i,disabled:a,icon:(0,f.jsx)(v.JMf,{}),children:null!==n&&void 0!==n&&n.id?"Update":"Save"})]})},m=c.Ry().shape({name:c.Z_().required("Required")}),A={name:""},C=function(e){var n=e.editData,t=e.show,d=e.onClose,c=e.refreshPage,v=(0,a.useRef)(),C=(0,a.useState)(!1),D=(0,i.Z)(C,2),x=D[0],p=D[1];return(0,f.jsx)(u.dy,{isOpen:t,onClose:d,onRequestClose:d,closable:!1,bodyClass:"p-0",title:null!==n&&void 0!==n&&n.id?"Edit Location":"Add Location",footer:(0,f.jsx)(h,{onCancel:d,onSave:function(){var e;return null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.submitForm()},isLoading:x,editData:n}),children:(0,f.jsx)(s.lG,{children:(0,f.jsx)(r.J9,{innerRef:v,initialValues:n||A,validationSchema:m,onSubmit:function(e){var n=e.name,t=e.id;p(!0);var i={name:n,modelType:l.kD.INVLOCATION};t&&(i.id=t),(0,o.Fv)(l.vh.ADD_EDIT_DATA,i).then((function(){d(),c(),u.Am.push((0,f.jsx)(u.P_,{type:"success",children:"Location saved!"}))})).finally((function(){return p(!1)}))},enableReinitialize:!0,children:function(e){var n=e.errors,t=e.touched;e.setFieldValue,e.values;return(0,f.jsx)(r.l0,{className:"p-5",children:(0,f.jsx)(u.Yb,{children:(0,f.jsx)(u.xJ,{label:"Location",invalid:(null===n||void 0===n?void 0:n.name)&&(null===t||void 0===t?void 0:t.name),errorMessage:null===n||void 0===n?void 0:n.name,children:(0,f.jsx)(r.gN,{type:"text",autoComplete:"off",name:"name",placeholder:"Enter Name",component:u.II})})})})}})})})},D=t(52452),x=t(93156),p=t(25764),I=t(52639),b=t(31673),j=t(47511),E=[{label:"Edit",key:I.A6.EDIT,show:function(){return(0,j.ZP)(j.Fm.INVLOCATION,j.qz.WRITE)}},{label:(0,f.jsx)(v.YK6,{style:{fontSize:"1.2rem"}}),key:I.A6.DELETE,toolTip:"Delete",show:function(){return(0,j.ZP)(j.Fm.INVLOCATION,j.qz.DELETE)}}],L=(0,j.ZP)(j.Fm.INVLOCATION,j.qz.WRITE)?[{label:"Add Location",key:I.A6.ADD,icon:(0,f.jsx)(d.HQD,{})}]:[],S={header:I.BI.HEADER,des:I.BI.DELETE,buttonLabel:"Delete"},N=function(){var e=(0,a.useState)([]),n=(0,i.Z)(e,2),t=n[0],d=n[1],r=(0,a.useState)(!1),c=(0,i.Z)(r,2),v=c[0],h=c[1],m=(0,a.useState)(1),A=(0,i.Z)(m,2),N=A[0],T=A[1],g=(0,a.useState)(0),O=(0,i.Z)(g,2),Z=O[0],k=O[1],y=(0,a.useState)(10),F=(0,i.Z)(y,2),w=F[0],_=F[1],P=(0,a.useState)(""),R=(0,i.Z)(P,2),V=R[0],z=R[1],H=(0,a.useState)(!1),q=(0,i.Z)(H,2),M=q[0],B=q[1],W=(0,a.useState)(!1),G=(0,i.Z)(W,2),J=G[0],K=G[1],Q=(0,a.useState)(""),Y=(0,i.Z)(Q,2),U=Y[0],X=Y[1],$=(0,a.useState)(!1),ee=(0,i.Z)($,2),ne=ee[0],te=ee[1],ie=(0,a.useState)(!1),ae=(0,i.Z)(ie,2),oe=ae[0],le=ae[1];(0,a.useEffect)((function(){h(!0),(0,o.ac)(l.vh.LIST_DATA,{type:l.kD.INVLOCATION,limit:w,search:V,skip:w*(N-1)}).then((function(e){var n,t;d([]),d(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),k(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count)})).finally((function(){return h(!1)}))}),[V,N,w,J]);var se=function(e,n,t){n===I.A6.EDIT&&(X({id:null===t||void 0===t?void 0:t._id,name:null===t||void 0===t?void 0:t.name}),B(!0)),n===I.A6.DELETE&&(X({id:null===t||void 0===t?void 0:t._id}),te(!0))},ue=[{Header:"Location ID",accessor:"locationNo"},{Header:"name",accessor:"name"},{Header:"Active",Cell:function(e){return(0,f.jsx)(b.Z,{dataObj:e,setSelectedData:X,setActiveConfirm:le,setOpenModal:te})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,f.jsx)(D.Z,{row:e.row.original,onActionHandle:se,actionsMenu:E})}}],de=function(){X(""),te(!1),le(!1)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Z,{buttonMenu:L,setSearch:z,buttonClick:function(e,n){n===I.A6.ADD&&B(!0)}}),(0,f.jsx)(s.lG,{className:"h-full",bodyClass:"h-full",children:(0,f.jsx)(s.wQ,{columns:(0,j._P)(ue,j.Fm.INVLOCATION,1),isCursor:!1,data:t,loading:v,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:N,pageSize:w,total:Z},onPaginationChange:function(e){return T(e)},onSelectChange:function(e){return _(e)}})}),(0,f.jsx)(C,{show:M,onClose:function(){X(""),B(!1)},refreshPage:function(){return K((function(e){return!e}))},editData:U}),(0,f.jsx)(p.Z,{isOpen:ne,onConfirmClick:function(){var e,n={type:l.kD.INVLOCATION,id:null===U||void 0===U?void 0:U.id};oe?(e=I.D5,n.status=+(null===U||void 0===U?void 0:U.action)):(e=I.O7,n.status=0),(0,o.Fv)(l.vh.BLOCK_DELETE_DATA,n).then((function(n){u.Am.push((0,f.jsx)(u.P_,{type:"success",children:e})),K((function(e){return!e})),de()}))},header:S.header,des:oe?null===I.uF||void 0===I.uF?void 0:I.uF.des:S.des,onDialogClose:de,isWarning:!oe&&I.BI.WARNING,buttonLabel:oe?null===I.uF||void 0===I.uF?void 0:I.uF.buttonLabel:S.buttonLabel})]})}}}]);
//# sourceMappingURL=6505.b0774aeb.chunk.js.map