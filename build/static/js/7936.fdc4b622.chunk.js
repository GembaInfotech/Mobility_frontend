"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[7936],{17936:function(e,n,l){l.r(n),l.d(n,{default:function(){return _}});var o=l(1413),i=l(29439),a=l(72791),d=l(16146),t=l(92506),r=l(93433),u=l(75737),s=l.n(u),c=(l(70902),l(9494)),m=l(11723),v=l(48573),p=l.n(v),h=l(80034),b=l(40018),g=l(52639),f=[{label:"Clinician",value:1},{label:"Technician",value:2}],x=[{name:"enrollmentNumber",label:"Enrollment Number",type:"text",component:d.II,placeholder:"Enter enrollment number",isBasic:!0},{name:"firstName",label:"First Name",type:"text",component:d.II,placeholder:"Enter first name",isBasic:!0},{name:"lastName",label:"Last Name",type:"text",component:d.II,placeholder:"Enter last name",isBasic:!0},{name:"phoneNumber",countryCode:"countryCode",label:"Mobile No.",component:"phoneNumber",placeholder:"Enter mobile no."},{name:"email",label:"Email",type:"text",component:d.II,placeholder:"Enter email",isBasic:!0},{name:"password",label:"Password",type:"password",component:"password",placeholder:"Enter Password",ishidden:!0},{name:"jobType",label:"Job Type",component:"select",option:f,placeholder:"Enter job type"},{name:"gender",label:"Gender",type:"number",component:"radio"},{name:"dob",label:"DOB",component:"datepicker"},{name:"address",label:"Address",type:"text",component:d.II,placeholder:"Enter address",textArea:!0,isBasic:!0},{name:"state",label:"State",type:"text",component:"asyncSelect",placeholder:"Enter State"},{name:"country",label:"Country",type:"text",component:d.II,placeholder:"Enter country",isBasic:!0},{name:"city",label:"City",type:"text",component:d.II,placeholder:"Enter city",isBasic:!0},{name:"pincode",label:"Pincode",type:"text",component:d.II,placeholder:"Enter pincode",isBasic:!0},{name:"alternatePhoneNumber",countryCode:"alternateCountryCode",component:"phoneNumber",label:"Alternate Mobile No.",placeholder:"Enter alternate mobile no."}],y=l(80184),N=function(e){var n=e.id,l=e.field,o=e.setFieldValue,i=e.values,a=(e.errors,e.touched,p()((function(e,n){"state"===l.name&&(0,c.ac)(m.vh.GET_CODE,{type:4,search:e}).then((function(e){var l,o=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}}));n(o)})),"deviceType"===l.name&&(0,c.ac)(m.vh.GET_CODE,{type:2,search:e}).then((function(e){var l,o=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id}}));n(o)}))}),300));return(0,y.jsxs)(y.Fragment,{children:["datepicker"===l.component&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.Mt,{name:l.name,inputFormat:g.zT,defaultValue:new Date(null===i||void 0===i?void 0:i[l.name]),value:new Date(null===i||void 0===i?void 0:i[l.name]),onChange:function(e){return o(l.name,e)}})}),"radio"===l.component&&(0,y.jsx)(y.Fragment,{children:g.j9.map((function(e,n){return(0,y.jsx)(d.Y8,{className:"mr-4",name:"gender",value:e.value,onChange:function(e){return o(l.name,e)},checked:e.value===(null===i||void 0===i?void 0:i[l.name]),children:e.label})}))}),"phoneNumber"===l.component&&(0,y.jsx)(s(),{inputStyle:{width:"369px",padding:"11px 14px 11px 60px"},enableSearch:!0,country:"us",countryCodeEditable:!0,value:"".concat(null===i||void 0===i?void 0:i[l.name]),onChange:function(e,n){o(l.name,e),o(l.countryCode,null===n||void 0===n?void 0:n.dialCode)}}),"upload"===l.component&&(0,y.jsxs)(d.BZ,{className:"mb-4",children:[(0,y.jsx)(d.II,{value:i[l.name]}),(0,y.jsx)(d.gq,{uploadLimit:1,showList:!1,accept:["image/jpeg","image/png"],name:l.name,onChange:function(e){for(var n=new FormData,i=0;i<(null===e||void 0===e?void 0:e.length);i++)n.append("image",e[i]);(0,c.Fv)(m.vh.UPLOAD_IMAGE,n).then((function(e){var n,i,a=[];a=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[].concat((0,r.Z)(a),(0,r.Z)(null===e||void 0===e?void 0:e.data)):[].concat((0,r.Z)(a),[null===e||void 0===e?void 0:e.data]),o(l.name,null===(i=a[0])||void 0===i?void 0:i.original)}))}})]}),"asyncSelect"===l.component&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(t.gN,{component:d.Ph,autoComplete:"off",placeholder:l.placeholder,defaultOptions:!0,cacheOptions:!0,loadOptions:a,componentAs:h.Z,onChange:function(e){o(l.name,e)},name:l.name,value:null===i||void 0===i?void 0:i[l.name]})}),"password"===l.component&&!n&&(0,y.jsx)(t.gN,{autoComplete:"off",name:"password",placeholder:"Password",component:b.WU}),"select"===l.component&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(t.gN,{component:d.Ph,autoComplete:"off",placeholder:l.placeholder,options:l.option,onChange:function(e){o(l.name,e)},name:l.name,value:f.find((function(e){return(null===e||void 0===e?void 0:e.value)===(null===i||void 0===i?void 0:i[l.name])}))})})]})},C=l(57689),j=l(62797),E=l(78820),q=l(54048),w=function(e){e.id,e.touched;var n,l,o=e.errors,i=e.values,a=e.setFieldValue;e.name;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"grid grid-cols-2 mb-5 gap-x-4",children:[(0,y.jsx)(d.xJ,{label:"Upload Image",invalid:null===o||void 0===o?void 0:o.image,errorMessage:null===o||void 0===o?void 0:o.image,children:(0,y.jsx)(d.gq,{uploadLimit:1,draggable:!0,name:"image",showList:!1,onChange:function(e){return function(e){for(var n=new FormData,l=0;l<(null===e||void 0===e?void 0:e.length);l++)n.append("image",e[l]);(0,c.Fv)(m.vh.UPLOAD_IMAGE,n).then((function(e){var n,l=[];l=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[].concat((0,r.Z)(l),(0,r.Z)(null===e||void 0===e?void 0:e.data)):[].concat((0,r.Z)(l),[null===e||void 0===e?void 0:e.data]),a("image",l)}))}(e)},children:(0,y.jsx)(b.A9,{className:"mx-auto",src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"})})}),(null===i||void 0===i||null===(n=i.image)||void 0===n?void 0:n.length)>0&&(0,y.jsx)("div",{className:"flex justify-center",children:(0,y.jsx)(d.Zb,{className:"mt-6 mb-5 ",style:{height:"112px"},children:(0,y.jsx)("div",{className:"flex flex-wrap",children:null===i||void 0===i||null===(l=i.image)||void 0===l?void 0:l.map((function(e,n,l){return(0,y.jsxs)("div",{className:"flex items-center justify-between  p-2 border-2 rounded-xl  ",children:[(0,y.jsx)("div",{className:"flex items-center ",children:(0,y.jsx)("img",{className:"w-14 h-12 rounded-xl mr-2",alt:null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original,src:"".concat(q.Z.apiBaseUrl,"bucket/").concat(null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original)})}),(0,y.jsx)(E.oHP,{className:"text-sm cursor-pointer",onClick:function(){return n=e,void(0,c.Fv)(m.vh.DELETE_IMAGE,{original:null===n||void 0===n?void 0:n.original,thumbnail:null===n||void 0===n?void 0:n.thumbnail}).then((function(){var e,l=null===i||void 0===i||null===(e=i.images)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.original)!==(null===n||void 0===n?void 0:n.original)}));a("image",l)}));var n}})]},n)}))})})})]})})},Z=j.Ry().shape({firstName:j.Z_().required("Required"),lastName:j.Z_().required("Required"),dob:j.Z_().required("Required"),gender:j.Z_().required("Required"),email:j.Z_().email().required("Required"),phoneNumber:j.Z_().required(),enrollmentNumber:j.Z_().required("Required")}),I=j.Ry().shape({firstName:j.Z_().required("Required"),lastName:j.Z_().required("Required"),dob:j.Z_().required("Required"),gender:j.Z_().required("Required"),email:j.Z_().email().required("Required"),phoneNumber:j.Z_().required(),enrollmentNumber:j.Z_().required("Required")}),F={jobType:1,firstName:"",lastName:"",email:"",password:"",gender:1,dob:new Date,address:"",state:"",phoneNumber:"",pincode:"",city:"",countryCode:"+1",alternateCountryCode:"+1",alternatePhoneNumber:"",enrollmentNumber:""},_=function(){var e=(0,C.UO)().id,n=(0,a.useState)({}),l=(0,i.Z)(n,2),r=l[0],u=l[1],s=(0,a.useState)(!0),v=(0,i.Z)(s,2),p=v[0],h=v[1],b=(0,C.s0)();(0,a.useEffect)((function(){e?(0,c.ac)(m.vh.GET_USERS,{userType:2,userId:e}).then((function(e){var n,l=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;u({jobType:null===l||void 0===l?void 0:l.jobType,firstName:null===l||void 0===l?void 0:l.firstName,lastName:null===l||void 0===l?void 0:l.lastName,email:null===l||void 0===l?void 0:l.email,gender:null===l||void 0===l?void 0:l.gender,dob:null===l||void 0===l?void 0:l.dob,image:null!==l&&void 0!==l&&l.imageUrlOriginal?[{original:null===l||void 0===l?void 0:l.imageUrlOriginal,thumbnail:null===l||void 0===l?void 0:l.imageUrlThumbnail}]:[],countryCode:null!==(null===l||void 0===l?void 0:l.countryCode)?null===l||void 0===l?void 0:l.countryCode:"+1",country:null===l||void 0===l?void 0:l.country,pincode:null===l||void 0===l?void 0:l.pincode,city:null===l||void 0===l?void 0:l.city,state:{label:null===l||void 0===l?void 0:l.state,value:null===l||void 0===l?void 0:l.state},alternateCountryCode:null!==(null===l||void 0===l?void 0:l.alternateCountryCode)?null===l||void 0===l?void 0:l.alternateCountryCode:"+1",address:null===l||void 0===l?void 0:l.address,phoneNumber:null!==(null===l||void 0===l?void 0:l.countryCode)&&null!==(null===l||void 0===l?void 0:l.phoneNumber)?"".concat(null===l||void 0===l?void 0:l.countryCode).concat(null===l||void 0===l?void 0:l.phoneNumber):"",alternatePhoneNumber:null!==(null===l||void 0===l?void 0:l.alternateCountryCode)&&null!==(null===l||void 0===l?void 0:l.alternatePhoneNumber)?"".concat(null===l||void 0===l?void 0:l.alternateCountryCode).concat(null===l||void 0===l?void 0:l.alternatePhoneNumber):"",enrollmentNumber:null===l||void 0===l?void 0:l.enrollmentNumber})})).finally((function(){h(!1)})):h(!1)}),[e]);var f=(0,t.TA)({initialValues:e?r:F,enableReinitialize:!0,validationSchema:e?I:Z,onSubmit:function(n){var l,i,a,t,r,u;(e&&(n.id=e),n.alternatePhoneNumber=null===n||void 0===n||null===(l=n.alternatePhoneNumber)||void 0===l?void 0:l.replace(null===n||void 0===n?void 0:n.alternateCountryCode,""),n.phoneNumber=null===n||void 0===n||null===(i=n.phoneNumber)||void 0===i?void 0:i.replace(null===n||void 0===n?void 0:n.countryCode,""),""===n.alternatePhoneNumber&&delete n.alternatePhoneNumber,""===n.phoneNumber&&delete n.phoneNumber,null!==n&&void 0!==n&&null!==(a=n.alternateCountryCode)&&void 0!==a&&a.includes("+")||(n.alternateCountryCode="+".concat(n.alternateCountryCode)),null!==n&&void 0!==n&&null!==(t=n.countryCode)&&void 0!==t&&t.includes("+")||(n.countryCode="+".concat(n.countryCode)),n.state)&&(n.state=null===n||void 0===n||null===(u=n.state)||void 0===u?void 0:u.label);null!==n&&void 0!==n&&n.image&&(null===n||void 0===n||null===(r=n.image)||void 0===r?void 0:r.length)>0&&(n.original=n.image[0].original,n.thumbnail=n.image[0].thumbnail),delete n.image,(0,c.Fv)(m.vh.ADD_EDIT_STAFF,(0,o.Z)({},n)).then((function(n){d.Am.push((0,y.jsx)(d.P_,{type:"success",children:e?g.D5:g.Te})),b(-1)}))}}),j=f.errors,E=f.touched,q=f.values,_=f.handleSubmit,P=f.setFieldValue,S=f.isSubmitting;return(0,y.jsx)(t.Hy,{value:f,children:(0,y.jsxs)(t.l0,{className:"p-1",onSubmit:_,autoComplete:"off",noValidate:!0,children:[(0,y.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,y.jsx)("h3",{children:e?"Edit Staff":"Add Staff"}),(0,y.jsxs)("div",{className:"flex",children:[(0,y.jsx)(d.zx,{size:"sm",variant:"solid",onClick:function(){return b(-1)},type:"button",children:"Back / Cancel"}),(0,y.jsx)(d.zx,{size:"sm",variant:"solid",style:{marginLeft:"5px"},loading:S,type:"submit",children:e?"Update":"Save"})]})]}),(0,y.jsxs)("div",{children:[p&&(0,y.jsx)("div",{className:"flex justify-center",children:(0,y.jsx)(d.$j,{size:"3.25rem"})}),!p&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.Zb,{className:"mt-2.5 w-3/4 ",children:(0,y.jsxs)(d.Yb,{className:" md:w-full lg:w-1/2",children:[(0,y.jsx)("h5",{className:"mb-4",children:"Personal Information"}),(0,y.jsx)(w,{touched:E,errors:j,values:q,setFieldValue:P}),x.map((function(n,l,o){return(0,y.jsxs)(y.Fragment,{children:[(null===n||void 0===n?void 0:n.title)&&(0,y.jsx)("h6",{className:"my-3",children:null===n||void 0===n?void 0:n.title}),(0,y.jsx)(d.xJ,{label:"password"===n.component&&e?null:null===n||void 0===n?void 0:n.label,className:"ml-3 ",invalid:(null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.name])&&(null===E||void 0===E?void 0:E[null===n||void 0===n?void 0:n.name]),errorMessage:null===j||void 0===j?void 0:j[null===n||void 0===n?void 0:n.name],children:n.isBasic?(0,y.jsx)(t.gN,{textArea:!(null===n||void 0===n||!n.textArea),type:null===n||void 0===n?void 0:n.type,autoComplete:"off",name:null===n||void 0===n?void 0:n.name,placeholder:null===n||void 0===n?void 0:n.placeholder,component:null===n||void 0===n?void 0:n.component}):(0,y.jsx)(N,{id:e,errors:j,field:n,setFieldValue:P,values:q})},l)]})}))]})})})]})]})})}}}]);
//# sourceMappingURL=7936.fdc4b622.chunk.js.map