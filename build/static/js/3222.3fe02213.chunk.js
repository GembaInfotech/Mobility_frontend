"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[3222],{13222:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(29439),a=t(72791),o=t(9494),l=t(11723),s=t(40018),u=t(16146),d=t(58617),r=t(92506),c=t(62797),v=t(78820),f=t(60364),h=t(80184),m=function(e){var n=e.editData,t=e.onCancel,i=e.onSave,a=e.isLoading;return(0,h.jsxs)("div",{className:"text-right w-full",children:[(0,h.jsx)(u.zx,{className:"mr-2",onClick:t,disabled:a,icon:(0,h.jsx)(v.SV5,{}),children:"Cancel"}),(0,h.jsx)(u.zx,{variant:"solid",type:"submit",onClick:i,disabled:a,icon:(0,h.jsx)(v.JMf,{}),children:null!==n&&void 0!==n&&n.id?"Update":"Save"})]})},p=c.Ry().shape({name:c.Z_().required("Required")}),A={name:"",companyId:""},S=function(e){var n=e.editData,t=e.show,d=e.onClose,c=e.refreshPage,v=localStorage.getItem("selectedHospitalId"),S=((0,f.v9)((function(e){return e.auth.user})),(0,a.useRef)()),C=(0,a.useState)(!1),D=(0,i.Z)(C,2),x=D[0],b=D[1];return(0,h.jsx)(u.dy,{isOpen:t,onClose:d,onRequestClose:d,closable:!1,bodyClass:"p-0",title:null!==n&&void 0!==n&&n.id?"Edit Location":"Add Location",footer:(0,h.jsx)(m,{onCancel:d,onSave:function(){var e;return null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.submitForm()},isLoading:x,editData:n}),children:(0,h.jsx)(s.lG,{children:(0,h.jsx)(r.J9,{innerRef:S,initialValues:n||A,validationSchema:p,onSubmit:function(e,n){var t=e.name,i=e.id,a=(e.companyId,n.setSubmitting);b(!0);var s={name:t,modelType:l.kD.LOCATIONS,companyId:v};i&&(s.id=i),(0,o.Fv)(l.vh.ADD_EDIT_DATA,s).then((function(){d(),c(),u.Am.push((0,h.jsx)(u.P_,{type:"success",children:"Location saved!"}))})).catch((function(){a(!1)})).finally((function(){return b(!1)}))},enableReinitialize:!0,children:function(e){var n=e.errors,t=e.touched;e.setFieldValue,e.values;return(0,h.jsx)(r.l0,{className:"p-5",children:(0,h.jsx)(u.Yb,{children:(0,h.jsx)(u.xJ,{label:"Location",invalid:(null===n||void 0===n?void 0:n.name)&&(null===t||void 0===t?void 0:t.name),errorMessage:null===n||void 0===n?void 0:n.name,children:(0,h.jsx)(r.gN,{type:"text",autoComplete:"off",name:"name",placeholder:"Enter Name",component:u.II})})})})}})})})},C=t(52452),D=t(93156),x=t(25764),b=t(52639),I=t(31673),j=t(47511),E=[{label:"Edit",key:b.A6.EDIT,show:function(){return(0,j.ZP)(j.Fm.LOCATIONS,j.qz.WRITE)}},{label:(0,h.jsx)(v.YK6,{style:{fontSize:"1.2rem"}}),key:b.A6.DELETE,toolTip:"Delete",show:function(){return(0,j.ZP)(j.Fm.LOCATIONS,j.qz.DELETE)}}],g=(0,j.ZP)(j.Fm.LOCATIONS,j.qz.WRITE)?[{label:"Add Location",key:b.A6.ADD,icon:(0,h.jsx)(d.HQD,{})}]:[],L={header:b.BI.HEADER,des:b.BI.DELETE,buttonLabel:"Delete"},T=function(){var e=localStorage.getItem("selectedHospitalId"),n=(0,a.useState)([]),t=(0,i.Z)(n,2),d=t[0],r=t[1],c=(0,a.useState)(!1),v=(0,i.Z)(c,2),f=v[0],m=v[1],p=(0,a.useState)(1),A=(0,i.Z)(p,2),T=A[0],y=A[1],O=(0,a.useState)(0),Z=(0,i.Z)(O,2),k=Z[0],F=Z[1],N=(0,a.useState)(10),w=(0,i.Z)(N,2),_=w[0],P=w[1],R=(0,a.useState)(""),z=(0,i.Z)(R,2),H=z[0],q=z[1],M=(0,a.useState)(!1),B=(0,i.Z)(M,2),W=B[0],G=B[1],J=(0,a.useState)(!1),V=(0,i.Z)(J,2),K=V[0],Q=V[1],Y=(0,a.useState)(""),U=(0,i.Z)(Y,2),X=U[0],$=U[1],ee=(0,a.useState)(!1),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],ae=(0,a.useState)(!1),oe=(0,i.Z)(ae,2),le=oe[0],se=oe[1];(0,a.useEffect)((function(){m(!0),(0,o.ac)(l.vh.LIST_DATA,{type:l.kD.LOCATIONS,limit:_,search:H,companyId:e,skip:_*(T-1)}).then((function(e){var n,t;r([]),r(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),F(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count)})).finally((function(){return m(!1)}))}),[H,T,_,K]);var ue=function(e,n,t){n===b.A6.EDIT&&($({id:null===t||void 0===t?void 0:t._id,name:null===t||void 0===t?void 0:t.name}),G(!0)),n===b.A6.DELETE&&($({id:null===t||void 0===t?void 0:t._id}),ie(!0))},de=[{Header:"name",accessor:"name"},{Header:"Active",Cell:function(e){return(0,h.jsx)(I.Z,{dataObj:e,setSelectedData:$,setActiveConfirm:se,setOpenModal:ie})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,h.jsx)(C.Z,{row:e.row.original,onActionHandle:ue,actionsMenu:E})}}],re=function(){$(""),ie(!1),se(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(D.Z,{buttonMenu:g,setSearch:q,buttonClick:function(e,n){n===b.A6.ADD&&G(!0)}}),(0,h.jsx)(s.lG,{className:"h-full",bodyClass:"h-full",children:(0,h.jsx)(s.wQ,{columns:(0,j._P)(de,j.Fm.LOCATIONS,1),isCursor:!1,data:d,loading:f,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:T,pageSize:_,total:k},onPaginationChange:function(e){return y(e)},onSelectChange:function(e){return P(e)}})}),(0,h.jsx)(S,{show:W,onClose:function(){$(""),G(!1)},refreshPage:function(){return Q((function(e){return!e}))},editData:X}),(0,h.jsx)(x.Z,{isOpen:te,onConfirmClick:function(){var e,n={type:l.kD.LOCATIONS,id:null===X||void 0===X?void 0:X.id};le?(e=b.D5,n.status=+(null===X||void 0===X?void 0:X.action)):(e=b.O7,n.status=0),(0,o.Fv)(l.vh.BLOCK_DELETE_DATA,n).then((function(n){u.Am.push((0,h.jsx)(u.P_,{type:"success",children:e})),Q((function(e){return!e})),re()}))},header:L.header,des:le?null===b.uF||void 0===b.uF?void 0:b.uF.des:L.des,onDialogClose:re,isWarning:!le&&b.BI.WARNING,buttonLabel:le?null===b.uF||void 0===b.uF?void 0:b.uF.buttonLabel:L.buttonLabel})]})}}}]);
//# sourceMappingURL=3222.3fe02213.chunk.js.map