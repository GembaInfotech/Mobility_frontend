"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[2404],{53247:function(e,n,o){o(72791);var l=o(16146),i=o(80184);n.Z=function(e){var n,o=e.uploadLoading,t=e.header,a=e.des,d=e.onDialogClose,s=e.isWarning,u=e.onConfirmClick,c=e.isOpen,r=e.buttonLabel,v=e.setUploadFile,p=e.uploadFile;return(0,i.jsx)(l.Vq,{isOpen:c,onClose:d,onRequestClose:d,contentClassName:"pb-0 px-0 mt-36 min-w-36",children:(0,i.jsxs)("div",{className:"px-5 pb-5",children:[(0,i.jsx)("h5",{className:"mb-4",children:t}),(0,i.jsx)("p",{children:a}),s&&(0,i.jsx)("p",{className:"text-red-700",children:s}),(0,i.jsxs)(l.BZ,{className:"mb-4",children:[(0,i.jsx)(l.II,{value:null===p||void 0===p||null===(n=p[0])||void 0===n?void 0:n.name}),(0,i.jsx)(l.gq,{uploadLimit:1,showList:!1,accept:[".xlsx, .xls, .csv"],name:"uploadFile",onChange:function(e){v(e)}})]}),(0,i.jsxs)("div",{className:"text-right mt-6",children:[(0,i.jsx)(l.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:d,children:"Cancel"}),(0,i.jsx)(l.zx,{variant:"solid",onClick:u,loading:o,disabled:!p,children:r})]})]})})}},72404:function(e,n,o){o.r(n),o.d(n,{default:function(){return _}});var l=o(1413),i=o(29439),t=o(72791),a=o(9494),d=o(11723),s=o(40018),u=o(16146),c=o(58617),r=o(92506),v=o(62797),p=o(78820),h=o(60364),f=o(80184),m=[{label:"LCodes",value:1},{label:"ICD",value:2}],C=function(e){var n=e.editData,o=e.onCancel,l=e.onSave,i=e.isLoading;return(0,f.jsxs)("div",{className:"text-right w-full",children:[(0,f.jsx)(u.zx,{className:"mr-2",onClick:o,disabled:i,icon:(0,f.jsx)(p.SV5,{}),children:"Cancel"}),(0,f.jsx)(u.zx,{variant:"solid",type:"submit",onClick:l,disabled:i,icon:(0,f.jsx)(p.JMf,{}),children:null!==n&&void 0!==n&&n.id?"Update":"Save"})]})},x=v.Ry().shape({code:v.Z_().required("Required"),type:v.Ry().required("Required")}),y={code:"",description:"",type:"",companyId:""},b=function(e){var n=e.editData,o=e.show,l=e.onClose,c=e.refreshPage,v=localStorage.getItem("selectedHospitalId"),p=((0,h.v9)((function(e){return e.auth.user})),(0,t.useRef)()),b=(0,t.useState)(!1),D=(0,i.Z)(b,2),g=D[0],j=D[1];return(0,f.jsx)(u.dy,{isOpen:o,onClose:l,onRequestClose:l,closable:!1,bodyClass:"p-0",title:null!==n&&void 0!==n&&n.id?"Edit Code":"Add Code",footer:(0,f.jsx)(C,{onCancel:l,onSave:function(){var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.submitForm()},isLoading:g,editData:n}),children:(0,f.jsx)(s.lG,{children:(0,f.jsx)(r.J9,{innerRef:p,initialValues:n||y,validationSchema:x,onSubmit:function(e,n){var o,i=e.code,t=e.id,s=e.description,r=e.type,p=(e.companyId,n.setSubmitting);j(!0);var h={code:i,description:s,type:null===r||void 0===r||null===(o=r.value)||void 0===o?void 0:o.toString(),modelType:d.kD.CODES,companyId:v};t&&(h.id=t),(0,a.Fv)(d.vh.ADD_EDIT_DATA,h).then((function(){l(),c(),u.Am.push((0,f.jsx)(u.P_,{type:"success",children:"Code saved!"}))})).catch((function(){p(!1)})).finally((function(){return j(!1)}))},enableReinitialize:!0,children:function(e){var n=e.errors,o=e.touched,l=e.setFieldValue,i=e.values;return(0,f.jsx)(r.l0,{className:"p-5",children:(0,f.jsxs)(u.Yb,{children:[(0,f.jsx)(u.xJ,{label:"Type",invalid:(null===n||void 0===n?void 0:n.type)&&(null===o||void 0===o?void 0:o.type),errorMessage:null===n||void 0===n?void 0:n.type,children:(0,f.jsx)(u.Ph,{autoComplete:"off",size:"sm",name:"type",className:"mb-1 w-full",placeholder:"Select Type",options:m,value:i.type,onChange:function(e){l("type",e)}})}),(0,f.jsx)(u.xJ,{label:"Code",invalid:(null===n||void 0===n?void 0:n.code)&&(null===o||void 0===o?void 0:o.code),errorMessage:null===n||void 0===n?void 0:n.code,children:(0,f.jsx)(r.gN,{type:"text",autoComplete:"off",name:"code",placeholder:"Enter Code ",component:u.II})}),(0,f.jsx)(u.xJ,{label:"Description",children:(0,f.jsx)(r.gN,{type:"text",autoComplete:"off",name:"description",placeholder:"Enter Description ",component:u.II})})]})})}})})})},D=o(52452),g=o(93156),j=o(25764),S=o(76053),E=o(54048),Z=o(52639),I=o(53247),A=o(31673),T=o(47511),F=[{label:"Edit",key:Z.A6.EDIT,show:function(){return(0,T.ZP)(T.Fm.CODES,T.qz.WRITE)}},{label:(0,f.jsx)(p.YK6,{style:{fontSize:"1.2rem"}}),key:Z.A6.DELETE,toolTip:"Delete",show:function(){return(0,T.ZP)(T.Fm.CODES,T.qz.DELETE)}}],L=[{label:"Add Code",key:Z.A6.ADD,icon:(0,f.jsx)(c.HQD,{})}],k=[{component:"select",options:[{label:"Lcodes",value:1},{label:"icd",value:2}],className:"mb-4 w-40\t",placeholder:"Code Type",filterKey:"codeType"},{component:"resetButton",label:"Reset",icon:(0,f.jsx)(S.pYJ,{}),className:"mb-4",filterKey:{codeType:""}}],O={header:Z.BI.HEADER,des:Z.BI.DELETE,buttonLabel:"Delete"},w="Import",N="Choose File to upload",R="Upload",P="Uploading",_=function e(){var n=localStorage.getItem("selectedHospitalId"),o=(0,t.useState)([]),c=(0,i.Z)(o,2),r=c[0],v=c[1],p=(0,t.useState)([]),h=(0,i.Z)(p,2),m=h[0],C=h[1],x=(0,t.useState)(!1),y=(0,i.Z)(x,2),S=y[0],_=y[1],q=(0,t.useState)(1),z=(0,i.Z)(q,2),H=z[0],M=z[1],B=(0,t.useState)(0),U=(0,i.Z)(B,2),J=U[0],V=U[1],W=(0,t.useState)(10),K=(0,i.Z)(W,2),G=K[0],Y=K[1],Q=(0,t.useState)(""),X=(0,i.Z)(Q,2),$=X[0],ee=X[1],ne=(0,t.useState)(!1),oe=(0,i.Z)(ne,2),le=oe[0],ie=oe[1],te=(0,t.useState)(!1),ae=(0,i.Z)(te,2),de=ae[0],se=ae[1],ue=(0,t.useState)(""),ce=(0,i.Z)(ue,2),re=ce[0],ve=ce[1],pe=(0,t.useState)(!1),he=(0,i.Z)(pe,2),fe=he[0],me=he[1],Ce=(0,t.useState)(!1),xe=(0,i.Z)(Ce,2),ye=xe[0],be=xe[1],De=(0,t.useState)(),ge=(0,i.Z)(De,2),je=ge[0],Se=ge[1],Ee=(0,t.useState)(""),Ze=(0,i.Z)(Ee,2),Ie=Ze[0],Ae=Ze[1],Te=(0,t.useState)({codeType:""}),Fe=(0,i.Z)(Te,2),Le=Fe[0],ke=Fe[1],Oe=(0,t.useState)(!1),we=(0,i.Z)(Oe,2),Ne=we[0],Re=we[1],Pe=(0,t.useState)(!1),_e=(0,i.Z)(Pe,2),qe=_e[0],ze=_e[1];(0,t.useEffect)((function(){var o;_(!0);var i,t={type:d.kD.CODES,limit:G,companyId:null!==(o=null===r||void 0===r?void 0:r._id)&&void 0!==o?o:n,search:$,skip:G*(H-1)};""!==(null===Le||void 0===Le?void 0:Le.codeType)&&(t.codeType=null===Le||void 0===Le||null===(i=Le.codeType)||void 0===i?void 0:i.value);(0,a.ac)(d.vh.LIST_DATA,(0,l.Z)({},t)).then((function(e){var n,o,l;console.log("ressss",e),Ae(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.lcodeSampleFile),C([]),C(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data),V(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.count)})).finally((function(){return _(!1)})),console.log("ressssppp",e)}),[$,H,G,de,Le,r]);var He=function(e,n,o){var l;n===Z.A6.EDIT&&(ve({id:null===o||void 0===o?void 0:o._id,code:null===o||void 0===o?void 0:o.code,description:null===o||void 0===o?void 0:o.description,type:(l=null===o||void 0===o?void 0:o.type,1===l?{label:"Lcodes",value:1}:{label:"icd",value:2})}),ie(!0)),n===Z.A6.DELETE&&(ve({id:null===o||void 0===o?void 0:o._id}),me(!0))},Me=[{Header:"Code",accessor:"code"},{Header:"Description",Cell:function(e){var n,o=null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original;return null!==o&&void 0!==o&&o.description?null===o||void 0===o?void 0:o.description:"-"}},{Header:"Type",accessor:"type",Cell:function(e){return 1===e.row.original.type?"Lcodes":"icd"}},{Header:"Active",Cell:function(e){return(0,f.jsx)(A.Z,{dataObj:e,setSelectedData:ve,setActiveConfirm:Re,setOpenModal:me})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,f.jsx)(D.Z,{row:e.row.original,onActionHandle:He,actionsMenu:F})}}],Be=function(){ve(""),me(!1),Re(!1)},Ue=function(){ze(!1),Se("")};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.Z,{buttonMenu:(0,T.ZP)(T.Fm.CODES,T.qz.WRITE)?L:L.slice(0,L.length-1),FilterMenu:k,setFilterCompanyId:v,filterCompanyId:r,setSearch:ee,buttonClick:function(e,n){if(n===Z.A6.ADD&&ie(!0),n===Z.A6.IMPORT&&ze(!0),n===Z.A6.DOWNLOAD){var o="".concat(null===E.Z||void 0===E.Z?void 0:E.Z.imageBaseUrl).concat(Ie),l=document.createElement("a");l.href=o,l.download="example-file.txt",l.click(),window.URL.revokeObjectURL(o)}},setFilterValue:ke,filterValue:Le}),(0,f.jsx)(s.lG,{className:"h-full",bodyClass:"h-full",children:(0,f.jsx)(s.wQ,{columns:(0,T._P)(Me,T.Fm.CODES,1),isCursor:!1,data:m,loading:S,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:H,pageSize:G,total:J},onPaginationChange:function(e){return M(e)},onSelectChange:function(e){return Y(e)}})}),(0,f.jsx)(b,{show:le,onClose:function(){ve(""),ie(!1)},refreshPage:function(){return se((function(e){return!e}))},editData:re}),(0,f.jsx)(j.Z,{isOpen:fe,onConfirmClick:function(){var e,n={type:d.kD.CODES,id:null===re||void 0===re?void 0:re.id};Ne?(e=Z.D5,n.status=+(null===re||void 0===re?void 0:re.action)):(e=Z.O7,n.status=0),(0,a.Fv)(d.vh.BLOCK_DELETE_DATA,n).then((function(n){u.Am.push((0,f.jsx)(u.P_,{type:"success",children:e})),se((function(e){return!e})),Be()}))},header:O.header,des:Ne?null===Z.uF||void 0===Z.uF?void 0:Z.uF.des:Z.BI.DELETE,onDialogClose:Be,isWarning:!Ne&&Z.BI.WARNING,buttonLabel:Ne?null===Z.uF||void 0===Z.uF?void 0:Z.uF.buttonLabel:O.buttonLabel}),(0,f.jsx)(I.Z,{uploadLoading:ye,setUploadFile:Se,isOpen:qe,header:w,des:N,onDialogClose:Ue,onConfirmClick:function(){be(!0);for(var e=new FormData,n=0;n<(null===je||void 0===je?void 0:je.length);n++)e.append("file",je[n]);(0,a.Fv)(d.vh.IMPORT_CODE,e).then((function(e){se((function(e){return!e})),be(!1),u.Am.push((0,f.jsx)(u.P_,{type:"success",children:Z.pX})),Ue()}))},buttonLabel:ye?P:R,uploadFile:je})]})}}}]);
//# sourceMappingURL=2404.8f229d8e.chunk.js.map