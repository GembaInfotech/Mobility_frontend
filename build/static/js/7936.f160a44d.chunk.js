"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[7936],{9494:(e,n,l)=>{l.d(n,{EY:()=>d,Fv:()=>t,ac:()=>i});var o=l(91181),a=l(14712);function i(e,n){return a.Z.get(e,{params:n}).then((e=>null===e||void 0===e?void 0:e.data))}function t(e,n){return a.Z.post(e,n).then((e=>null===e||void 0===e?void 0:e.data))}async function d(e){return o.Z.fetchData({url:"/search/query",method:"post",data:e})}},17936:(e,n,l)=>{l.r(n),l.d(n,{default:()=>q});var o=l(72791),a=l(73038),i=l(92506),t=l(75737),d=l.n(t),r=(l(70902),l(9494)),u=l(11723),s=l(48573),v=l.n(s),m=l(80034),c=l(40018),p=l(52639);const h=[{label:"Clinician",value:1},{label:"Technician",value:2}],b=[{name:"enrollmentNumber",label:"Enrollment Number",type:"text",component:a.II,placeholder:"Enter enrollment number",isBasic:!0},{name:"firstName",label:"First Name",type:"text",component:a.II,placeholder:"Enter first name",isBasic:!0},{name:"lastName",label:"Last Name",type:"text",component:a.II,placeholder:"Enter last name",isBasic:!0},{name:"phoneNumber",countryCode:"countryCode",label:"Mobile No.",component:"phoneNumber",placeholder:"Enter mobile no."},{name:"email",label:"Email",type:"text",component:a.II,placeholder:"Enter email",isBasic:!0},{name:"password",label:"Password",type:"password",component:"password",placeholder:"Enter Password",ishidden:!0},{name:"jobType",label:"Job Type",component:"select",option:h,placeholder:"Enter job type"},{name:"gender",label:"Gender",type:"number",component:"radio"},{name:"dob",label:"DOB",component:"datepicker"},{name:"address",label:"Address",type:"text",component:a.II,placeholder:"Enter address",textArea:!0,isBasic:!0},{name:"state",label:"State",type:"text",component:"asyncSelect",placeholder:"Enter State"},{name:"country",label:"Country",type:"text",component:a.II,placeholder:"Enter country",isBasic:!0},{name:"city",label:"City",type:"text",component:a.II,placeholder:"Enter city",isBasic:!0},{name:"pincode",label:"Pincode",type:"text",component:a.II,placeholder:"Enter pincode",isBasic:!0},{name:"alternatePhoneNumber",countryCode:"alternateCountryCode",component:"phoneNumber",label:"Alternate Mobile No.",placeholder:"Enter alternate mobile no."}];var g=l(80184);const y=e=>{let{id:n,field:l,setFieldValue:o,values:t,errors:s,touched:b}=e;const y=v()(((e,n)=>{"state"===l.name&&(0,r.ac)(u.vh.GET_CODE,{type:4,search:e}).then((e=>{var l;const o=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data.map((e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id})));n(o)})),"deviceType"===l.name&&(0,r.ac)(u.vh.GET_CODE,{type:2,search:e}).then((e=>{var l;const o=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data.map((e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.id})));n(o)}))}),300);return(0,g.jsxs)(g.Fragment,{children:["datepicker"===l.component&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.Mt,{name:l.name,inputFormat:p.zT,defaultValue:new Date(null===t||void 0===t?void 0:t[l.name]),value:new Date(null===t||void 0===t?void 0:t[l.name]),onChange:e=>o(l.name,e)})}),"radio"===l.component&&(0,g.jsx)(g.Fragment,{children:p.j9.map(((e,n)=>(0,g.jsx)(a.Y8,{className:"mr-4",name:"gender",value:e.value,onChange:e=>o(l.name,e),checked:e.value===(null===t||void 0===t?void 0:t[l.name]),children:e.label})))}),"phoneNumber"===l.component&&(0,g.jsx)(d(),{inputStyle:{width:"369px",padding:"11px 14px 11px 60px"},enableSearch:!0,country:"us",countryCodeEditable:!0,value:`${null===t||void 0===t?void 0:t[l.name]}`,onChange:(e,n)=>{o(l.name,e),o(l.countryCode,null===n||void 0===n?void 0:n.dialCode)}}),"upload"===l.component&&(0,g.jsxs)(a.BZ,{className:"mb-4",children:[(0,g.jsx)(a.II,{value:t[l.name]}),(0,g.jsx)(a.gq,{uploadLimit:1,showList:!1,accept:["image/jpeg","image/png"],name:l.name,onChange:e=>{let n=new FormData;for(let l=0;l<(null===e||void 0===e?void 0:e.length);l++)n.append("image",e[l]);(0,r.Fv)(u.vh.UPLOAD_IMAGE,n).then((e=>{var n,a;let i=[];i=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[...i,...null===e||void 0===e?void 0:e.data]:[...i,null===e||void 0===e?void 0:e.data],o(l.name,null===(a=i[0])||void 0===a?void 0:a.original)}))}})]}),"asyncSelect"===l.component&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(i.gN,{component:a.Ph,autoComplete:"off",placeholder:l.placeholder,defaultOptions:!0,cacheOptions:!0,loadOptions:y,componentAs:m.Z,onChange:e=>{o(l.name,e)},name:l.name,value:null===t||void 0===t?void 0:t[l.name]})}),"password"===l.component&&!n&&(0,g.jsx)(i.gN,{autoComplete:"off",name:"password",placeholder:"Password",component:c.WU}),"select"===l.component&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(i.gN,{component:a.Ph,autoComplete:"off",placeholder:l.placeholder,options:l.option,onChange:e=>{o(l.name,e)},name:l.name,value:h.find((e=>(null===e||void 0===e?void 0:e.value)===(null===t||void 0===t?void 0:t[l.name])))})})]})};var f=l(57689),x=l(81724),N=l(78820),C=l(54048);const j=e=>{var n,l;let{id:o,touched:i,errors:t,values:d,setFieldValue:s,name:v}=e;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"grid grid-cols-2 mb-5 gap-x-4",children:[(0,g.jsx)(a.xJ,{label:"Upload Image",invalid:null===t||void 0===t?void 0:t.image,errorMessage:null===t||void 0===t?void 0:t.image,children:(0,g.jsx)(a.gq,{uploadLimit:1,draggable:!0,name:"image",showList:!1,onChange:e=>(e=>{const n=new FormData;for(let l=0;l<(null===e||void 0===e?void 0:e.length);l++)n.append("image",e[l]);(0,r.Fv)(u.vh.UPLOAD_IMAGE,n).then((e=>{var n;let l=[];l=null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length?[...l,...null===e||void 0===e?void 0:e.data]:[...l,null===e||void 0===e?void 0:e.data],s("image",l)}))})(e),children:(0,g.jsx)(c.A9,{className:"mx-auto",src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"})})}),(null===d||void 0===d||null===(n=d.image)||void 0===n?void 0:n.length)>0&&(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(a.Zb,{className:"mt-6 mb-5 ",style:{height:"112px"},children:(0,g.jsx)("div",{className:"flex flex-wrap",children:null===d||void 0===d||null===(l=d.image)||void 0===l?void 0:l.map(((e,n,l)=>(0,g.jsxs)("div",{className:"flex items-center justify-between  p-2 border-2 rounded-xl  ",children:[(0,g.jsx)("div",{className:"flex items-center ",children:(0,g.jsx)("img",{className:"w-14 h-12 rounded-xl mr-2",alt:null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original,src:`${C.Z.apiBaseUrl}bucket/${null!==e&&void 0!==e&&e.imageUrlOriginal?null===e||void 0===e?void 0:e.imageUrlOriginal:null===e||void 0===e?void 0:e.original}`})}),(0,g.jsx)(N.oHP,{className:"text-sm cursor-pointer",onClick:()=>{return n=e,void(0,r.Fv)(u.vh.DELETE_IMAGE,{original:null===n||void 0===n?void 0:n.original,thumbnail:null===n||void 0===n?void 0:n.thumbnail}).then((()=>{var e;const l=null===d||void 0===d||null===(e=d.images)||void 0===e?void 0:e.filter((e=>(null===e||void 0===e?void 0:e.original)!==(null===n||void 0===n?void 0:n.original)));s("image",l)}));var n}})]},n)))})})})]})})},Z=x.Ry().shape({firstName:x.Z_().required("Required"),lastName:x.Z_().required("Required"),dob:x.Z_().required("Required"),gender:x.Z_().required("Required"),email:x.Z_().email().required("Required"),phoneNumber:x.Z_().required(),enrollmentNumber:x.Z_().required("Required")}),E=x.Ry().shape({firstName:x.Z_().required("Required"),lastName:x.Z_().required("Required"),dob:x.Z_().required("Required"),gender:x.Z_().required("Required"),email:x.Z_().email().required("Required"),phoneNumber:x.Z_().required(),enrollmentNumber:x.Z_().required("Required")}),S={jobType:1,firstName:"",lastName:"",email:"",password:"",gender:1,dob:new Date,address:"",state:"",phoneNumber:"",pincode:"",city:"",countryCode:"+1",alternateCountryCode:"+1",alternatePhoneNumber:"",enrollmentNumber:""},q=()=>{const{id:e}=(0,f.UO)(),[n,l]=(0,o.useState)({}),[t,d]=(0,o.useState)(!0),s=(0,f.s0)();(0,o.useEffect)((()=>{e?(0,r.ac)(u.vh.GET_USERS,{userType:2,userId:e}).then((e=>{var n;const o=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data;l({jobType:null===o||void 0===o?void 0:o.jobType,firstName:null===o||void 0===o?void 0:o.firstName,lastName:null===o||void 0===o?void 0:o.lastName,email:null===o||void 0===o?void 0:o.email,gender:null===o||void 0===o?void 0:o.gender,dob:null===o||void 0===o?void 0:o.dob,image:null!==o&&void 0!==o&&o.imageUrlOriginal?[{original:null===o||void 0===o?void 0:o.imageUrlOriginal,thumbnail:null===o||void 0===o?void 0:o.imageUrlThumbnail}]:[],countryCode:null!==(null===o||void 0===o?void 0:o.countryCode)?null===o||void 0===o?void 0:o.countryCode:"+1",country:null===o||void 0===o?void 0:o.country,pincode:null===o||void 0===o?void 0:o.pincode,city:null===o||void 0===o?void 0:o.city,state:{label:null===o||void 0===o?void 0:o.state,value:null===o||void 0===o?void 0:o.state},alternateCountryCode:null!==(null===o||void 0===o?void 0:o.alternateCountryCode)?null===o||void 0===o?void 0:o.alternateCountryCode:"+1",address:null===o||void 0===o?void 0:o.address,phoneNumber:null!==(null===o||void 0===o?void 0:o.countryCode)&&null!==(null===o||void 0===o?void 0:o.phoneNumber)?`${null===o||void 0===o?void 0:o.countryCode}${null===o||void 0===o?void 0:o.phoneNumber}`:"",alternatePhoneNumber:null!==(null===o||void 0===o?void 0:o.alternateCountryCode)&&null!==(null===o||void 0===o?void 0:o.alternatePhoneNumber)?`${null===o||void 0===o?void 0:o.alternateCountryCode}${null===o||void 0===o?void 0:o.alternatePhoneNumber}`:"",enrollmentNumber:null===o||void 0===o?void 0:o.enrollmentNumber})})).finally((()=>{d(!1)})):d(!1)}),[e]);const v=(0,i.TA)({initialValues:e?n:S,enableReinitialize:!0,validationSchema:e?E:Z,onSubmit:n=>{var l,o,i,t,d,v;(e&&(n.id=e),n.alternatePhoneNumber=null===n||void 0===n||null===(l=n.alternatePhoneNumber)||void 0===l?void 0:l.replace(null===n||void 0===n?void 0:n.alternateCountryCode,""),n.phoneNumber=null===n||void 0===n||null===(o=n.phoneNumber)||void 0===o?void 0:o.replace(null===n||void 0===n?void 0:n.countryCode,""),""===n.alternatePhoneNumber&&delete n.alternatePhoneNumber,""===n.phoneNumber&&delete n.phoneNumber,null!==n&&void 0!==n&&null!==(i=n.alternateCountryCode)&&void 0!==i&&i.includes("+")||(n.alternateCountryCode=`+${n.alternateCountryCode}`),null!==n&&void 0!==n&&null!==(t=n.countryCode)&&void 0!==t&&t.includes("+")||(n.countryCode=`+${n.countryCode}`),n.state)&&(n.state=null===n||void 0===n||null===(v=n.state)||void 0===v?void 0:v.label);null!==n&&void 0!==n&&n.image&&(null===n||void 0===n||null===(d=n.image)||void 0===d?void 0:d.length)>0&&(n.original=n.image[0].original,n.thumbnail=n.image[0].thumbnail),delete n.image,(0,r.Fv)(u.vh.ADD_EDIT_STAFF,{...n}).then((n=>{a.Am.push((0,g.jsx)(a.P_,{type:"success",children:e?p.D5:p.Te})),s(-1)}))}}),{errors:m,touched:c,values:h,handleSubmit:x,setFieldValue:N,isSubmitting:C}=v;return(0,g.jsx)(i.Hy,{value:v,children:(0,g.jsxs)(i.l0,{className:"p-1",onSubmit:x,autoComplete:"off",noValidate:!0,children:[(0,g.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,g.jsx)("h3",{children:e?"Edit Staff":"Add Staff"}),(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(a.zx,{size:"sm",variant:"solid",onClick:()=>s(-1),type:"button",children:"Back / Cancel"}),(0,g.jsx)(a.zx,{size:"sm",variant:"solid",style:{marginLeft:"5px"},loading:C,type:"submit",children:e?"Update":"Save"})]})]}),(0,g.jsxs)("div",{children:[t&&(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(a.$j,{size:"3.25rem"})}),!t&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(a.Zb,{className:"mt-2.5 w-3/4 ",children:(0,g.jsxs)(a.Yb,{className:" md:w-full lg:w-1/2",children:[(0,g.jsx)("h5",{className:"mb-4",children:"Personal Information"}),(0,g.jsx)(j,{touched:c,errors:m,values:h,setFieldValue:N}),b.map(((n,l,o)=>(0,g.jsxs)(g.Fragment,{children:[(null===n||void 0===n?void 0:n.title)&&(0,g.jsx)("h6",{className:"my-3",children:null===n||void 0===n?void 0:n.title}),(0,g.jsx)(a.xJ,{label:"password"===n.component&&e?null:null===n||void 0===n?void 0:n.label,className:"ml-3 ",invalid:(null===m||void 0===m?void 0:m[null===n||void 0===n?void 0:n.name])&&(null===c||void 0===c?void 0:c[null===n||void 0===n?void 0:n.name]),errorMessage:null===m||void 0===m?void 0:m[null===n||void 0===n?void 0:n.name],children:n.isBasic?(0,g.jsx)(i.gN,{textArea:!(null===n||void 0===n||!n.textArea),type:null===n||void 0===n?void 0:n.type,autoComplete:"off",name:null===n||void 0===n?void 0:n.name,placeholder:null===n||void 0===n?void 0:n.placeholder,component:null===n||void 0===n?void 0:n.component}):(0,g.jsx)(y,{id:e,errors:m,field:n,setFieldValue:N,values:h})},l)]})))]})})})]})]})})}},80034:(e,n,l)=>{l.d(n,{Z:()=>c});var o=l(87462),a=l(72791),i=l(69880),t=l(8003),d=l(4942),r=l(1413),u=l(29439),s=l(45987),v=l(74999),m=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];l(54164),l(51672);const c=(0,a.forwardRef)((function(e,n){var l=function(e){var n=e.defaultOptions,l=void 0!==n&&n,o=e.cacheOptions,i=void 0!==o&&o,t=e.loadOptions;e.options;var c=e.isLoading,p=void 0!==c&&c,h=e.onInputChange,b=e.filterOption,g=void 0===b?null:b,y=(0,s.Z)(e,m),f=y.inputValue,x=(0,a.useRef)(void 0),N=(0,a.useRef)(!1),C=(0,a.useState)(Array.isArray(l)?l:void 0),j=(0,u.Z)(C,2),Z=j[0],E=j[1],S=(0,a.useState)("undefined"!==typeof f?f:""),q=(0,u.Z)(S,2),w=q[0],I=q[1],F=(0,a.useState)(!0===l),O=(0,u.Z)(F,2),_=O[0],A=O[1],P=(0,a.useState)(void 0),R=(0,u.Z)(P,2),T=R[0],D=R[1],k=(0,a.useState)([]),U=(0,u.Z)(k,2),B=U[0],L=U[1],$=(0,a.useState)(!1),M=(0,u.Z)($,2),V=M[0],z=M[1],G=(0,a.useState)({}),J=(0,u.Z)(G,2),Y=J[0],H=J[1],W=(0,a.useState)(void 0),K=(0,u.Z)(W,2),Q=K[0],X=K[1],ee=(0,a.useState)(void 0),ne=(0,u.Z)(ee,2),le=ne[0],oe=ne[1];i!==le&&(H({}),oe(i)),l!==Q&&(E(Array.isArray(l)?l:void 0),X(l)),(0,a.useEffect)((function(){return N.current=!0,function(){N.current=!1}}),[]);var ae=(0,a.useCallback)((function(e,n){if(!t)return n();var l=t(e,n);l&&"function"===typeof l.then&&l.then(n,(function(){return n()}))}),[t]);(0,a.useEffect)((function(){!0===l&&ae(w,(function(e){N.current&&(E(e||[]),A(!!x.current))}))}),[]);var ie=(0,a.useCallback)((function(e,n){var l=(0,v.L)(e,n,h);if(!l)return x.current=void 0,I(""),D(""),L([]),A(!1),void z(!1);if(i&&Y[l])I(l),D(l),L(Y[l]),A(!1),z(!1);else{var o=x.current={};I(l),A(!0),z(!T),ae(l,(function(e){N&&o===x.current&&(x.current=void 0,A(!1),D(l),L(e||[]),z(!1),H(e?(0,r.Z)((0,r.Z)({},Y),{},(0,d.Z)({},l,e)):Y))}))}}),[i,ae,T,Y,h]),te=V?[]:w&&T?B:Z||[];return(0,r.Z)((0,r.Z)({},y),{},{options:te,isLoading:_||p,onInputChange:ie,filterOption:g})}(e),c=(0,t.u)(l);return a.createElement(i.S,(0,o.Z)({ref:n},c))}))}}]);
//# sourceMappingURL=7936.f160a44d.chunk.js.map