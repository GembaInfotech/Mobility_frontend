"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[6505],{25764:function(e,n,t){t(72791);var i=t(73038),o=t(80184);n.Z=function(e){var n=e.header,t=e.des,l=e.onDialogClose,a=e.isWarning,r=e.onConfirmClick,c=e.isOpen,u=e.buttonLabel;return(0,o.jsx)(i.Vq,{isOpen:c,onClose:l,onRequestClose:l,contentClassName:"pb-0 px-0 mt-36 min-w-36",children:(0,o.jsxs)("div",{className:"px-5 pb-5",children:[(0,o.jsx)("h5",{className:"mb-4",children:n}),(0,o.jsx)("p",{children:t}),a&&(0,o.jsx)("p",{className:"text-red-700",children:a}),(0,o.jsxs)("div",{className:"text-right mt-6",children:[(0,o.jsx)(i.zx,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:l,children:"Cancel"}),(0,o.jsx)(i.zx,{variant:"solid",onClick:r,children:u})]})]})})}},52452:function(e,n,t){var i=t(23532),o=t(73038),l=t(80184);n.Z=function(e){var n=e.row,t=e.onActionHandle,a=e.actionsMenu,r=(0,i.Z)().textTheme;return(0,l.jsx)("div",{className:"flex items-center justify-between",children:null===a||void 0===a?void 0:a.map((function(e,i){var a,c;if(null===(a=null===e||void 0===e||null===(c=e.show)||void 0===c?void 0:c.call(e))||void 0===a||a)return(0,l.jsx)(o.u,{title:null===e||void 0===e?void 0:e.toolTip,visible:!(null===e||void 0===e||!e.toolTip),children:null!==e&&void 0!==e&&e.isImage?(0,l.jsx)("img",{src:e.label,alt:"view Icon",style:{maxWidth:"20px"},className:"cursor-pointer mx-0.5",onClick:function(i){return t(i,e.key,n)}}):(0,l.jsx)("span",{className:"".concat(r," cursor-pointer select-none font-semibold ml-2 "),onClick:function(i){return t(i,e.key,n)},children:e.label})})}))})}},31673:function(e,n,t){t(72791);var i=t(52639),o=t(73038),l=t(80184);n.Z=function(e){var n,t,a=e.dataObj,r=e.setSelectedData,c=e.setActiveConfirm,u=e.setOpenModal,s=null===a||void 0===a||null===(n=a.row)||void 0===n||null===(t=n.original)||void 0===t?void 0:t._id,d=i.uN.find((function(e,n){var t,i;return e.identifier===(null===a||void 0===a||null===(t=a.row)||void 0===t||null===(i=t.original)||void 0===i?void 0:i.status)}));return(0,l.jsx)(o.XZ,{checked:null===d||void 0===d?void 0:d.value,onChange:function(e){return function(e,n,t){var i="";1===n&&(i=2),2===n&&(i=1),r({id:t,action:i}),c(!0),u(!0)}(0,null===d||void 0===d?void 0:d.identifier,s)}})}},93156:function(e,n,t){var i=t(4942),o=t(1413),l=t(72791),a=t(73038),r=t(10515),c=t(76053),u=t(9494),s=t(11723),d=t(763),v=t(80034),f=t(52639),h=t(80184),m=function(e){var n=e.buttonMenu,t=e.buttonClick;return(0,h.jsx)("div",{className:"mb-4",children:null===n||void 0===n?void 0:n.map((function(e,n,i){return(0,h.jsx)(a.zx,{size:"sm",variant:"solid",onClick:function(n){return t(n,e.key)},style:{marginLeft:"5px"},icon:e.icon,children:e.label})}))})},p=function(e){var n=e.setSearch,t=e.FilterMenu,m=e.setFilterValue,p=e.filterValue,x=e.asyncApiType,y=e.searchPlaceholder,j=(0,d.debounce)((function(e,n){(0,u.ac)(1===x?s.vh.GET_USERS:s.vh.GET_CATEGORIES,{search:e}).then((function(e){var t;n(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)}))}),300);return(0,h.jsxs)("div",{className:"md:flex gap-4 w-full",children:[(0,h.jsx)(r.Z,{placeholder:y,onChange:function(e){return n(e)}}),null===t||void 0===t?void 0:t.map((function(e,t){return(0,h.jsxs)(l.Fragment,{children:["select"===e.component&&(0,h.jsx)(a.Ph,{autoComplete:"off",size:"sm",className:e.className,placeholder:e.placeholder,options:e.options,value:p[null===e||void 0===e?void 0:e.filterKey],onChange:function(n){m((0,o.Z)((0,o.Z)({},p),{},(0,i.Z)({},null===e||void 0===e?void 0:e.filterKey,n)))}}),"resetButton"===e.component&&(0,h.jsx)(a.zx,{size:"sm",className:e.className,onClick:function(){m(null===e||void 0===e?void 0:e.filterKey),n("")},icon:(0,h.jsx)(c.pYJ,{}),children:e.label}),"asyncSelect"===e.component&&(0,h.jsx)(a.Ph,{autoComplete:"off",placeholder:e.placeholder,defaultOptions:!0,cacheOptions:!0,size:"sm",className:e.className,value:null===p||void 0===p?void 0:p[null===e||void 0===e?void 0:e.filterKey],loadOptions:j,componentAs:v.Z,getOptionLabel:function(n){return"".concat(null===n||void 0===n?void 0:n[e.label]," ").concat(null!==e&&void 0!==e&&e.label1?null===n||void 0===n?void 0:n[e.label1]:"")},getOptionValue:function(e){return null===e||void 0===e?void 0:e.id},onChange:function(n){m((0,o.Z)((0,o.Z)({},p),{},(0,i.Z)({},null===e||void 0===e?void 0:e.filterKey,n)))}}),"datePicker"===e.component&&(0,h.jsx)(a.Mt,{inputtable:!0,clearable:!0,selected:p[null===e||void 0===e?void 0:e.filterKey],onChange:function(n){m((0,o.Z)((0,o.Z)({},p),{},(0,i.Z)({},null===e||void 0===e?void 0:e.filterKey,n)))},size:"sm",placeholder:"Patient DOB (MM/DD/YYYY)",name:"patientDob",className:e.className,placeholderText:e.placeholder,dateFormat:f.zT}),"input"===e.component&&(0,h.jsx)(a.II,{size:"sm",className:e.className,placeholder:e.placeholder,value:p[null===e||void 0===e?void 0:e.filterKey],onChange:function(n){m((0,o.Z)((0,o.Z)({},p),{},(0,i.Z)({},null===e||void 0===e?void 0:e.filterKey,n.target.value)))}})]},t)}))]})};n.Z=function(e){var n=e.buttonMenu,t=e.FilterMenu,i=e.setSearch,o=e.buttonClick,l=e.setFilterValue,a=e.filterValue,r=e.asyncApiType,c=e.searchPlaceholder;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"md:flex items-center justify-end",children:(0,h.jsx)(m,{buttonMenu:n,buttonClick:o})}),(0,h.jsx)("div",{className:"items-center lg:flex",children:(0,h.jsx)(p,{searchPlaceholder:c,setSearch:i,FilterMenu:t,setFilterValue:l,filterValue:a,asyncApiType:r})})]})}},10515:function(e,n,t){t(72791);var i=t(73038),o=t(58617),l=t(48573),a=t.n(l),r=t(80184);n.Z=function(e){var n=e.onChange,t=e.placeholder,l=a()((function(e){null===n||void 0===n||n(e)}),500);return(0,r.jsx)(i.II,{className:"max-w-md md:w-96 mb-4",size:"sm",placeholder:t?"".concat(t):"Filter by NAL, LCode, Referring Physician",prefix:(0,r.jsx)(o.O6C,{className:"text-lg"}),onChange:function(e){l(e.target.value)}})}},9494:function(e,n,t){t.d(n,{EY:function(){return u},Fv:function(){return c},ac:function(){return r}});var i=t(74165),o=t(15861),l=t(91181),a=t(14712);function r(e,n){return a.Z.get(e,{params:n}).then((function(e){return null===e||void 0===e?void 0:e.data}))}function c(e,n){return a.Z.post(e,n).then((function(e){return null===e||void 0===e?void 0:e.data}))}function u(e){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.Z.fetchData({url:"/search/query",method:"post",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},66505:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(29439),o=t(72791),l=t(9494),a=t(11723),r=t(40018),c=t(73038),u=t(58617),s=t(88580),d=t(92506),v=t(62797),f=t(78820),h=t(80184),m=function(e){var n=e.editData,t=e.onCancel,i=e.onSave,o=e.isLoading;return(0,h.jsxs)("div",{className:"w-full text-right",children:[(0,h.jsx)(c.zx,{className:"mr-2",onClick:t,disabled:o,icon:(0,h.jsx)(f.SV5,{}),children:"Cancel"}),(0,h.jsx)(c.zx,{variant:"solid",type:"submit",onClick:i,disabled:o,icon:(0,h.jsx)(f.JMf,{}),children:null!==n&&void 0!==n&&n.id?"Update":"Save"})]})},p=v.Ry().shape({location:v.Z_().required("Required"),lcode:v.Z_().required("Required"),quantity:v.Rx().required("Required").min(0,"Quantity cannot be negative")}),x={location:"",lcode:"",quantity:0},y=function(e){var n=e.editData,t=e.show,u=e.onClose,v=e.refreshPage,f=(0,o.useRef)(),y=(0,o.useState)(!1),j=(0,i.Z)(y,2),b=j[0],C=j[1],g=(0,o.useState)([]),N=(0,i.Z)(g,2),A=N[0],Z=N[1],D=(0,o.useState)([]),S=(0,i.Z)(D,2),E=S[0],T=S[1];(0,o.useEffect)((function(){t&&((0,l.ac)(a.vh.LIST_DATA,{type:a.kD.LOCATIONS}).then((function(e){if(e&&e.data&&e.data.data){var n=e.data.data.map((function(e){return{label:e.name,value:e._id}}));Z(n)}else c.Am.push((0,h.jsx)(c.P_,{type:"error",children:"No locations found!"}))})).catch((function(e){console.error("Error fetching locations: ",e),c.Am.push((0,h.jsx)(c.P_,{type:"error",children:"Failed to load locations"}))})),(0,l.ac)(a.vh.LIST_DATA,{type:a.kD.CODES}).then((function(e){if(e&&e.data&&e.data.data){console.log(e);var n=Array.isArray(e.data.data)?e.data.data.filter((function(e){return 1===e.type})).map((function(e){return{label:e.code,value:e._id}})):[];T(n)}else c.Am.push((0,h.jsx)(c.P_,{type:"error",children:"No lcodes found!"}))})).catch((function(e){console.error("Error fetching lcodes: ",e),c.Am.push((0,h.jsx)(c.P_,{type:"error",children:"Failed to load lcodes"}))})))}),[t]);return(0,h.jsx)(c.dy,{isOpen:t,onClose:u,onRequestClose:u,closable:!1,bodyClass:"p-0",title:null!==n&&void 0!==n&&n.id?"Edit Location":"Add Location",footer:(0,h.jsx)(m,{onCancel:u,onSave:function(){var e;return null===f||void 0===f||null===(e=f.current)||void 0===e?void 0:e.submitForm()},isLoading:b,editData:n}),children:(0,h.jsx)(r.lG,{children:(0,h.jsx)(d.J9,{innerRef:f,initialValues:n||x,validationSchema:p,onSubmit:function(e){e.name,e.address,e.storeManager;var n=e.location,t=e.lcode,i=e.quantity,o=e.id;C(!0);var r={location:n,lcode:t,quantity:i,modelType:a.kD.INVENTORY};o&&(r.id=o),(0,l.Fv)(a.vh.ADD_EDIT_DATA,r).then((function(){u(),v(),c.Am.push((0,h.jsx)(c.P_,{type:"success",children:"Inventory saved!"}))})).finally((function(){return C(!1)}))},enableReinitialize:!0,children:function(e){var n=e.errors,t=e.touched,i=e.setFieldValue,o=e.values;return(0,h.jsx)(d.l0,{className:"p-5",children:(0,h.jsxs)(c.Yb,{children:[(0,h.jsx)(c.xJ,{label:"Location",invalid:(null===n||void 0===n?void 0:n.location)&&(null===t||void 0===t?void 0:t.location),errorMessage:null===n||void 0===n?void 0:n.location,children:(0,h.jsx)(d.gN,{placeholder:"Select Location",options:A,name:"location",component:s.Z,value:A.find((function(e){return e.value===o.location})),onChange:function(e){return i("location",e.value)}})}),(0,h.jsx)(c.xJ,{label:"Lcode",invalid:(null===n||void 0===n?void 0:n.lcode)&&(null===t||void 0===t?void 0:t.lcode),errorMessage:null===n||void 0===n?void 0:n.lcode,children:(0,h.jsx)(d.gN,{placeholder:"Select Lcode",options:E,component:s.Z,name:"lcode",value:E.find((function(e){return e.value===o.lcode})),onChange:function(e){return i("lcode",e.value)}})}),(0,h.jsx)(c.xJ,{label:"Quantity",invalid:(null===n||void 0===n?void 0:n.quantity)&&(null===t||void 0===t?void 0:t.quantity),errorMessage:null===n||void 0===n?void 0:n.quantity,children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(c.zx,{type:"button",onClick:function(){return i("quantity",Math.max(0,o.quantity-1))},className:"mr-2",children:"-"}),(0,h.jsx)(d.gN,{type:"number",name:"quantity",min:"0",component:c.II,className:"text-center"}),(0,h.jsx)(c.zx,{type:"button",onClick:function(){return i("quantity",o.quantity+1)},className:"ml-2",children:"+"})]})})]})})}})})})},j=t(52452),b=t(93156),C=t(25764),g=t(52639),N=t(31673),A=t(47511),Z=t(57689),D=[{label:"Edit",key:g.A6.EDIT,show:function(){return(0,A.ZP)(A.Fm.LOCATIONS,A.qz.WRITE)}},{label:(0,h.jsx)(f.YK6,{style:{fontSize:"1.2rem"}}),key:g.A6.DELETE,toolTip:"Delete",show:function(){return(0,A.ZP)(A.Fm.LOCATIONS,A.qz.DELETE)}},{label:"View",key:g.A6.VIEW,show:function(){return(0,A.ZP)(A.Fm.LOCATIONS,A.qz.WRITE)}}],S=(0,A.ZP)(A.Fm.LOCATIONS,A.qz.WRITE)?[{label:"Add Inventory",key:g.A6.ADD,icon:(0,h.jsx)(u.HQD,{})}]:[],E={header:g.BI.HEADER,des:g.BI.DELETE,buttonLabel:"Delete"},T=function(){var e=(0,o.useState)([]),n=(0,i.Z)(e,2),t=n[0],u=n[1],s=(0,o.useState)(!1),d=(0,i.Z)(s,2),v=d[0],f=d[1],m=(0,o.useState)(1),p=(0,i.Z)(m,2),x=p[0],T=p[1],k=(0,o.useState)(0),I=(0,i.Z)(k,2),L=I[0],O=I[1],q=(0,o.useState)(10),F=(0,i.Z)(q,2),w=F[0],_=F[1],z=(0,o.useState)(""),P=(0,i.Z)(z,2),R=P[0],M=P[1],V=(0,o.useState)(!1),K=(0,i.Z)(V,2),Y=K[0],H=K[1],W=(0,o.useState)(!1),B=(0,i.Z)(W,2),G=B[0],J=B[1],Q=(0,o.useState)(""),U=(0,i.Z)(Q,2),X=U[0],$=U[1],ee=(0,o.useState)(!1),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],oe=(0,o.useState)(!1),le=(0,i.Z)(oe,2),ae=le[0],re=le[1],ce=(0,Z.s0)();(0,o.useEffect)((function(){f(!0),(0,l.ac)(a.vh.LIST_DATA,{type:a.kD.INVENTORY,limit:w,search:R,skip:w*(x-1)}).then((function(e){var n,t;u([]),u(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),O(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count)})).finally((function(){return f(!1)}))}),[R,x,w,G]);var ue=function(e,n,t){n===g.A6.EDIT&&($({id:null===t||void 0===t?void 0:t._id,location:null===t||void 0===t?void 0:t.location,lcode:null===t||void 0===t?void 0:t.lcode,quantity:null===t||void 0===t?void 0:t.quantity}),H(!0)),n===g.A6.DELETE&&($({id:null===t||void 0===t?void 0:t._id}),ie(!0)),n===g.A6.VIEW&&ce("/app/inventory/inventoryDetail/".concat(null===t||void 0===t?void 0:t._id))},se=[{Header:"Location",accessor:"location"},{Header:"LCode",accessor:"lcode"},{Header:"Quantity",accessor:"quantity"},{Header:"Active",Cell:function(e){return(0,h.jsx)(N.Z,{dataObj:e,setSelectedData:$,setActiveConfirm:re,setOpenModal:ie})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,h.jsx)(j.Z,{row:e.row.original,onActionHandle:ue,actionsMenu:D})}}],de=function(){$(""),ie(!1),re(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.Z,{buttonMenu:S,setSearch:M,buttonClick:function(e,n){n===g.A6.ADD&&H(!0)}}),(0,h.jsx)(r.lG,{className:"h-full",bodyClass:"h-full",children:(0,h.jsx)(r.wQ,{columns:(0,A._P)(se,A.Fm.LOCATIONS,1),isCursor:!1,data:t,loading:v,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:x,pageSize:w,total:L},onPaginationChange:function(e){return T(e)},onSelectChange:function(e){return _(e)}})}),(0,h.jsx)(y,{show:Y,onClose:function(){$(""),H(!1)},refreshPage:function(){return J((function(e){return!e}))},editData:X}),(0,h.jsx)(C.Z,{isOpen:te,onConfirmClick:function(){var e,n={type:a.kD.INVENTORY,id:null===X||void 0===X?void 0:X.id};ae?(e=g.D5,n.status=+(null===X||void 0===X?void 0:X.action)):(e=g.O7,n.status=0),(0,l.Fv)(a.vh.BLOCK_DELETE_DATA,n).then((function(n){c.Am.push((0,h.jsx)(c.P_,{type:"success",children:e})),J((function(e){return!e})),de()}))},header:E.header,des:ae?null===g.uF||void 0===g.uF?void 0:g.uF.des:E.des,onDialogClose:de,isWarning:!ae&&g.BI.WARNING,buttonLabel:ae?null===g.uF||void 0===g.uF?void 0:g.uF.buttonLabel:E.buttonLabel})]})}}}]);
//# sourceMappingURL=6505.d0af2186.chunk.js.map