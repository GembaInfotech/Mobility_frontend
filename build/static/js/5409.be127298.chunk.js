"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[5409],{9494:function(e,t,n){n.d(t,{EY:function(){return d},Fv:function(){return u},ac:function(){return l}});var i=n(74165),a=n(15861),o=n(91181),r=n(14712);function l(e,t){return r.Z.get(e,{params:t}).then((function(e){return null===e||void 0===e?void 0:e.data}))}function u(e,t){return r.Z.post(e,t).then((function(e){return null===e||void 0===e?void 0:e.data}))}function d(e){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.fetchData({url:"/search/query",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55409:function(e,t,n){n.r(t);var i=n(29439),a=n(72791),o=n(92506),r=n(62797),l=n(57689),u=n(16146),d=n(78820),s=n(9494),c=n(11723),p=n(52639),v=n(80184),h=r.Ry().shape({code:r.Z_().required("L Code is required"),stockType:r.Ry().required("Stock Entry Type is required"),quantity:r.Rx().required("Quantity is required").positive("Quantity must be positive").integer("Quantity must be an integer"),location:r.Z_().required("Location is required")}),m={code:"",description:"",stockType:{label:"Material Receipt",value:1},quantity:"",location:"",uom:"",uomId:""};t.default=function(e){e.onClose,e.refreshPage;var t,n=(0,l.UO)().id,r=(0,a.useState)(!1),f=(0,i.Z)(r,2),y=f[0],x=(f[1],(0,a.useState)([])),j=(0,i.Z)(x,2),b=j[0],I=j[1],S=(0,a.useState)([]),T=(0,i.Z)(S,2),k=T[0],q=T[1],A=(0,a.useState)(m),_=(0,i.Z)(A,2),g=_[0],D=_[1],C=(0,l.s0)(),N=(0,l.TH)();(0,a.useEffect)((function(){if(n){var e,t,i,a=N.state.editData;D({code:(null===a||void 0===a||null===(e=a.lcodeId)||void 0===e?void 0:e._id)||"",description:(null===(t=a.lcodeId)||void 0===t?void 0:t.description)||"",stockType:{label:"Material Receipt",value:1},quantity:a.quantity||"",location:(null===(i=a.locationId)||void 0===i?void 0:i._id)||"",modelType:c.kD.STOCK_ENTRY})}(0,s.ac)(c.vh.LIST_DATA,{type:c.kD.CODES}).then((function(e){if(e&&e.data&&Array.isArray(e.data.data)){var t=e.data.data.filter((function(e){return 1===e.type})).map((function(e){var t,n;return{label:e.code,value:e._id,description:e.description,uom:null===e||void 0===e||null===(t=e.uomId)||void 0===t?void 0:t.name,uomId:null===e||void 0===e||null===(n=e.uomId)||void 0===n?void 0:n._id}}));I(t)}else u.Am.push((0,v.jsx)(u.P_,{type:"error",children:"No Materials found!"}))})).catch((function(e){console.error("Error fetching materials:",e),u.Am.push((0,v.jsx)(u.P_,{type:"error",children:"Failed to load Materials"}))})),(0,s.ac)(c.vh.LIST_DATA,{type:c.kD.LOCATIONS}).then((function(e){if(e&&e.data&&Array.isArray(e.data.data)){var t=e.data.data.map((function(e){return{label:e.name,value:e._id}}));q(t)}else u.Am.push((0,v.jsx)(u.P_,{type:"error",children:"No Warehouses found!"}))})).catch((function(e){console.error("Error fetching warehouses:",e),u.Am.push((0,v.jsx)(u.P_,{type:"error",children:"Failed to load Warehouses"}))}))}),[n,null===(t=N.state)||void 0===t?void 0:t.editData]);return(0,v.jsx)(o.J9,{initialValues:g,validationSchema:h,onSubmit:function(e,t){var i,a=t.setSubmitting,o={lcodeId:e.code,stockType:null===(i=e.stockType)||void 0===i?void 0:i.value,quantity:e.quantity,locationId:e.location,uomId:e.uomId,modelType:c.kD.STOCK_ENTRY};n&&(o.id=n),(0,s.Fv)(c.vh.ADD_EDIT_DATA,o).then((function(e){u.Am.push((0,v.jsx)(u.P_,{type:"success",children:n?p.D5:p.Te})),C("/app/inventory/stockEntry")})).catch((function(e){u.Am.push((0,v.jsx)(u.P_,{type:"error",children:e}))})).finally((function(){a(!1)}))},enableReinitialize:!0,children:function(e){var t=e.errors,n=e.touched,i=e.values,a=e.setFieldValue,r=e.isSubmitting;return(0,v.jsxs)(o.l0,{children:[(0,v.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,v.jsx)("h3",{children:g.code?"Edit Stock":"Add Stock"}),(0,v.jsxs)("div",{className:"flex",children:[(0,v.jsx)(u.zx,{size:"sm",className:"ltr:mr-3 rtl:ml-3",onClick:function(){return C(-1)},icon:(0,v.jsx)(d.SV5,{}),type:"button",children:"Cancel"}),(0,v.jsx)(u.zx,{size:"sm",variant:"solid",loading:r||y,icon:(0,v.jsx)(d.JMf,{}),type:"submit",children:g.code?"Update":"Save"})]})]}),(0,v.jsx)(u.Zb,{className:"mt-2.5 w-3/4",children:(0,v.jsxs)(u.Yb,{className:"md:w-full lg:w-1/2",children:[(0,v.jsx)(u.xJ,{label:"Stock Entry Type",children:(0,v.jsx)(u.II,{value:"Material Receipt",readOnly:!0,size:"sm"})}),(0,v.jsx)(u.xJ,{label:"LCode",invalid:(null===t||void 0===t?void 0:t.code)&&(null===n||void 0===n?void 0:n.code),errorMessage:null===t||void 0===t?void 0:t.code,children:(0,v.jsx)(u.Ph,{size:"sm",name:"lcode",placeholder:"Select LCode",options:b,value:b.find((function(e){return e.value===i.code}))||null,onChange:function(e){a("code",e.value),a("description",e.description),a("uom",e.uom),a("uomId",e.uomId)}})}),(0,v.jsx)(u.xJ,{label:"Description",children:(0,v.jsx)(o.gN,{as:u.II,size:"sm",name:"description",value:i.description,readOnly:!0})}),(0,v.jsx)(u.xJ,{label:"UOM",children:(0,v.jsx)(o.gN,{as:u.II,size:"sm",name:"uom",value:i.uom,readOnly:!0})}),(0,v.jsx)(u.xJ,{label:"Quantity",invalid:t.quantity&&n.quantity,errorMessage:t.quantity,children:(0,v.jsx)(o.gN,{as:u.II,type:"number",name:"quantity",placeholder:"Add Quantity",value:i.quantity})}),(0,v.jsx)(u.xJ,{label:"Location",invalid:t.location&&n.location,errorMessage:t.location,children:(0,v.jsx)(u.Ph,{name:"Location",options:k,placeholder:"Select Location",value:k.find((function(e){return e.value===i.location})),onChange:function(e){a("location",e.value)}})})]})})]})}})}}}]);
//# sourceMappingURL=5409.be127298.chunk.js.map