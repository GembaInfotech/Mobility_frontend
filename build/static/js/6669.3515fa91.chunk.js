"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[6669],{26669:function(e,n,l){l.r(n),l.d(n,{default:function(){return R}});var i=l(29439),o=l(72791),t=l(9494),a=l(11723),r=l(40018),d=l(74165),s=l(15861),u=(l(10515),l(58617)),c=l(76053),v=l(16146),m=l(47511),p=l(60364),h=l(57689),f=l(80184),x=function(e){var n=e.setSearch,l=(e.filtervalue,e.setFilterValue),r=e.setFilterCompanyId,u=e.filterCompanyId,m=(0,h.s0)(),x=(0,p.v9)((function(e){return e.auth.user})),C=(0,o.useState)([]),b=(0,i.Z)(C,2),y=b[0],N=b[1];return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,d.Z)().mark((function e(){var n,l,i,o;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===x||void 0===x||!x.companyId){e.next=7;break}return e.next=4,(0,t.ac)(a.vh.LIST_DATA,{companyIds:JSON.stringify(x.companyId),type:a.kD.COMPANY});case 4:o=e.sent,e.next=10;break;case 7:return e.next=9,(0,t.ac)(a.vh.LIST_DATA,{type:a.kD.COMPANY});case 9:o=e.sent;case 10:console.log(null===(n=o)||void 0===n?void 0:n.data),N((null===(l=o)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.data)||[]),console.log(y),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error loading company list:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[x]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"md:flex gap-4 w-full",children:[(0,f.jsx)(v.Ph,{autoComplete:"off",placeholder:"Filter by Company",defaultOptions:!0,cacheOptions:!0,size:"sm",className:"mb-4",value:u,options:y,getOptionLabel:function(e){return"".concat((null===e||void 0===e?void 0:e.name)||"")},getOptionValue:function(e){return null===e||void 0===e?void 0:e._id},onChange:function(e){r(e),l("")}}),(0,f.jsx)(v.zx,{size:"sm",onClick:function(){n(""),r(null),console.log("filterCompanyId",u),m("/app/masters/insurances")},icon:(0,f.jsx)(c.pYJ,{}),children:"Reset"})]})})},C=function(e){var n=e.setSearch,l=e.filtervalue,i=e.setFilterValue,o=e.setFilterCompanyId,t=e.filterCompanyId,a=e.addButtonClick;return(0,f.jsxs)(f.Fragment,{children:[(0,m.ZP)(m.Fm.INSURANCES,m.qz.WRITE)&&(0,f.jsx)("div",{className:"md:flex items-center justify-end",children:(0,f.jsx)(v.zx,{size:"sm",variant:"solid",onClick:a,icon:(0,f.jsx)(u.HQD,{}),children:"Add Insurance"})}),(0,f.jsx)("div",{className:"flex flex-col",children:(0,f.jsx)(x,{setSearch:n,filtervalue:l,setFilterValue:i,setFilterCompanyId:o,filterCompanyId:t})})]})},b=l(78820),y=l(25764),N=l(52639),S=l(92506),I=l(62797),j=l(75737),E=l.n(j),g=(l(70902),[{label:"Name",type:"text",name:"name",placeholder:"Enter insurance name",component:v.II,isBasic:!0},{name:"phoneNumber",countryCode:"countryCode",label:"Mobile No.",component:"phoneNumber",placeholder:"Enter mobile no."},{label:"Email",name:"email",placeholder:"Enter Email",component:v.II,isBasic:!0},{label:"Address",name:"address",placeholder:"Enter Address",component:v.II,isBasic:!0}]),A=I.Ry().shape({name:I.Z_().required("Required"),email:I.Z_().email().required("Required"),phoneNumber:I.Z_().required("Required"),address:I.Z_().required("Required")}),w={name:"",email:"",phoneNumber:"",countryCode:"+1",address:"",companyId:""},Z=function(e){var n=e.closeAddEdit,l=e.selectedRow,i=localStorage.getItem("selectedHospitalId"),o=((0,p.v9)((function(e){return e.auth.user})),(0,h.s0)());return(0,f.jsx)(r.lG,{children:(0,f.jsx)(S.J9,{initialValues:l||w,validationSchema:A,onSubmit:function(e,n){var r,d,s=n.setSubmitting,u={};u.phoneNumber=null===e||void 0===e||null===(r=e.phoneNumber)||void 0===r?void 0:r.replace(null===e||void 0===e?void 0:e.countryCode,""),u.companyId=i,null!==e&&void 0!==e&&null!==(d=e.countryCode)&&void 0!==d&&d.includes("+")||(u.countryCode="+".concat(e.countryCode)),""===e.phoneNumber&&delete u.phoneNumber,l&&(u.id=l._id),u.name=null===e||void 0===e?void 0:e.name,u.email=null===e||void 0===e?void 0:e.email,u.address=null===e||void 0===e?void 0:e.address,(0,t.Fv)(a.vh.ADD_EDIT_INSURANCE,u).then((function(e){o(-1),v.Am.push((0,f.jsx)(v.P_,{type:"success",children:"Saved successfully"}))})).catch((function(){s(!1)})).finally((function(){s(!1)}))},enableReinitialize:!0,children:function(e){var i=e.errors,o=e.touched,t=e.values,a=e.isSubmitting,r=e.setFieldValue;return(0,f.jsxs)(S.l0,{className:"p-5",children:[(0,f.jsxs)("div",{className:"flex mb-3 justify-between w-3/4",children:[(0,f.jsx)("h3",{children:l?"Edit Insurance":"Add Insurance"}),(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)(v.zx,{size:"sm",className:"ltr:mr-3 rtl:ml-3",onClick:n,icon:(0,f.jsx)(b.SV5,{}),type:"button",children:"Cancel"}),(0,f.jsx)(v.zx,{size:"sm",variant:"solid",loading:a,icon:(0,f.jsx)(b.JMf,{}),type:"submit",children:l?"Update":"Save"})]})]}),(0,f.jsx)("div",{children:(0,f.jsx)(v.Zb,{className:"mt-2.5 w-3/4 ",children:(0,f.jsx)(v.Yb,{className:" md:w-full lg:w-1/2",children:g.map((function(e,n){return(0,f.jsx)(v.xJ,{label:null===e||void 0===e?void 0:e.label,invalid:(null===i||void 0===i?void 0:i[e.name])&&(null===o||void 0===o?void 0:o[e.name]),errorMessage:null===i||void 0===i?void 0:i[e.name],children:null!==e&&void 0!==e&&e.isBasic?(0,f.jsx)(S.gN,{type:e.type,autoComplete:"off",onWheel:function(n){return null!==e&&void 0!==e&&e.isWheel?n.target.blur():""},value:null===t||void 0===t?void 0:t[e.name],name:e.name,placeholder:e.placeholder,component:null===e||void 0===e?void 0:e.component}):(0,f.jsx)(f.Fragment,{children:"phoneNumber"===(null===e||void 0===e?void 0:e.component)&&(0,f.jsx)(E(),{inputStyle:{width:"369px",padding:"11px 14px 11px 60px"},enableSearch:!0,country:"us",countryCodeEditable:!0,value:"".concat(null===t||void 0===t?void 0:t[e.name]),onChange:function(n,l){r(e.name,n),r(e.countryCode,null===l||void 0===l?void 0:l.dialCode)}})})},n)}))})})})]})}})})},D=l(31673),F=l(52452),k=[{label:"Edit",key:N.A6.EDIT,show:function(){return(0,m.ZP)(m.Fm.INSURANCES,m.qz.WRITE)}},{label:(0,f.jsx)(b.YK6,{style:{fontSize:"1.2rem"}}),key:N.A6.DELETE,toolTip:"Delete",show:function(){return(0,m.ZP)(m.Fm.INSURANCES,m.qz.DELETE)}}],R=function(){var e=localStorage.getItem("selectedHospitalId"),n=(0,o.useState)([]),l=(0,i.Z)(n,2),d=l[0],s=l[1],u=(0,o.useState)([]),c=(0,i.Z)(u,2),p=c[0],h=c[1],x=(0,o.useState)(!0),b=(0,i.Z)(x,2),S=b[0],I=b[1],j=(0,o.useState)(""),E=(0,i.Z)(j,2),g=E[0],A=E[1],w=(0,o.useState)(1),R=(0,i.Z)(w,2),T=R[0],_=R[1],z=(0,o.useState)(0),L=(0,i.Z)(z,2),O=L[0],q=L[1],B=(0,o.useState)(10),H=(0,i.Z)(B,2),P=H[0],M=H[1],U=(0,o.useState)(!1),V=(0,i.Z)(U,2),W=V[0],J=V[1],Y=(0,o.useState)(""),G=(0,i.Z)(Y,2),K=G[0],Q=G[1],X=(0,o.useState)(!1),$=(0,i.Z)(X,2),ee=$[0],ne=$[1],le=(0,o.useState)(!1),ie=(0,i.Z)(le,2),oe=ie[0],te=ie[1],ae=(0,o.useState)(""),re=(0,i.Z)(ae,2),de=(re[0],re[1]),se=(0,o.useState)(!1),ue=(0,i.Z)(se,2),ce=ue[0],ve=ue[1];(0,o.useEffect)((function(){var n;(0,t.ac)(a.vh.LIST_DATA,{type:a.kD.INSURANCES,limit:P,search:g,companyId:null!==(n=null===d||void 0===d?void 0:d._id)&&void 0!==n?n:e,skip:P*(T-1)}).then((function(e){var n,l;h(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),q(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.count)})).finally((function(){return I(!1)}))}),[g,T,P,oe,d]);var me=function(e,n,l){Q(l),n===N.A6.EDIT&&(l.phoneNumber=(null===l||void 0===l?void 0:l.countryCode)+(null===l||void 0===l?void 0:l.phoneNumber),J(!0)),n===N.A6.DELETE&&ne(!0)},pe=function(){ne(!1),Q(""),ve(!1)},he={header:N.BI.HEADER,des:N.BI.DELETE,buttonLabel:"Delete"},fe=[{Header:"Company Name",Cell:function(e){var n,l=null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original;return(0,f.jsx)("div",{className:"flex items-center w-40",children:null===l||void 0===l?void 0:l.name})}},{Header:"Address",accessor:"address",Cell:function(e){var n,l=null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original;return(0,f.jsx)("div",{className:"flex items-center w-40",children:null===l||void 0===l?void 0:l.address})}},{Header:"Mobile",accessor:"mobile",Cell:function(e){var n,l=null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original;return(0,f.jsxs)("div",{className:"flex items-center w-40",children:[null===l||void 0===l?void 0:l.countryCode," - ",null===l||void 0===l?void 0:l.phoneNumber]})}},{Header:"Email",accessor:"email",Cell:function(e){var n,l=null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.original;return(0,f.jsx)("div",{className:"flex items-center w-40",children:null===l||void 0===l?void 0:l.email})}},{Header:"Active",Cell:function(e){return(0,f.jsx)(D.Z,{dataObj:e,setSelectedData:de,setActiveConfirm:ve,setOpenModal:ne})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,f.jsx)(F.Z,{row:e.row.original,onActionHandle:me,actionsMenu:k})}}];return(0,f.jsx)(f.Fragment,{children:W?(0,f.jsx)(Z,{closeAddEdit:function(){J(!1),te(!oe),Q("")},selectedRow:K}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(C,{setSearch:A,setFilterCompanyId:s,filterCompanyId:d,addButtonClick:function(){return J(!0)}}),(0,f.jsx)(r.lG,{className:"h-full",bodyClass:"h-full",children:(0,f.jsx)(r.wQ,{columns:(0,m._P)(fe,m.Fm.INSURANCES,1),data:p,loading:S,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:T,pageSize:P,total:O},onPaginationChange:function(e){return _(e)},onSelectChange:function(e){return M(e)}})}),(0,f.jsx)(y.Z,{isOpen:ee,onConfirmClick:function(){var e;console.log("selectedRow",K);var n={type:a.kD.INSURANCES,id:null===K||void 0===K?void 0:K._id};ce?(e=N.D5,n.status=+(null===K||void 0===K?void 0:K.action)):(e=N.O7,n.status=0),(0,t.Fv)(a.vh.BLOCK_DELETE_DATA,n).then((function(n){v.Am.push((0,f.jsx)(v.P_,{type:"success",children:e})),te((function(e){return!e})),pe()}))},header:he.header,des:ce?null===N.uF||void 0===N.uF?void 0:N.uF.des:N.BI.DELETE,isWarning:!ce&&N.BI.WARNING,onDialogClose:pe,buttonLabel:ce?null===N.uF||void 0===N.uF?void 0:N.uF.buttonLabel:he.buttonLabel})]})})}}}]);
//# sourceMappingURL=6669.3515fa91.chunk.js.map