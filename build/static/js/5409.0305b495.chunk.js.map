{"version":3,"file":"static/js/5409.0305b495.chunk.js","mappings":"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","sources":["services/CommonService.js","views/inventory/stockEntry/addEdit/index.js"],"sourcesContent":["import ApiService from \"./ApiService\"\r\nimport BaseService from \"./BaseService\";\r\n\r\nexport function getApi(endpoint, params) {\r\n  return BaseService.get(endpoint, { params }).then((res) => res?.data);\r\n}\r\n\r\nexport function postApi(endpoint, payload) {    \r\n  return BaseService.post(endpoint, payload).then((res) => res?.data);\r\n}\r\n\r\nexport async function apiGetNotificationCount () {\r\n    return ApiService.fetchData({\r\n        url: '/notification/count',\r\n        method: 'get'\r\n    })\r\n}\r\n\r\nexport async function apiGetNotificationList () {\r\n    return ApiService.fetchData({\r\n        url: '/notification/list',\r\n        method: 'get'\r\n    })\r\n}\r\n\r\nexport async function apiGetSearchResult (data) {\r\n    return ApiService.fetchData({\r\n        url: '/search/query',\r\n        method: 'post',\r\n        data\r\n    })\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { Button, Card, FormContainer, FormItem, Input, Select, toast, Notification } from \"components/ui\";\r\nimport { AiOutlineSave, AiOutlineCloseCircle } from \"react-icons/ai\";\r\nimport { getApi, postApi } from \"services/CommonService\";\r\nimport { APIS, LIST_DATA_API_TYPE } from \"constants/api.constant\";\r\nimport { UPDATE_TOAST, ADDED_TOAST } from \"constants/app.constant\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  code: Yup.string().required(\"L Code is required\"),\r\n  stockType: Yup.object().required(\"Stock Entry Type is required\"),\r\n  quantity: Yup.number()\r\n    .required(\"Quantity is required\")\r\n    .positive(\"Quantity must be positive\")\r\n    .integer(\"Quantity must be an integer\"),\r\n  location: Yup.string().required(\"Location is required\"),\r\n});\r\n\r\nconst initialValues = {\r\n  code: \"\",\r\n  description: \"\",\r\n  stockType: { label: \"Material Receipt\", value: 1 },\r\n  quantity: \"\",\r\n  location: \"\",\r\n  uom: \"\",\r\n  uomId: \"\",\r\n  transferLocation: \"\",\r\n  transferQuantity: \"\",\r\n  companyId: \"\",\r\n};\r\n\r\nconst AddEditStock = ({ onClose, refreshPage }) => {\r\n  const { id } = useParams();\r\n  const [loading, setLoading] = useState(false);\r\n  const [materialOptions, setMaterialOptions] = useState([]); // To store materials\r\n  const [warehouseOptions, setWarehouseOptions] = useState([]); // To store locations\r\n  const [editData, setEditData] = useState(initialValues);\r\n  const [loadingMaterialOptions, setLoadingMaterialOptions] = useState(true); // To handle loading state for materials\r\n  const [companyOptions, setCompanyOptionos] = useState([]);\r\n  const user = useSelector((state) => state.auth.user);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const savedHospitalId = localStorage.getItem(\"selectedHospitalId\");\r\n\r\n\r\n  // Fetch data for materials and locations\r\n  useEffect(() => {\r\n    // if (user?.companyId) {\r\n    //   getApi(APIS.LIST_DATA, {\r\n    //     companyIds: JSON.stringify(user.companyId),\r\n    //     type: LIST_DATA_API_TYPE.COMPANY,\r\n    //   })\r\n    //     .then((res) => {\r\n    //       const response = res?.data?.data;\r\n\r\n    //       if (Array.isArray(response)) {\r\n    //         const companyOptions = response.map((company) => ({\r\n    //           label: company.name,\r\n    //           value: company._id,\r\n    //         }));\r\n    //         setCompanyOptionos(companyOptions);\r\n    //       }\r\n    //     })\r\n    //     .catch((error) => {\r\n    //       // Handle any errors from the additional API call\r\n    //       console.error(\"Error calling additional API:\", error);\r\n    //     });\r\n    // } else {\r\n    //   getApi(APIS.LIST_DATA, { type: LIST_DATA_API_TYPE.COMPANY })\r\n    //     .then((res) => {\r\n    //       if (res && res.data && Array.isArray(res.data.data)) {\r\n    //         const locations = res.data.data.map((location) => ({\r\n    //           label: location.name,\r\n    //           value: location._id,\r\n    //         }));\r\n    //         setCompanyOptionos(locations);\r\n    //       } else {\r\n    //         toast.push(<Notification type=\"error\">No Companies found!</Notification>);\r\n    //       }\r\n    //     })\r\n    //     .catch((error) => {\r\n    //       console.error(\"Error fetching Companies:\", error);\r\n    //       toast.push(<Notification type=\"error\">Failed to load Companies</Notification>);\r\n    //     });\r\n    // }\r\n    getApi(APIS.LIST_DATA, { type: LIST_DATA_API_TYPE.CODES, companyId: savedHospitalId, })\r\n      .then((res) => {\r\n        if (res && res.data && Array.isArray(res.data.data)) {\r\n          const filteredData = res.data.data.filter((item) => item.type === 1);\r\n          const materials = filteredData.map((item) => ({\r\n            label: item.code,\r\n            value: item._id,\r\n            description: item.description,\r\n            uom: item?.uomId?.name,\r\n            uomId: item?.uomId?._id,\r\n          }));\r\n          setMaterialOptions(materials);\r\n          setLoadingMaterialOptions(false); // Set loading to false once data is fetched\r\n        } else {\r\n          toast.push(<Notification type=\"error\">No Materials found!</Notification>);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching materials:\", error);\r\n        toast.push(<Notification type=\"error\">Failed to load Materials</Notification>);\r\n      });\r\n\r\n    // Fetch locations (Warehouses)\r\n    getApi(APIS.LIST_DATA, { type: LIST_DATA_API_TYPE.LOCATIONS, companyId: savedHospitalId, })\r\n      .then((res) => {\r\n        if (res && res.data && Array.isArray(res.data.data)) {\r\n          const locations = res.data.data.map((location) => ({\r\n            label: location.name,\r\n            value: location._id,\r\n          }));\r\n          setWarehouseOptions(locations);\r\n        } else {\r\n          toast.push(<Notification type=\"error\">No Warehouses found!</Notification>);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching warehouses:\", error);\r\n        toast.push(<Notification type=\"error\">Failed to load Warehouses</Notification>);\r\n      });\r\n\r\n    if (id) {\r\n      const data = location.state?.editData;\r\n\r\n      setEditData({\r\n        code: data?.lcodeId?._id || \"\",\r\n        description: data.lcodeId?.description || \"\",\r\n        stockType: { label: \"Material Receipt\", value: 1 },\r\n        quantity: data.quantity || \"\",\r\n        location: data.locationId?._id || \"\",\r\n        modelType: LIST_DATA_API_TYPE.STOCK_ENTRY,\r\n\r\n      });\r\n    }\r\n  }, [id, location.state?.editData]);\r\n\r\n\r\n  const onSubmit = (values, { setSubmitting }) => {\r\n    const payload = {\r\n      lcodeId: values.code,\r\n      stockType: values.stockType?.value,\r\n      quantity: values.quantity,\r\n      locationId: values.location,\r\n      uomId: values.uomId,\r\n      transferLocation: values.transferLocation, // Include transfer location\r\n      transferQuantity: values.transferQuantity, // Include transfer quantity\r\n      modelType: LIST_DATA_API_TYPE.STOCK_ENTRY,\r\n      // companyId: values.companyId,\r\n      companyId: savedHospitalId\r\n    };\r\n    if (id) {\r\n      payload.id = id;\r\n    }\r\n    postApi(APIS.ADD_EDIT_DATA, payload)\r\n      .then((res) => {\r\n        toast.push(<Notification type=\"success\">{id ? UPDATE_TOAST : ADDED_TOAST}</Notification>);\r\n        navigate(\"/app/inventory/stockEntry\");\r\n      })\r\n      .catch((err) => {\r\n        toast.push(<Notification type=\"error\">{err}</Notification>);\r\n      })\r\n      .finally(() => {\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={editData}\r\n      validationSchema={validationSchema}\r\n      onSubmit={onSubmit}\r\n      enableReinitialize\r\n    >\r\n      {({ errors, touched, values, setFieldValue, isSubmitting }) => (\r\n        <Form>\r\n          <div className=\"flex mb-3 justify-between w-3/4\">\r\n            <h3>{editData.code ? \"Edit Stock\" : \"Add Stock\"}</h3>\r\n            <div className=\"flex\">\r\n              <Button size=\"sm\" className=\"ltr:mr-3 rtl:ml-3\" onClick={() => navigate(-1)} icon={<AiOutlineCloseCircle />} type=\"button\">\r\n                Cancel\r\n              </Button>\r\n              <Button size=\"sm\" variant=\"solid\" loading={isSubmitting || loading} icon={<AiOutlineSave />} type=\"submit\">\r\n                {editData.code ? \"Update\" : \"Save\"}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <Card className=\"mt-2.5 w-3/4\">\r\n            <FormContainer className=\"md:w-full lg:w-1/2\">\r\n              {/* <FormItem\r\n                label=\"Company\"\r\n                invalid={errors.companyId && touched.companyId}\r\n                errorMessage={errors.companyId}\r\n              >\r\n                <Field name=\"companyId\">\r\n                  {({ field, form }) => (\r\n                    <Select\r\n                      {...field}\r\n                      options={companyOptions}\r\n                      placeholder=\"Select Company\"\r\n                      value={companyOptions.find(\r\n                        (option) => option.value === field.value\r\n                      )}\r\n                      onChange={(selectedOption) =>\r\n                        form.setFieldValue(\"companyId\", selectedOption.value)\r\n                      }\r\n                      onBlur={field.onBlur}\r\n                    />\r\n                  )}\r\n                </Field>\r\n              </FormItem> */}\r\n              <FormItem label=\"Stock Entry Type\" invalid={errors.stockType && touched.stockType} errorMessage={errors.stockType}>\r\n                <Select\r\n                  name=\"stockType\"\r\n                  options={[\r\n                    { label: \"Material Receipt\", value: 1 },\r\n                    { label: \"Material Transfer\", value: 2 },\r\n                  ]}\r\n                  placeholder=\"Select Stock Type\"\r\n                  value={values.stockType}\r\n                  onChange={(selectedOption) => setFieldValue(\"stockType\", selectedOption)}\r\n                />\r\n              </FormItem>\r\n\r\n              <FormItem label=\"Location\" invalid={errors.location && touched.location} errorMessage={errors.location}>\r\n                <Select\r\n                  name=\"location\"\r\n                  options={warehouseOptions}\r\n                  placeholder=\"Select Location\"\r\n                  value={warehouseOptions.find((option) => option.value === values.location)}\r\n                  onChange={(selectedOption) => setFieldValue(\"location\", selectedOption.value)}\r\n                />\r\n              </FormItem>\r\n\r\n              <FormItem label=\"LCode\" invalid={errors.code && touched.code} errorMessage={errors.code}>\r\n                {loadingMaterialOptions ? (\r\n                  <Input size=\"sm\" value=\"Loading...\" readOnly />\r\n                ) : (\r\n                  <Select\r\n                    size=\"sm\"\r\n                    name=\"code\"\r\n                    placeholder=\"Select LCode\"\r\n                    options={materialOptions}\r\n                    value={materialOptions.find((option) => option.value === values.code) || null}\r\n                    onChange={(selectedOption) => {\r\n                      setFieldValue(\"code\", selectedOption.value);\r\n                      setFieldValue(\"description\", selectedOption.description);\r\n                      setFieldValue(\"uom\", selectedOption.uom);\r\n                      setFieldValue(\"uomId\", selectedOption.uomId);\r\n                    }}\r\n                  />\r\n                )}\r\n              </FormItem>\r\n\r\n              <FormItem label=\"Description\">\r\n                <Field as={Input} size=\"sm\" name=\"description\" value={values.description} readOnly />\r\n              </FormItem>\r\n\r\n              <FormItem label=\"Quantity\" invalid={errors.quantity && touched.quantity} errorMessage={errors.quantity}>\r\n                <Field as={Input} type=\"number\" name=\"quantity\" placeholder=\"Add Quantity\" value={values.quantity} onChange={(e) => setFieldValue(\"quantity\", e.target.value)} />\r\n              </FormItem>\r\n\r\n              {values.stockType.value === 2 && (\r\n                <>\r\n                  <FormItem\r\n                    label=\"Transfer Location\"\r\n                    invalid={errors.transferLocation && touched.transferLocation}\r\n                    errorMessage={errors.transferLocation}\r\n                  >\r\n                    <Select\r\n                      name=\"transferLocation\"\r\n                      options={warehouseOptions}\r\n                      placeholder=\"Select Transfer Location\"\r\n                      value={warehouseOptions.find((option) => option.value === values.transferLocation)}\r\n                      onChange={(selectedOption) => setFieldValue(\"transferLocation\", selectedOption.value)}\r\n                    />\r\n                  </FormItem>\r\n\r\n                  <FormItem\r\n                    label=\"Transfer Quantity\"\r\n                    invalid={errors.transferQuantity && touched.transferQuantity}\r\n                    errorMessage={errors.transferQuantity}\r\n                  >\r\n                    <Field\r\n                      as={Input}\r\n                      type=\"number\"\r\n                      name=\"transferQuantity\"\r\n                      placeholder=\"Enter Transfer Quantity\"\r\n                      value={values.transferQuantity}\r\n                      onChange={(e) => setFieldValue(\"transferQuantity\", e.target.value)}\r\n                    />\r\n                  </FormItem>\r\n                </>\r\n              )}\r\n            </FormContainer>\r\n          </Card>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default AddEditStock;\r\n"],"names":["getApi","endpoint","params","BaseService","then","res","data","postApi","payload","apiGetSearchResult","ApiService","url","method","validationSchema","Yup","shape","code","required","stockType","quantity","positive","integer","location","initialValues","description","label","value","uom","uomId","transferLocation","transferQuantity","companyId","onClose","refreshPage","id","useParams","useState","loading","materialOptions","setMaterialOptions","warehouseOptions","setWarehouseOptions","editData","setEditData","loadingMaterialOptions","setLoadingMaterialOptions","navigate","useSelector","state","auth","user","useNavigate","useLocation","savedHospitalId","localStorage","getItem","useEffect","APIS","type","LIST_DATA_API_TYPE","Array","isArray","materials","filter","item","map","_id","name","toast","catch","error","console","locations","lcodeId","locationId","modelType","onSubmit","values","setSubmitting","UPDATE_TOAST","ADDED_TOAST","err","finally","enableReinitialize","errors","touched","setFieldValue","isSubmitting","className","size","onClick","icon","variant","invalid","errorMessage","options","placeholder","onChange","selectedOption","find","option","readOnly","as","Input","e","target"],"sourceRoot":""}