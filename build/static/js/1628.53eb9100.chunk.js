"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[1628],{61628:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var i=t(29439),a=t(72791),o=t(9494),l=t(11723),s=t(40018),u=t(16146),d=t(58617),r=t(92506),c=t(62797),v=t(78820),f=t(60364),h=t(80184),m=function(e){var n=e.editData,t=e.onCancel,i=e.onSave,a=e.isLoading;return(0,h.jsxs)("div",{className:"text-right w-full",children:[(0,h.jsx)(u.zx,{className:"mr-2",onClick:t,disabled:a,icon:(0,h.jsx)(v.SV5,{}),children:"Cancel"}),(0,h.jsx)(u.zx,{variant:"solid",type:"submit",onClick:i,disabled:a,icon:(0,h.jsx)(v.JMf,{}),children:null!==n&&void 0!==n&&n.id?"Update":"Save"})]})},E=c.Ry().shape({name:c.Z_().required("Required")}),D={name:"",companyId:""},p=function(e){var n=e.editData,t=e.show,d=e.onClose,c=e.refreshPage,v=localStorage.getItem("selectedHospitalId"),p=(0,a.useState)([]),S=(0,i.Z)(p,2),C=(S[0],S[1],(0,f.v9)((function(e){return e.auth.user})),(0,a.useRef)()),x=(0,a.useState)(!1),b=(0,i.Z)(x,2),I=b[0],T=b[1];return(0,h.jsx)(u.dy,{isOpen:t,onClose:d,onRequestClose:d,closable:!1,bodyClass:"p-0",title:null!==n&&void 0!==n&&n.id?"Edit Device Type":"Add Device Type",footer:(0,h.jsx)(m,{onCancel:d,onSave:function(){var e;return null===C||void 0===C||null===(e=C.current)||void 0===e?void 0:e.submitForm()},isLoading:I,editData:n}),children:(0,h.jsx)(s.lG,{children:(0,h.jsx)(r.J9,{innerRef:C,initialValues:n||D,validationSchema:E,onSubmit:function(e,n){var t=e.name,i=e.id,a=(e.companyId,n.setSubmitting);T(!0);var s={name:t,modelType:l.kD.DEVICE_TYPES,companyId:v};i&&(s.id=i),(0,o.Fv)(l.vh.ADD_EDIT_DATA,s).then((function(){d(),c(),u.Am.push((0,h.jsx)(u.P_,{type:"success",children:"Device Type saved!"}))})).catch((function(){a(!1)})).finally((function(){return T(!1)}))},enableReinitialize:!0,children:function(e){var n=e.errors,t=e.touched;e.setFieldValue,e.values;return(0,h.jsx)(r.l0,{className:"p-5",children:(0,h.jsx)(u.Yb,{children:(0,h.jsx)(u.xJ,{label:"Device Type",invalid:(null===n||void 0===n?void 0:n.name)&&(null===t||void 0===t?void 0:t.name),errorMessage:null===n||void 0===n?void 0:n.name,children:(0,h.jsx)(r.gN,{type:"text",autoComplete:"off",name:"name",placeholder:"Enter Name",component:u.II})})})})}})})})},S=t(52452),C=t(93156),x=t(25764),b=t(52639),I=t(31673),T=t(47511),A=[{label:"Edit",key:b.A6.EDIT,show:function(){return(0,T.ZP)(T.Fm.TYPESOFDEVICES,T.qz.WRITE)}},{label:(0,h.jsx)(v.YK6,{style:{fontSize:"1.2rem"}}),key:b.A6.DELETE,toolTip:"Delete",show:function(){return(0,T.ZP)(T.Fm.TYPESOFDEVICES,T.qz.DELETE)}}],j=(0,T.ZP)(T.Fm.TYPESOFDEVICES,T.qz.WRITE)?[{label:"Add Device Type",key:b.A6.ADD,icon:(0,h.jsx)(d.HQD,{})}]:[],y={header:b.BI.HEADER,des:b.BI.DELETE,buttonLabel:"Delete"},g=function(){var e=localStorage.getItem("selectedHospitalId"),n=(0,a.useState)([]),t=(0,i.Z)(n,2),d=t[0],r=t[1],c=(0,a.useState)(!1),v=(0,i.Z)(c,2),f=v[0],m=v[1],E=(0,a.useState)(1),D=(0,i.Z)(E,2),g=D[0],Z=D[1],F=(0,a.useState)(0),k=(0,i.Z)(F,2),P=k[0],_=k[1],L=(0,a.useState)(10),w=(0,i.Z)(L,2),O=w[0],R=w[1],V=(0,a.useState)(""),Y=(0,i.Z)(V,2),z=Y[0],H=Y[1],N=(0,a.useState)(!1),q=(0,i.Z)(N,2),M=q[0],B=q[1],W=(0,a.useState)(!1),G=(0,i.Z)(W,2),J=G[0],K=G[1],Q=(0,a.useState)(""),U=(0,i.Z)(Q,2),X=U[0],$=U[1],ee=(0,a.useState)(!1),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],ae=(0,a.useState)(!1),oe=(0,i.Z)(ae,2),le=oe[0],se=oe[1];(0,a.useEffect)((function(){m(!0),(0,o.ac)(l.vh.LIST_DATA,{type:l.kD.DEVICE_TYPES,limit:O,search:z,companyId:e,skip:O*(g-1)}).then((function(e){var n,t;r([]),r(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),_(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count)})).finally((function(){return m(!1)}))}),[z,g,O,J]);var ue=function(e,n,t){n===b.A6.EDIT&&($({id:null===t||void 0===t?void 0:t._id,name:null===t||void 0===t?void 0:t.name}),B(!0)),n===b.A6.DELETE&&($({id:null===t||void 0===t?void 0:t._id}),ie(!0))},de=[{Header:"name",accessor:"name"},{Header:"Active",Cell:function(e){return(0,h.jsx)(I.Z,{dataObj:e,setSelectedData:$,setActiveConfirm:se,setOpenModal:ie})}},{Header:"Actions",id:"action",accessor:function(e){return e},Cell:function(e){return(0,h.jsx)(S.Z,{row:e.row.original,onActionHandle:ue,actionsMenu:A})}}],re=function(){$(""),ie(!1),se(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(C.Z,{buttonMenu:j,setSearch:H,buttonClick:function(e,n){n===b.A6.ADD&&B(!0)}}),(0,h.jsx)(s.lG,{className:"h-full",bodyClass:"h-full",children:(0,h.jsx)(s.wQ,{columns:(0,T._P)(de,T.Fm.TYPESOFDEVICES,1),isCursor:!1,data:d,loading:f,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},pagingData:{pageIndex:g,pageSize:O,total:P},onPaginationChange:function(e){return Z(e)},onSelectChange:function(e){return R(e)}})}),(0,h.jsx)(p,{show:M,onClose:function(){$(""),B(!1)},refreshPage:function(){return K((function(e){return!e}))},editData:X}),(0,h.jsx)(x.Z,{isOpen:te,onConfirmClick:function(){var e,n={type:l.kD.DEVICE_TYPES,id:null===X||void 0===X?void 0:X.id};le?(e=b.D5,n.status=+(null===X||void 0===X?void 0:X.action)):(e=b.O7,n.status=0),(0,o.Fv)(l.vh.BLOCK_DELETE_DATA,n).then((function(n){u.Am.push((0,h.jsx)(u.P_,{type:"success",children:e})),K((function(e){return!e})),re()}))},header:y.header,des:le?null===b.uF||void 0===b.uF?void 0:b.uF.des:y.des,onDialogClose:re,isWarning:!le&&b.BI.WARNING,buttonLabel:le?null===b.uF||void 0===b.uF?void 0:b.uF.buttonLabel:y.buttonLabel})]})}}}]);
//# sourceMappingURL=1628.53eb9100.chunk.js.map