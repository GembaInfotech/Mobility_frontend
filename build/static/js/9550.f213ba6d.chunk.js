"use strict";(self.webpackChunknasp=self.webpackChunknasp||[]).push([[9550],{9494:(e,l,i)=>{i.d(l,{EY:()=>r,Fv:()=>s,ac:()=>a});var n=i(91181),d=i(14712);function a(e,l){return d.Z.get(e,{params:l}).then((e=>null===e||void 0===e?void 0:e.data))}function s(e,l){return d.Z.post(e,l).then((e=>null===e||void 0===e?void 0:e.data))}async function r(e){return n.Z.fetchData({url:"/search/query",method:"post",data:e})}},9550:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Z});var n=i(72791),d=i(40018),a=i(73038),s=i(92506),r=i(81724),t=i(9494),o=i(11723),u=i(57689),c=i(4481),m=i(86368),v=i(77567),h=i(45115),p=i(31414),x=i(80184);const j=[{label:"Sub Admin",name:"sub-user",read:!0,edit:!1,delete:!1},{label:"Patient Management",name:"patient",read:!0,edit:!1,delete:!1},{label:"Physicians",name:"physician",read:!0,edit:!1,delete:!1},{label:"Patient Prescriptions",name:"service-order",read:!0,edit:!1,delete:!1},{label:"Insurance Companies",name:"insurance",read:!0,edit:!1,delete:!1},{label:"Codes (LCode / ICD)",name:"codes",read:!0,edit:!1,delete:!1},{label:"Types Of Devices",name:"types-of-devices",read:!0,edit:!1,delete:!1},{label:"Locations",name:"locations",read:!0,edit:!1,delete:!1}],f=e=>{let{touched:l,errors:i,values:n,setFieldValue:d}=e;const s=(e,l,i)=>{const a=((null===n||void 0===n?void 0:n.roles)||[]).map((n=>(null===n||void 0===n?void 0:n.name)===i?"edit"!==e&&"delete"!==e||!l?{...n,[e]:l}:{...n,[e]:l,read:!0}:n));d("roles",a)};return(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"my-4",children:"Access Control"}),(0,x.jsxs)(a.iA,{children:[(0,x.jsx)(h.Z,{children:(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(v.Z,{children:"Menu"}),(0,x.jsx)(v.Z,{children:"Read"}),(0,x.jsx)(v.Z,{children:"Add/Edit"}),(0,x.jsx)(v.Z,{children:"Delete"})]})}),(0,x.jsx)(c.Z,{children:null===j||void 0===j?void 0:j.map(((e,l)=>{var i;const d=null===n||void 0===n||null===(i=n.roles)||void 0===i?void 0:i.find((l=>(null===l||void 0===l?void 0:l.name)===(null===e||void 0===e?void 0:e.name)));return(0,x.jsxs)(p.Z,{children:[(0,x.jsxs)(m.Z,{children:[null===e||void 0===e?void 0:e.label," "]}),(0,x.jsx)(m.Z,{children:(0,x.jsx)(a.XZ,{checked:null===d||void 0===d?void 0:d.read,onChange:l=>s("read",l,null===e||void 0===e?void 0:e.name)})}),(0,x.jsx)(m.Z,{children:(0,x.jsx)(a.XZ,{checked:null===d||void 0===d?void 0:d.edit,onChange:l=>s("edit",l,null===e||void 0===e?void 0:e.name)})}),(0,x.jsx)(m.Z,{children:(0,x.jsx)(a.XZ,{checked:null===d||void 0===d?void 0:d.delete,onChange:l=>s("delete",l,null===e||void 0===e?void 0:e.name)})})]},l)}))})]})]})};var b=i(60364);const y=r.Ry().shape({name:r.Z_().required("Required"),email:r.Z_().email().required("Required")}),A={name:"",email:"",superAdmin:!1,roles:j},Z=()=>{const e=(0,n.useRef)(),[l,i]=(0,n.useState)(!1),[r,c]=(0,n.useState)(),{id:m}=(0,u.UO)(),v=(0,u.s0)(),{superAdmin:h}=(0,b.v9)((e=>{var l;return null===e||void 0===e||null===(l=e.auth)||void 0===l?void 0:l.user}));(0,n.useEffect)((()=>{m&&(0,t.ac)(o.vh.LIST_DATA,{type:o.kD.ADMINS,id:m}).then((e=>{var l;const i=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data;i.superAdmin=!!i.superAdmin,i.roles=i.roles?i.roles:j,c(i)}))}),[m]);return(0,x.jsx)(d.lG,{children:(0,x.jsx)(s.J9,{innerRef:e,initialValues:r||A,validationSchema:y,onSubmit:e=>{let{name:l,id:n,email:d,roles:s,superAdmin:r}=e;i(!0);const u=new FormData;u.append("name",l),u.append("email",d),u.append("superAdmin",r),u.append("roles",null!==s&&void 0!==s&&s.length?JSON.stringify(s):JSON.stringify(j)),n&&u.append("adminId",n),(0,t.Fv)(o.vh.ADD_EDIT_ADMINS,u).then((()=>{v(-1),a.Am.push((0,x.jsx)(a.P_,{type:"success",children:"Sub admin saved!"}))})).finally((()=>i(!1)))},enableReinitialize:!0,children:e=>{let{errors:i,touched:n,setFieldValue:d,isSubmitting:r,values:t}=e;return(0,x.jsxs)(s.l0,{className:"p-5",children:[(0,x.jsxs)("div",{className:"flex mb-3 justify-end w-3/4",children:[(0,x.jsx)(a.zx,{size:"sm",variant:"solid",onClick:()=>v(-1),type:"button",children:"Cancel"}),(0,x.jsx)(a.zx,{size:"sm",variant:"solid",style:{marginLeft:"5px"},loading:r,type:"submit",children:m?"Update":"Save"})]}),l&&(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(a.$j,{size:"3.25rem"})}),!l&&(0,x.jsx)(a.Zb,{className:"mt-2.5 w-3/4 ",children:(0,x.jsxs)(a.Yb,{children:[(0,x.jsx)(a.xJ,{label:"Name",invalid:(null===i||void 0===i?void 0:i.name)&&(null===n||void 0===n?void 0:n.name),errorMessage:null===i||void 0===i?void 0:i.name,children:(0,x.jsx)(s.gN,{type:"text",autoComplete:"off",name:"name",placeholder:"Enter name ",component:a.II})}),(0,x.jsx)(a.xJ,{label:"Email",invalid:(null===i||void 0===i?void 0:i.email)&&(null===n||void 0===n?void 0:n.email),errorMessage:null===i||void 0===i?void 0:i.email,children:(0,x.jsx)(s.gN,{type:"email",autoComplete:"off",name:"email",placeholder:"Enter Email",component:a.II})}),h&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("p",{className:"font-semibold",children:"Is Super Admin?"}),(0,x.jsx)(a.T5,{name:"superAdmin",checked:null===t||void 0===t?void 0:t.superAdmin,onChange:e=>{console.log("checked",e),d("superAdmin",!e)}})]}),!(null!==t&&void 0!==t&&t.superAdmin)&&(0,x.jsx)(f,{setFieldValue:d,values:t})]})]})})]})}})})}}}]);
//# sourceMappingURL=9550.f213ba6d.chunk.js.map